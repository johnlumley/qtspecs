<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 088 Minutes 2024-09-03</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
<link rel="shortcut icon" href="/img/QT4-64.png" />
<link rel="apple-touch-icon" sizes="64x64" href="/img/QT4-64.png" type="image/png" />
<link rel="apple-touch-icon" sizes="76x76" href="/img/QT4-76.png" type="image/png" />
<link rel="apple-touch-icon" sizes="120x120" href="/img/QT4-120.png" type="image/png" />
<link rel="apple-touch-icon" sizes="152x152" href="/img/QT4-152.png" type="image/png" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 088 Minutes 2024-09-03</h1>
<p>
<a href="../">Meeting index</a> / <a href="https://qt4cg.org">QT4CG.org</a> / <a href="https://qt4cg.org/dashboard">Dashboard</a> / <a href="https://github.com/qt4cg/qtspecs/issues">GH Issues</a> / <a href="https://github.com/qt4cg/qtspecs/pulls">GH Pull Requests</a>
</p>

<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes">Draft Minutes</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[0/4]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[10/11]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a>
<ul>
<li><a href="#so-far">1.2.1. Status so far…</a></li>
</ul>
</li>
<li><a href="#approve-minutes">1.3. Approve minutes of the previous meeting</a></li>
<li><a href="#next-meeting">1.4. Next meeting</a></li>
<li><a href="#open-actions">1.5. Review of open action items <code>[1/4]</code></a></li>
<li><a href="#open-pull-requests">1.6. Review of open pull requests and issues</a>
<ul>
<li><a href="#blocked">1.6.1. Blocked</a></li>
<li><a href="#merge-without-discussion">1.6.2. Merge without discussion</a></li>
<li><a href="#close-without-action">1.6.3. Close without action</a></li>
<li><a href="#xslt-focused">1.6.4. XSLT focused</a></li>
<li><a href="#substantive">1.6.5. Substantive PRs</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#technical-agenda">2. Technical agenda</a>
<ul>
<li><a href="#where-are-we">2.1. Where are we?</a></li>
<li><a href="#pr-1409">2.2. PR #1409: 1401 Rewrite of F+O section 20, Casting</a></li>
<li><a href="#pr-1393">2.3. PR #1393: 1391 Change function-annotations to return a sequence</a></li>
<li><a href="#pr-1384">2.4. PR #1384: 1316 Type declarations in quantified expressions</a></li>
<li><a href="#pr-1344">2.5. PR #1344: 1343 Drop the static typing feature</a></li>
<li><a href="#pr-1367">2.6. PR #1367: 1321 leading lone slash</a></li>
<li><a href="#pr-1361">2.7. PR #1361: 1337 Atomic value becomes atomic item</a></li>
<li><a href="#pr-1360">2.8. PR #1360: 1348 Some grammar simplifications</a></li>
<li><a href="#pr-1358">2.9. PR #1358: 959 fn:unix-time</a></li>
<li><a href="#pr-1228">2.10. PR #1228: – Adding the BLAKE3 hashing algorithm to fn:hash</a></li>
</ul>
</li>
<li><a href="#any-other-business">3. Any other business</a></li>
<li><a href="#adjourned">4. Adjourned</a></li>
</ul>
</div>
</div>

<div id="outline-container-minutes" class="outline-2">
<h2 id="minutes">Draft Minutes</h2>
<div class="outline-text-2" id="text-minutes">
</div>
</div>

<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[0/4]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-080-07: NW to update the build instructions in the README</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-082-02: DN to work with MK to come to agreement on the fn:ranks proposal</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-087-01: DN to update PR #1228 to reflect MK’s compromise and update the vulnerabilities</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-088-01: NW to consider how best to add a dedication to MSM.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-088-02: CG to add an issue about built-in, named record types.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-088-03: MK to add an example of duplicate function-annotations being returned.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-088-04: [Someone] needs to update the processing model diagram needs vis-a-vis the static typing feature</li>
</ul>
</div>
</div>

<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>

<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[10/11]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<ul class="org-ul">
<li class="on"><code>[X]</code> Reece Dunn (RD)</li>
<li class="off"><code>[&#xa0;]</code> Sasha Firsov (SF)</li>
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="on"><code>[X]</code> Joel Kalvesmaki (JK)</li>
<li class="on"><code>[X]</code> Michael Kay (MK)</li>
<li class="on"><code>[X]</code> Juri Leino (JLO)</li>
<li class="on"><code>[X]</code> John Lumley (JWL)</li>
<li class="on"><code>[X]</code> Dimitre Novatchev (DN)</li>
<li class="on"><code>[X]</code> Wendell Piez (WP)</li>
<li class="on"><code>[X]</code> Ed Porter (EP)</li>
<li><code>&lt;/&gt;</code> C. M. Sperberg-McQueen (MSM)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW). <i>Scribe</i>. <i>Chair</i>.</li>
</ul>
</div>
</div>

<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2024/09-03.html">the agenda</a>.
</p>

<p>
Accepted.
</p>
</div>

<div id="outline-container-so-far" class="outline-4">
<h4 id="so-far"><span class="section-number-4">1.2.1.</span> Status so far…</h4>
<div class="outline-text-4" id="text-so-far">
<p>
These charts have been adjusted so they reflect the preceding six months of work.
</p>


<div id="orgf05773c" class="figure">
<p><img src="./issues-open-2024-09-03.png" alt="issues-open-2024-09-03.png" />
</p>
<p><span class="figure-number">Figure 1: </span>“Burn down” chart on open issues</p>
</div>


<div id="org310b7ca" class="figure">
<p><img src="./issues-by-spec-2024-09-03.png" alt="issues-by-spec-2024-09-03.png" />
</p>
<p><span class="figure-number">Figure 2: </span>Open issues by specification</p>
</div>


<div id="orgeca71c6" class="figure">
<p><img src="./issues-by-type-2024-09-03.png" alt="issues-by-type-2024-09-03.png" />
</p>
<p><span class="figure-number">Figure 3: </span>Open issues by type</p>
</div>
</div>
</div>
</div>

<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.3.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2024/07-23.html">the minutes of the previous meeting</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.4.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
This next meeting is planned for 10 September. Any regrets?
</p>

<p>
None heard.
</p>
</div>
</div>

<div id="outline-container-open-actions" class="outline-3">
<h3 id="open-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[1/4]</code></h3>
<div class="outline-text-3" id="text-open-actions">
<p>
(Items marked [X] are believed to have been closed via email before
this agenda was posted.)
</p>

<ul class="org-ul">
<li class="on"><code>[X]</code> QT4CG-080-05: NW to add absolute property to the parse-uri output</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-080-07: NW to update the build instructions in the README</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-082-02: DN to work with MK to come to agreement on the fn:ranks proposal</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-087-01: DN to update PR #1228 to reflect MK’s compromise and update the vulnerabilities</li>
</ul>
</div>
</div>

<div id="outline-container-open-pull-requests" class="outline-3">
<h3 id="open-pull-requests"><span class="section-number-3">1.6.</span> Review of open pull requests and issues</h3>
<div class="outline-text-3" id="text-open-pull-requests">
</div>

<div id="outline-container-blocked" class="outline-4">
<h4 id="blocked"><span class="section-number-4">1.6.1.</span> Blocked</h4>
<div class="outline-text-4" id="text-blocked">
<p>
The following PRs are open but have merge conflicts or comments which
suggest they aren’t ready for action.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1227">#1227</a>: 150 PR resubmission for fn ranks</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1062">#1062</a>: 150bis - revised proposal for fn:ranks</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-529">#529</a>: 528 fn:elements-to-maps</li>
</ul>
</div>
</div>

<div id="outline-container-merge-without-discussion" class="outline-4">
<h4 id="merge-without-discussion"><span class="section-number-4">1.6.2.</span> Merge without discussion</h4>
<div class="outline-text-4" id="text-merge-without-discussion">
<p>
The following PRs are editorial, small, or otherwise appeared to be
uncontroversial when the agenda was prepared. The chairs propose that
these can be merged without discussion. If you think discussion is
necessary, please say so.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1406">#1406</a>: Fix 1399 - clarify fixed-namespaces spec</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1405">#1405</a>: Fix #1404 by changing fn:invisible-xml grammar parameter to xs:string?</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1402">#1402</a>: Update schema for XSLT 4.0 to include agreed syntax changes</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1400">#1400</a>: 1395 Revise rules for subtyping of choice item types</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1398">#1398</a>: 1397 Add missing change log entry for constructor functions</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1390">#1390</a>: 1368 built in keywords improvements</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1383">#1383</a>: 1374 - allow static error for duplicate keys</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1380">#1380</a>: 1320 Attempt to resolve a bug in parse-uri</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1370">#1370</a>: 1369 fn:round: rounding-mode → mode</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1359">#1359</a>: 1346 Fix minor typos in format-number</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1353">#1353</a>: 1347 Add escape-solidus option to xml-to-json function</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1352">#1352</a>: 1350 Fix signature for unparsed-text-available</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1342">#1342</a>: 1339 Deprecate ordering mode declaration</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1231">#1231</a>: 1193 Parsing Functions: Empty input</li>
</ul>

<p>
Accepted.
</p>

<ul class="org-ul">
<li>MK asks about parse and build URI</li>
<li>NW summarizes: will try to have something by next week. Please respond to the
email.</li>
</ul>
</div>
</div>

<div id="outline-container-close-without-action" class="outline-4">
<h4 id="close-without-action"><span class="section-number-4">1.6.3.</span> Close without action</h4>
<div class="outline-text-4" id="text-close-without-action">
<p>
It has been proposed that the following issues be closed without action.
If you think discussion is necessary, please say so.
</p>

<ul class="org-ul">
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/1371">#1371</a>: (type)switch: braces after `case` keyword</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/917">#917</a>: Better support for typed maps</li>
</ul>
</div>
</div>

<div id="outline-container-xslt-focused" class="outline-4">
<h4 id="xslt-focused"><span class="section-number-4">1.6.4.</span> XSLT focused</h4>
<div class="outline-text-4" id="text-xslt-focused">
<p>
The following PRs appear to be candidates for a future XSLT-focused
meeting.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1402">#1402</a>: Update schema for XSLT 4.0 to include agreed syntax changes</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1386">#1386</a>: 1382 add error code XTSE4040</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1378">#1378</a>: 1375 - bugs in pattern syntax</li>
</ul>
</div>
</div>

<div id="outline-container-substantive" class="outline-4">
<h4 id="substantive"><span class="section-number-4">1.6.5.</span> Substantive PRs</h4>
<div class="outline-text-4" id="text-substantive">
<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1409">#1409</a>: 1401 Rewrite of F+O section 20, Casting</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1393">#1393</a>: 1391 Change function-annotations to return a sequence</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1388">#1388</a>: Attempt to resolve #1387 by clarifying the encoding rules</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1384">#1384</a>: 1316 Type declarations in quantified expressions</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1367">#1367</a>: 1321 leading lone slash</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1364">#1364</a>: Change to type() syntax to fix ambiguity</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1361">#1361</a>: 1337 Atomic value becomes atomic item</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1360">#1360</a>: 1348 Some grammar simplifications</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1358">#1358</a>: 959 fn:unix-time</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1355">#1355</a>: 1351 Add "declare record" in XQuery</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1344">#1344</a>: 1343 Drop the static typing feature</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1296">#1296</a>: 982 Rewrite of scan-left and scan-right</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1283">#1283</a>: 77b: Update expressions</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1228">#1228</a>: – Adding the BLAKE3 hashing algorithm to fn:hash</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1209">#1209</a>: 1183 Add transient mode and the transient{} expression</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1185">#1185</a>: 1179 array:values, map:values → array:get, map:get</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-832">#832</a>: 77 Lookup returning path selection</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">2.</span> Technical agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
<p>
The goal with respect to PRs this week is to close as many as we can. To that
end, I’ve tried to arrange them such that the “easy” ones are at the top. If we
discover that one of them isn’t easy, we’ll can move it to the bottom of the
list move on until we’ve done all the easy ones we have time for.
</p>
</div>

<div id="outline-container-where-are-we" class="outline-3">
<h3 id="where-are-we"><span class="section-number-3">2.1.</span> Where are we?</h3>
<div class="outline-text-3" id="text-where-are-we">
<ul class="org-ul">
<li>MK: Michael Sperberg-McQueen made enormous contributions over the years to
XSLT and XML in general. He will be sorely missed.</li>
<li>NW: Indeed.</li>
<li>RD: Should we add a dedication to the specs?</li>
<li>NW: I think that’s a good idea.</li>
<li>JWL: Same thing.</li>
</ul>

<p>
ACTION QT4CG-088-01: Consider how best to add a dedication to MSM.
</p>

<p>
One measure of this question is the list of open “required-for-4.0” issues. But
perhaps we should take a broader perspective.
</p>

<ul class="org-ul">
<li>JWL: My interests are mostly in XPath and XSLT and I’ve got a sense that the
XSLT has sort of been pushed to the side. There are three or four major
changes. But there’s a sense that some of the short cutting and other features
haven’t been considered in detail in XSLT.
<ul class="org-ul">
<li>Things like the pipeline construct which is similar to the arrow constructs in XPath.</li>
<li>Do we need more, are we missing anything obvious?</li>
</ul></li>
<li>RD: I’m happy to dedicate more time to XSLT. What is the remit of XSLT. As I
understand it, XSLT is an alternate XML-style syntax to what you can do XPath
and XQuery.</li>
</ul>

<p>
(Several members of the group express that that’s not a good summary)
</p>

<ul class="org-ul">
<li>MK: There is a lot of overlap.</li>
<li>RD: When we’re looking at new functionality to add to XSLT, what criteria do
we apply. When we talk about features in XPath/XQuery, should we also talk
about XSLT?
<ul class="org-ul">
<li>For example, declaring the type of a variable.</li>
</ul></li>
<li>MK: My perspective is that we’ve done most of the things that I thought were
important. Perhaps not yet completely and adequately yet. We have ways of
creating maps and arrays. We’ve cleaned up some things. We’ve handled
functions, keyword arguments, and variadic functions. We’ve done some work on
modes. There’s a little more to be done there, particularly in template rules
applied to maps and arrays.
<ul class="org-ul">
<li>By and large I think we’ve done the big things.</li>
</ul></li>
<li>JK: I think we could probably find a way forward if we just schedule one
monthly meeting for XSLT.</li>
<li>MK: I think it has to be driven by what’s on the agenda. What drives the group
are concrete proposals on the table that need to be discussed.</li>
<li>WP: I think we have a scoping question. I need to be updated about what’s on
the table. Maybe it would be useful to have a status check, and a window to
discuss new features.</li>
<li>NW: I think that’s what issues and PRs are for.</li>
<li>RD: I wonder if it would make sense to aim for having one XSLT issue to review
and discuss in each meeting. Rather than having a specific meeting.
<ul class="org-ul">
<li>Should we also discuss if XSLT changes are needed whenever we discuss a new
feature.</li>
</ul></li>
<li>NW: I’ll try to organize the agendas to make XSLT feature more prominently.</li>
<li>DN: Not specifically about XSLT, this is about status and progress more generally.
<ul class="org-ul">
<li>From a purely project management aspect, I think we can improve quite a bit.
I’d propose that if we really want to give to the users the next version of
the X* languages in the next few years, we can each select the top three
issues and the draw a line under it.
<ul class="org-ul">
<li>I think generators, fold lazy, and collections would be the top of my list.</li>
</ul></li>
<li>We can make a critical path, then work until we shorten it.</li>
<li>I have the feeling that we focused on the low-hanging fruit, but there are
larger, strategic issues. We shouldn’t forget about those.</li>
<li>Maybe we should periodically have meetings focused on the longer term,
strategic goals.</li>
</ul></li>
<li>JWL: How much of what we’re doing is actually being implemented? That’s one
way you find out if these things work. I’m trying to do that kind of work myself.</li>
<li>MK: I feel like I’m up-to-speed in working out what’s implementable. A few
things I’m struggling to implement, but that’s because of the constraints of
the architecture of an existing product and so on. Perhaps slightly less than
I’d like in terms of understanding the benefits of using particular features.
But probably enough to feel reasonably comfortable that things work together
as a whole. There are issues. We know we have duplication and multiple
solutions in some places. It’s always harder to get rid of things.</li>
<li>CG: We’ve started with the features that are most interesting to us. We’ve
already implemented some of the features. Regarding the other features: I
tried to give feedback as early as possible when I have the impression that
something is easy or hard to implement. But we try to do proof-of-concept
implementations as quickly as we can. To avoid things being too specific to a
single implementation, for example. The more complicated features tend to be
more comprehensively specified.</li>
<li>JLO: Even though in eXist DB we don’t have a good track record with XPath 4.0,
I think we’re still doing completeness for 3.1, I do look at those features
through the eye of “is that even possible” and give feedback. It’s more a
matter of time and budget.
<ul class="org-ul">
<li>I would like to circle back to something that DN said, that we should
identify the critical path, and focus on that. I thought that’s what we did
in Prague when we marked the “required for 4.0” issues.</li>
<li>It would be good to have half an hour ever few weeks to talk about the
broader issues. I’d like to have a collection subtype, for example, but I
can see how that might be too difficult.</li>
</ul></li>
</ul>

<p>
There are a lot of good ideas in there. NW will try to do better on the agendas
and organizationally.
</p>

<ul class="org-ul">
<li>DN: The “we” in Prague was not “we” as a whole.</li>
<li>MK: Yes, but there are things you can accomplish at f2f meetings that are hard
to accomplish on weekly phone calls.</li>
</ul>
</div>
</div>

<div id="outline-container-pr-1409" class="outline-3">
<h3 id="pr-1409"><span class="section-number-3">2.2.</span> PR #1409: 1401 Rewrite of F+O section 20, Casting</h3>
<div class="outline-text-3" id="text-pr-1409">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1409">#1409</a>
</p>

<p>
MK observes that the summary in PR #1409 outlines the changes that were made. It
turned out a bit wider than originally expected. From the PR:
</p>

<blockquote>
<p>

</p>

<p>
The main changes are:
</p>

<ul class="org-ul">
<li>The three derived types xs:integer, xs:dayTimeDuration, and xs:yearMonthDuration are no longer treated as primitive for the purpose of this section. They are now treated as derived types, but given special status where necessary as "quasi-primitive".</li>
<li>In places where the F+O rules give the same result as the canonical representation in XSD 1.1, we now defer to XSD 1.1 rather than replicating the rules. Many of the rules originate with XPath 2.0, which was published before XSD 1.1, but which anticipated some of the changes in XSD 1.1, for example the use of a seven-component model for dates/times, and a two-component model for durations. XPath 3.0/3.1 failed to take advantage of the resulting opportunity for rationalisation.</li>
<li>Generally the language is a bit less terse, with more notes and examples</li>
<li>The rules have more to say about the type annotation of the result. In some places the spec appeared to imply that the type annotation on the result must be the target type; in others it appeared to imply that the type annotation must be unchanged from the source (for example 19.1.1 "If ST is xs:string or a type derived from xs:string, TV is SV. [presumably with unchanged type annotation]). The spec is now hopefully clearer that the result TV MUST be an instance of TT and MAY be an instance of some other type derived from TT, especially in the case where the value is unchanged.</li>
</ul>
</blockquote>

<p>
Discussion continues:
</p>

<ul class="org-ul">
<li>RD: I wonder if this is the right approach. With things like integer vs
decimal, they are two different things. An integer is a subset of decimal, but
they’re effectively two distinct types.</li>
<li>MK: They are in some respects, but they aren’t in others.
<ul class="org-ul">
<li>What this reorganization attempts to do is make it possible for them to
follow the general rules for derived types.</li>
<li>The special rules are mainly that downcasting behaves differently.</li>
</ul></li>
<li>MK: None of this changes the rules, only the presentation.</li>
<li>RD: Are they called primitive types in XML Schema?</li>
<li>MK: Yes. But XSD muddies the waters by using the words “type” and “data type”
interchangably.
<ul class="org-ul">
<li>Some of the discrepancies appear to arise from places where we wrote the
prose before XSD 1.1 existed.</li>
<li>Generally, try to use the XSD 1.1 definitions.</li>
</ul></li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-1393" class="outline-3">
<h3 id="pr-1393"><span class="section-number-3">2.3.</span> PR #1393: 1391 Change function-annotations to return a sequence</h3>
<div class="outline-text-3" id="text-pr-1393">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1393">#1393</a>
</p>

<ul class="org-ul">
<li>MK: This one is a little more complex. I’ve tried to incorporate the corrections suggested.
<ul class="org-ul">
<li>We no longer return a map because you can have two annotations with the same name.
<ul class="org-ul">
<li>RestXQ does this, apparently</li>
</ul></li>
<li>We now return a list of key/value pairs.</li>
</ul></li>
<li>CG: Would it make sense to make the pair record a built-in type?
<ul class="org-ul">
<li>It’s used in several places.</li>
</ul></li>
<li>MK: Having built-in, named record types does have some attraction. I think
it’s an orthogonal issue, but it’s one that this raise.</li>
</ul>

<p>
ACTION QT4CG-088-02: CG to add an issue about built-in, named record types.
</p>

<ul class="org-ul">
<li>JWL: It would be nice to have an example that returned a duplicate.</li>
<li>MK: Yes.</li>
</ul>

<p>
ACTION QT4CG-088-03: MK to add an example of duplicate function-annotations being returned.
</p>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-1384" class="outline-3">
<h3 id="pr-1384"><span class="section-number-3">2.4.</span> PR #1384: 1316 Type declarations in quantified expressions</h3>
<div class="outline-text-3" id="text-pr-1384">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1384">#1384</a>
</p>

<ul class="org-ul">
<li>MK: This is one of those rounding-off-for-completness things.
<ul class="org-ul">
<li>This brings things in to better alignment.</li>
<li>I can’t really imagine anyone using it, but for orthogonality and
completeness we should provide it.</li>
</ul></li>
</ul>

<p>
MK summarizes the changes in the diff.
</p>

<ul class="org-ul">
<li>DN: Are there any examples?</li>
<li>MK: Yes, there are examples that use the syntax. It’s hard to motivate.</li>
<li>JLO: What happens when a satisfies fails?</li>
<li>MK: It may return true or raise a type error, the “cat” example is
demonstrating that you don’t need to evaluate the whole sequence.</li>
<li>DN: Related to JLO’s question. What will happen if a conversion will happen.
What if the current item isn’t exactly the right type.</li>
<li>MK: It’s atomized and coercion applies.</li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-1344" class="outline-3">
<h3 id="pr-1344"><span class="section-number-3">2.5.</span> PR #1344: 1343 Drop the static typing feature</h3>
<div class="outline-text-3" id="text-pr-1344">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1344">#1344</a>
</p>

<ul class="org-ul">
<li>MK: This is motivated by the fact that I don’t think any actively developed
implementations are using the static typing feature. It was implemented by
some teams in the 1.0 days, but the general feedback is that the feature is
fairly unusable.
<ul class="org-ul">
<li>It was already “semi-dropped” from the spec because we no longer said
exactly what static typing rules must be applied.</li>
</ul></li>
</ul>

<p>
MK summarizes the changes in the proposal.
</p>

<p>
ACTION QT4CG-088-04: ?? the processing model diagram needs to be update
</p>

<ul class="org-ul">
<li>DN: Will this change cause backwards compatibility problems?</li>
<li>MK: It’s a bit like the situation with XQuery Update. We haven’t defined a way
forward for that, we’ve left it behind. 
<ul class="org-ul">
<li>We haven’t defined a way forward for processors that have implemented the feature.</li>
</ul></li>
<li>DN: Can a process continue to support an obsolete feature?</li>
<li>MK: If they continue to support it, it would be in a mode outside the scope of the specification.</li>
<li>DN: But not backwards incompatible?</li>
<li>MK: If a query wants to conform to the 4.0 spec and run with any 4.0
processor, it can’t depend on static typing.</li>
<li>DN: So a processor could raise errors if it was using this feature.</li>
<li>RD: My understanding with static typing is that if a processor can determine
statically that a given expression will return an error, then that processor
may flag that error at static type, rather than waiting until it’s evaluated dynamically.
<ul class="org-ul">
<li>In effect, a processor that implements static typing should still be conformant.</li>
</ul></li>
<li>MK: No, that’s not the way it works. The old static typing feature was
pessimistic: it had to report an error if there was any possibility of an
error at runtime.</li>
</ul>

<p>
Some further discussion of when and how a processor might raise a static error.
You can always raise an error if you <b>know</b> it will fail, but you don’t have to
report an error if it <b>could</b> fail.
</p>

<ul class="org-ul">
<li>DN: MK has shown us and we agree that pessimistic static typing has failed to
do what it was expected to do. We’re removing it in version 4.0. Will it not
be a good thing to also declare this as an error and put it in the errata for
the previous versions.</li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-1367" class="outline-3">
<h3 id="pr-1367"><span class="section-number-3">2.6.</span> PR #1367: 1321 leading lone slash</h3>
<div class="outline-text-3" id="text-pr-1367">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1367">#1367</a>
</p>

<ul class="org-ul">
<li>MK: This is unfinished business. I discovered that changes I’d made to the
definition of tokenization should have caused changes here that we failed to
make.</li>
</ul>

<p>
MK summarizes the changes in the PR.
</p>

<ul class="org-ul">
<li>MK: The most convoluted clarification is what happens if “/” is followed by a
“[“. If you’re looking for a token, you might see that the next thing is an
element constructor, you don’t back track if it isn’t. We say clearly when we
make that identification.
<ul class="org-ul">
<li>That effects the detail of when a leading slash is ambiguous and how we
resolve it.</li>
<li>I used a query to make the start of a relative path expression clearer.</li>
</ul></li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-1361" class="outline-3">
<h3 id="pr-1361"><span class="section-number-3">2.7.</span> PR #1361: 1337 Atomic value becomes atomic item</h3>
<div class="outline-text-3" id="text-pr-1361">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1361">#1361</a>
</p>

<p>
MK observes that there are thousands of changes in this diff. I looked at each
example, I didn’t do a global search and replace. It didn’t have any impact in
the areas that I was concerned about. It’s a change that doesn’t effect the
substance of the language.
</p>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-1360" class="outline-3">
<h3 id="pr-1360"><span class="section-number-3">2.8.</span> PR #1360: 1348 Some grammar simplifications</h3>
<div class="outline-text-3" id="text-pr-1360">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1360">#1360</a>
</p>

<p>
Leave this for next week. There’s no diff.
</p>
</div>
</div>

<div id="outline-container-pr-1358" class="outline-3">
<h3 id="pr-1358"><span class="section-number-3">2.9.</span> PR #1358: 959 fn:unix-time</h3>
<div class="outline-text-3" id="text-pr-1358">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1358">#1358</a>
</p>

<p>
CG introduces the PR.
</p>

<ul class="org-ul">
<li>CG: It’s a simple function that converts a (unix time) integer into an <code>xs:dateTime</code>.</li>
<li>DN: I think a better name would be <code>unix-dateTime</code> since it returns a <code>xs:dateTime</code>.</li>
<li>CG: The reason it’s called <code>unix-time</code> is that that was the original term.</li>
<li>JWL: Are there one too many “9”s in the third example?</li>
<li>CG: Maybe, I’ll have to check. Thanks.</li>
<li>JK: Is there a need to go in the opposite direction?</li>
<li>CG: There’s no need, it’s possible.</li>
<li>JK: If there might be a need in the future, that might have an impact on the naming.</li>
</ul>

<p>
NW muses about going the other way.
</p>

<ul class="org-ul">
<li>RD: Could we add a note about 32 bit vs. 64 bit Unix time?</li>
<li>NW: Saying what? Just observing the end of the epoch?</li>
<li>RD: I suppose the question is, should we require that implementors use 64 bit numbers.</li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-1228" class="outline-3">
<h3 id="pr-1228"><span class="section-number-3">2.10.</span> PR #1228: – Adding the BLAKE3 hashing algorithm to fn:hash</h3>
<div class="outline-text-3" id="text-pr-1228">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1228">#1228</a>
</p>

<p>
DN summarizes the changes.
</p>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>
</div>

<div id="outline-container-any-other-business" class="outline-2">
<h2 id="any-other-business"><span class="section-number-2">3.</span> Any other business</h2>
<div class="outline-text-2" id="text-any-other-business">
<ul class="org-ul">
<li>None heard</li>
</ul>
</div>
</div>

<div id="outline-container-adjourned" class="outline-2">
<h2 id="adjourned"><span class="section-number-2">4.</span> Adjourned</h2>
<div class="outline-text-2" id="text-adjourned">
</div>
</div>
</div>
</body>
</html>
