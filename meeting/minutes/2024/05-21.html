<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 078 Minutes 2024-05-21</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
<link rel="shortcut icon" href="/img/QT4-64.png" />
<link rel="apple-touch-icon" sizes="64x64" href="/img/QT4-64.png" type="image/png" />
<link rel="apple-touch-icon" sizes="76x76" href="/img/QT4-76.png" type="image/png" />
<link rel="apple-touch-icon" sizes="120x120" href="/img/QT4-120.png" type="image/png" />
<link rel="apple-touch-icon" sizes="152x152" href="/img/QT4-152.png" type="image/png" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 078 Minutes 2024-05-21</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes">Draft Minutes</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[2/8]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[8/12]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a>
<ul>
<li><a href="#so-far">1.2.1. Status so far…</a></li>
</ul>
</li>
<li><a href="#approve-minutes">1.3. Approve minutes of the previous meeting</a></li>
<li><a href="#next-meeting">1.4. Next meeting</a></li>
<li><a href="#open-actions">1.5. Review of open action items <code>[3/8]</code></a></li>
<li><a href="#open-pull-requests">1.6. Review of open pull requests and issues</a>
<ul>
<li><a href="#merge-without-discussion">1.6.1. Merge without discussion</a></li>
<li><a href="#close-without-action">1.6.2. Close without action</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#h-5AA496D5-CADD-45E4-A8AA-614624F8C215">2. XML Prague agenda preparation</a></li>
<li><a href="#technical-agenda">3. Technical Agenda</a>
<ul>
<li><a href="#pr-1117">3.1. PR #1117: 1116 Add options param to unparsed-text</a></li>
<li><a href="#h-FC21A285-E29C-474D-99A8-021A81CAE65F">3.2. PR #1197: 1192 Allow fn as abbreviation for function</a></li>
<li><a href="#h-08A874BB-C635-4661-AE68-192D905F7D9F">3.3. PR #1191: 1167, 934 deep equal merge collations param</a></li>
<li><a href="#pr-1185">3.4. PR #1185: 1179 array:values, map:values → contents</a></li>
<li><a href="#pr-1062">3.5. PR #1062/#1027/#1227: fn:ranks</a></li>
<li><a href="#pr-1228">3.6. PR #1228: Adding the BLAKE3 hashing algorithm to fn:hash</a></li>
<li><a href="#pr-1219">3.7. PR #1219: 1218 Drop use of union(A,B) syntax</a></li>
<li><a href="#pr-1217">3.8. PR #1217: 1207 Allow numeric predicates when filtering arrays</a></li>
<li><a href="#pr-1213">3.9. PR #1213: 1199 Add ellipsis markup for arguments in variadic functions</a></li>
<li><a href="#pr-1212">3.10. PR #1212: 1208 correct details of formerly-reserved function names</a></li>
<li><a href="#pr-1211">3.11. PR #1211: QT4CG-076-01 Add examples of coercions</a></li>
<li><a href="#pr-1209">3.12. PR #1209: 1183 Add transient mode and the transient{} expression</a></li>
</ul>
</li>
<li><a href="#any-other-business">4. Any other business</a></li>
<li><a href="#adjourned">5. Adjourned</a></li>
</ul>
</div>
</div>
<p>
<a href="../">Meeting index</a> / <a href="https://qt4cg.org">QT4CG.org</a> / <a href="https://qt4cg.org/dashboard">Dashboard</a> / <a href="https://github.com/qt4cg/qtspecs/issues">GH Issues</a> / <a href="https://github.com/qt4cg/qtspecs/pulls">GH Pull Requests</a>
</p>

<div id="outline-container-minutes" class="outline-2">
<h2 id="minutes">Draft Minutes</h2>
<div class="outline-text-2" id="text-minutes">
</div>
</div>

<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[2/8]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-063-06: MK to consider refactoring the declare item type syntax to something like declare record</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-071-06: NW to clarify the cases that are distinguished by the leading empty string in path segments</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-072-03: NW to clarify the round-tripping of URIs</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-077-03: MK to add a note about document order across documents</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-077-04: MK to review inconsistencies discovered in review of #1117</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-078-01: MK to make the default for normalize-newlines backwards compatible.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-078-02: MK to update the prose of <code>transient{}</code> to use the word “should”.</li>
</ul>
</div>
</div>

<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>

<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[8/12]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<p>
RD, EP gives regrets. JLY gives regrets for three weeks.
</p>

<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> Reece Dunn (RD)</li>
<li class="on"><code>[X]</code> Sasha Firsov (SF)</li>
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="off"><code>[&#xa0;]</code> Joel Kalvesmaki (JK)</li>
<li class="on"><code>[X]</code> Michael Kay (MK)</li>
<li class="on"><code>[X]</code> Juri Leino (JLO)</li>
<li class="off"><code>[&#xa0;]</code> John Lumley (JLY)</li>
<li class="on"><code>[X]</code> Dimitre Novatchev (DN)</li>
<li class="on"><code>[X]</code> Wendell Piez (WP) [:15-]</li>
<li class="off"><code>[&#xa0;]</code> Ed Porter (EP)</li>
<li class="on"><code>[X]</code> C. M. Sperberg-McQueen (MSM)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW). <i>Scribe</i>. <i>Chair</i>.</li>
</ul>
</div>
</div>

<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2024/05-21.html">the agenda</a>.
</p>

<p>
Accepted.
</p>
</div>

<div id="outline-container-so-far" class="outline-4">
<h4 id="so-far"><span class="section-number-4">1.2.1.</span> Status so far…</h4>
<div class="outline-text-4" id="text-so-far">

<div id="org584c902" class="figure">
<p><img src="./issues-open-2024-05-21.png" alt="issues-open-2024-05-21.png" />
</p>
<p><span class="figure-number">Figure 1: </span>“Burn down” chart on open issues</p>
</div>


<div id="org2183c7f" class="figure">
<p><img src="./issues-by-spec-2024-05-21.png" alt="issues-by-spec-2024-05-21.png" />
</p>
<p><span class="figure-number">Figure 2: </span>Open issues by specification</p>
</div>


<div id="org01c17b3" class="figure">
<p><img src="./issues-by-type-2024-05-21.png" alt="issues-by-type-2024-05-21.png" />
</p>
<p><span class="figure-number">Figure 3: </span>Open issues by type</p>
</div>
</div>
</div>
</div>

<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.3.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2024/05-14.html">the minutes of the previous meeting</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.4.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
The next meeting <a href="../../agenda/2024/05-28.html">is scheduled for Tuesday, 28 May 2024</a>.
</p>

<p>
MK gives regrets. JLY gives regrets for two more weeks.
</p>
</div>
</div>

<div id="outline-container-open-actions" class="outline-3">
<h3 id="open-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[3/8]</code></h3>
<div class="outline-text-3" id="text-open-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-063-06: MK to consider refactoring the declare item type syntax to something like declare record</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-071-06: NW to clarify the cases that are distinguished by the leading empty string in path segments</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-072-03: NW to clarify the round-tripping of URIs</li>
<li class="on"><code>[X]</code> QT4CG-073-01: NW to proceed with the records/options proposal and make a PR.</li>
<li class="on"><code>[X]</code> QT4CG-077-01: DN to create an issue for adding Blake-3.</li>
<li class="on"><code>[X]</code> QT4CG-077-02: JK to correct the reference to TR29.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-077-03: MK to add a note about document order across documents</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-077-04: MK to review inconsistencies discovered in review of #1117</li>
</ul>
</div>
</div>

<div id="outline-container-open-pull-requests" class="outline-3">
<h3 id="open-pull-requests"><span class="section-number-3">1.6.</span> Review of open pull requests and issues</h3>
<div class="outline-text-3" id="text-open-pull-requests">
</div>

<div id="outline-container-merge-without-discussion" class="outline-4">
<h4 id="merge-without-discussion"><span class="section-number-4">1.6.1.</span> Merge without discussion</h4>
<div class="outline-text-4" id="text-merge-without-discussion">
<p>
The following PRs are editorial, small, or otherwise appeared to be
uncontroversial when the agenda was prepared. The chairs propose that
these can be merged without discussion. If you think discussion is
necessary, please say so.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1223">#1223</a>: Minor: fixed URL</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1222">#1222</a>: 1214: hash examples</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1220">#1220</a>: 73 copy&amp;paste typo in fn:graphemes (combining diaeresis should be ZWJ)</li>
</ul>

<p>
Proposal: Merge with discussion.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-close-without-action" class="outline-4">
<h4 id="close-without-action"><span class="section-number-4">1.6.2.</span> Close without action</h4>
<div class="outline-text-4" id="text-close-without-action">
<p>
It has been proposed that the following issues be closed without action.
If you think discussion is necessary, please say so.
</p>

<ul class="org-ul">
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/652">#652</a>: Defining a common function library for XPath, XSLT, and XQuery applications</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/116">#116</a>: Clarify the fn:transform function() wrt multiple top-level elements</li>
</ul>

<p>
Proposal: Close without action.
</p>

<p>
Accepted.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-h-5AA496D5-CADD-45E4-A8AA-614624F8C215" class="outline-2">
<h2 id="h-5AA496D5-CADD-45E4-A8AA-614624F8C215"><span class="section-number-2">2.</span> XML Prague agenda preparation</h2>
<div class="outline-text-2" id="text-h-5AA496D5-CADD-45E4-A8AA-614624F8C215">
<ul class="org-ul">
<li>Reminder, who will be there?

<ul class="org-ul">
<li>MK, JLO, RD, …</li>
</ul></li>

<li>What do we want to accomplish?

<ul class="org-ul">
<li>MK: Classify open issues and make a decision about how radical we want to be
in terms of closing the ones deemed inessential
<ul class="org-ul">
<li>Must/Nice/Never!</li>
<li>What do with “nice to haves”</li>
</ul></li>
<li>MK: Second, a few issues we aren’t going to solve without talking about them
<ul class="org-ul">
<li>Nice to have a feel about whether we think we can solve those</li>
<li>Do some whiteboarding…</li>
</ul></li>
</ul></li>

<li>Scheduling?
<ul class="org-ul">
<li>We know some folks won’t be able to attend, I propose that we schedule an
hour Zoom call at the end of the day for anyone not present who wants to
discuss what we’ve decided. Perhaps scheduled at the usual time of
17:00CEST (16:00BST, 15:00GMT, 11:00EDT)?
<ul class="org-ul">
<li>If so, do we want to meet from 09:00-18:00 or 10:00-18:00 local time?</li>
</ul></li>
</ul></li>

<li>MSM: My gut feeling is that if the network will support it, it would be
probably be more convenient if everyone entered the zoom call.</li>
<li>NW: Should we start at 09:00 or 10:00?</li>
</ul>

<p>
Silence.
</p>

<ul class="org-ul">
<li>NW: Then we’ll start at 09:00!</li>
</ul>
</div>
</div>

<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">3.</span> Technical Agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
<p>
It would be nice to pick off the low-hanging fruit first in preparation for the
face-to-face. I suggest we take the issues in turn, but begin by estimating if
we believe we can close the issue in 10 minutes. If not, move on to the next.
After we’ve processed all the “easy” ones, we can loop back around to what’s
left.
</p>
</div>

<div id="outline-container-pr-1117" class="outline-3">
<h3 id="pr-1117"><span class="section-number-3">3.1.</span> PR #1117: 1116 Add options param to unparsed-text</h3>
<div class="outline-text-3" id="text-pr-1117">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1117">#1117</a>
</p>

<ul class="org-ul">
<li>MK: We have the choice of specifying an encoding or an options map.
<ul class="org-ul">
<li>… Some confusion about how that worked in unparsed-text-lines</li>
<li>… I think that’s now sorted out.</li>
</ul></li>
<li>CG: The XQuery code for unparsed-text-lines is wrong</li>
<li>MK: I think that’s now okay.</li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>

<p>
(We return to this following a question by CG)
</p>

<ul class="org-ul">
<li>CG: In 3.1, different newline characters are allowed and automatically normalized
<ul class="org-ul">
<li>… Shall we change the default to “true” so that we’re backwards compatible?</li>
</ul></li>
<li>MSM: 👍</li>
<li>MK: Thanks for spotting that.</li>
</ul>

<p>
ACTION: QT4CG-078-01: MK to make the default for normalize-newlines on unparsed-text.
</p>
</div>
</div>

<div id="outline-container-h-FC21A285-E29C-474D-99A8-021A81CAE65F" class="outline-3">
<h3 id="h-FC21A285-E29C-474D-99A8-021A81CAE65F"><span class="section-number-3">3.2.</span> PR #1197: 1192 Allow fn as abbreviation for function</h3>
<div class="outline-text-3" id="text-h-FC21A285-E29C-474D-99A8-021A81CAE65F">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1197">#1197</a>.
</p>

<ul class="org-ul">
<li>MK: We already have <code>fn</code> as an abbreviation in inline functions.
<ul class="org-ul">
<li>… This just allows it in normal function declarations.</li>
</ul></li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-h-08A874BB-C635-4661-AE68-192D905F7D9F" class="outline-3">
<h3 id="h-08A874BB-C635-4661-AE68-192D905F7D9F"><span class="section-number-3">3.3.</span> PR #1191: 1167, 934 deep equal merge collations param</h3>
<div class="outline-text-3" id="text-h-08A874BB-C635-4661-AE68-192D905F7D9F">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1191">#1191</a>.
</p>

<ul class="org-ul">
<li>MK: This is doing the same kind of thing with the options parameter</li>
</ul>

<p>
(CG projects for MK)
</p>

<ul class="org-ul">
<li>MK: Instead of a collation parameter and an options parameter, they’re combined</li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-1185" class="outline-3">
<h3 id="pr-1185"><span class="section-number-3">3.4.</span> PR #1185: 1179 array:values, map:values → contents</h3>
<div class="outline-text-3" id="text-pr-1185">
<p>
See <a href="https://qt4cg.org/dashboard/#pr-1185">PR #1185</a>.
</p>

<p>
Skipped on first triage pass.
</p>
</div>
</div>

<div id="outline-container-pr-1062" class="outline-3">
<h3 id="pr-1062"><span class="section-number-3">3.5.</span> PR #1062/#1027/#1227: fn:ranks</h3>
<div class="outline-text-3" id="text-pr-1062">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1227">#1227</a>
See PR <a href="https://qt4cg.org/dashboard/#pr-1062">#1062</a>
See PR <a href="https://qt4cg.org/dashboard/#pr-1027">#1027</a>
</p>

<p>
Skipped on first triage pass.
</p>
</div>
</div>

<div id="outline-container-pr-1228" class="outline-3">
<h3 id="pr-1228"><span class="section-number-3">3.6.</span> PR #1228: Adding the BLAKE3 hashing algorithm to fn:hash</h3>
<div class="outline-text-3" id="text-pr-1228">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1228">#1228</a>
</p>

<ul class="org-ul">
<li>MK: I have no objection, but that’s from a position of ignorance as to which
ones are important enough. It’s a judgement call.</li>
<li>WP: Not an expert on hashing algorithms, but in the context of what people are
doing is how do things get added or removed from this list.</li>
<li>NW: You can support any you want, this is about what’s in the standard.</li>
<li>CG: I have no objection, but what if there are others that could be added? Why
is this one more important?</li>
<li>JLO: As long as there decent Blake3 implementations, then I think there’s no
problem. I was hoping for HMAC, for example.</li>
<li>DN: Why this one? With this one, we have five. CRC32 and MD5 should be
uncontroversial. SHA1 and SHA256, which are known to have security exploits.
Blake3 is the only one without exploits.
<ul class="org-ul">
<li>… Finally, I think five is the perfect number. And I think we should do it.</li>
</ul></li>
<li>CG projects rurban.github.io/smhasher/doc/table.html showing that there are
many faster algorithms.</li>
<li>DN: There are implementations already in Java, C#, and Rust.</li>
<li>NW: That’s true of many, many algorithms. Adding a dependency isn’ty free.</li>
<li>CG: I would like to discuss if further.</li>
</ul>

<p>
We’ll continue discussion of this item. Please comment on the issue or in email.
</p>
</div>
</div>

<div id="outline-container-pr-1219" class="outline-3">
<h3 id="pr-1219"><span class="section-number-3">3.7.</span> PR #1219: 1218 Drop use of union(A,B) syntax</h3>
<div class="outline-text-3" id="text-pr-1219">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1219">#1219</a>
</p>

<ul class="org-ul">
<li>MK: It’s purely editorial, there are places where it still appears in examples
and it’s incorrect.</li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-1217" class="outline-3">
<h3 id="pr-1217"><span class="section-number-3">3.8.</span> PR #1217: 1207 Allow numeric predicates when filtering arrays</h3>
<div class="outline-text-3" id="text-pr-1217">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1217">#1217</a>
</p>

<ul class="org-ul">
<li>MK: I resisted this initially, but CG was persuasive.
<ul class="org-ul">
<li>… My main reservation was what do you want back for <code>[1]</code> on an array?</li>
<li>… Now that you can have multiple numbers, it makes sense to return an array.</li>
<li>… The implementation required generalizing the <code>predicate truth value</code> and
referring to it.</li>
<li>… You can also use it on maps which is probably useless, but logically
consistent.</li>
</ul></li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-1213" class="outline-3">
<h3 id="pr-1213"><span class="section-number-3">3.9.</span> PR #1213: 1199 Add ellipsis markup for arguments in variadic functions</h3>
<div class="outline-text-3" id="text-pr-1213">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1213">#1213</a>
</p>

<ul class="org-ul">
<li>MK: Displays the way the signature of a variadic function is displays.</li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-1212" class="outline-3">
<h3 id="pr-1212"><span class="section-number-3">3.10.</span> PR #1212: 1208 correct details of formerly-reserved function names</h3>
<div class="outline-text-3" id="text-pr-1212">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1212">#1212</a>
</p>

<ul class="org-ul">
<li>MK: This corrects the history and justification. It’s purely editorial.</li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-1211" class="outline-3">
<h3 id="pr-1211"><span class="section-number-3">3.11.</span> PR #1211: QT4CG-076-01 Add examples of coercions</h3>
<div class="outline-text-3" id="text-pr-1211">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1211">#1211</a>
</p>

<ul class="org-ul">
<li>MK: This just adds some examples.</li>
<li>CG: I noticed some issues in union and choice types, but they’ve been corrected.</li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-1209" class="outline-3">
<h3 id="pr-1209"><span class="section-number-3">3.12.</span> PR #1209: 1183 Add transient mode and the transient{} expression</h3>
<div class="outline-text-3" id="text-pr-1209">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1209">#1209</a>
</p>

<ul class="org-ul">
<li>MK: I’ve tried to remove all the controversy from the discussion.
<ul class="org-ul">
<li>… This adds a new expression, <code>transient {}</code> which sets the static context to transient mode.</li>
<li>… This relaxes the implementation requirements for functions like
<code>current-dateTime</code>, <code>doc</code>, etc. so that they are not required to be stable.</li>
<li>… No obligation on the implementation to do anything different, but it is
allowed to relax the requirement to deliver the same results every time.</li>
<li>… There’s a recommendation about functions that might particularly benefit
from this treatment.</li>
<li>… This is basically implementation-defined territory.</li>
</ul></li>
<li>DN: I’m wondering who would use this and why if implementations are not
required to return different results every time? If users can’t know what will
happen, why should they use it?</li>
<li>MK: If you take the collection function, an implementation of the function
that access the filestore, the requirement to make the collection stable is
quite expensive.
<ul class="org-ul">
<li>… People are currently using proprietary extensions to say they want
versions of the function that doesn’t incur the overhead.</li>
<li>… This provides a declarative way to address that common use case.</li>
<li>… Users might do this if they know their implementations will use it.</li>
</ul></li>
<li>DN: My concern is that if this not an obligation on implementations to change
their behavior, they won’t change it.</li>
<li>MK: That’s a valid concern given that the <code>unordered</code> expression is very
rarely used. Most users want results ordered most of the time.
<ul class="org-ul">
<li>… You can’t force an implementation to return different results.</li>
<li>… We can’t formally model changes in the external environment.</li>
</ul></li>
</ul>

<p>
Some discussion of what it means to observe the external. Some discussion of
whether we should use the word “should”.
</p>

<ul class="org-ul">
<li>NW: I think you underestimate how responsive implementors are to customers.</li>
<li>JLO: I think <code>fn:random-number-generator</code> could be added to this list. That
would make it more approachable by just returning a different value each time
it’s called.
<ul class="org-ul">
<li>… I’m also wondering if it’s implementation-defined that a function like
<code>current-dateTime</code> must return different values. It could be really
problematic if an implementation returns the same value.</li>
</ul></li>
<li>MK: It’s just hard to predict the outside world, you can’t for example,
determine whether or not caching will happen in the network.</li>
<li>MSM: I wanted to say on the issue of encouraged-but-not-required-to versus
should, “should” has a defined meaning in conformance. I think that would be a
better choice here. And consistency helps readers.</li>
<li>MK: Okay.</li>
<li>WP: I think I agree with that. It’s a question of whether this should be in
the specification or should be implementation behavior. It looks like a useful
thing to have a standard way to say.</li>
</ul>

<p>
ACTION: QT4CG-078-02: MK to update the prose to use the word “should”.
</p>

<ul class="org-ul">
<li>CG: My concerns are similar to DN’s. I have some doubt that implementors will
do sufficiently consistent things. Maybe we could try to make it a little
clearer what changes should be expected. For time measurements we already have
another issue about that.
<ul class="org-ul">
<li>… One example is file append. That function is identified as
non-deterministic so I wouldn’t expect <code>transient{}</code> to change anything.</li>
</ul></li>
<li>MK: There’s no determinism required by the specification for file append.</li>
</ul>

<p>
Some discussion of when an implementation might “know” that a function was
nondeterministic. (Annotations or other API choices, perhaps.)
</p>

<ul class="org-ul">
<li>CG: I’m not sure who would find this advantageous.
<ul class="org-ul">
<li>… What happens when a function is invoked through a function pointer, etc.</li>
</ul></li>
<li>MK: I’ve made it part of the static context. That would make it part of the
context when the function is created, not invoked.</li>
</ul>

<p>
We’ll continue discussion of this item. Please comment on the PR or in email.
</p>
</div>
</div>
</div>

<div id="outline-container-any-other-business" class="outline-2">
<h2 id="any-other-business"><span class="section-number-2">4.</span> Any other business</h2>
<div class="outline-text-2" id="text-any-other-business">
<ul class="org-ul">
<li>NW: Shall I merge my PR for record descriptions?</li>
</ul>

<p>
Some discussion. General agreement that I should.
</p>

<ul class="org-ul">
<li>DN: Do we have a final description of the record type and all it’s features?
<ul class="org-ul">
<li>… I’d like to rewrite a couple of features using record types, but are they ready?</li>
<li>… And are there any implementations that support records?</li>
</ul></li>
<li>MK: Records are pretty stable in the specification except possibly for edge
cases involving recursive record types.
<ul class="org-ul">
<li>… There’s been a stable implementation Saxon for a while</li>
</ul></li>
<li>MK: On the public 12.x branch, we’ve stopped adding 4.0 features. We’re doing
the work on the 13 branch which isn’t publicly available.</li>
</ul>
</div>
</div>

<div id="outline-container-adjourned" class="outline-2">
<h2 id="adjourned"><span class="section-number-2">5.</span> Adjourned</h2>
<div class="outline-text-2" id="text-adjourned">
</div>
</div>
</div>
</body>
</html>
