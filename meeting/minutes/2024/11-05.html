<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 097 Minutes 2024-11-05</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
<link rel="shortcut icon" href="/img/QT4-64.png" />
<link rel="apple-touch-icon" sizes="64x64" href="/img/QT4-64.png" type="image/png" />
<link rel="apple-touch-icon" sizes="76x76" href="/img/QT4-76.png" type="image/png" />
<link rel="apple-touch-icon" sizes="120x120" href="/img/QT4-120.png" type="image/png" />
<link rel="apple-touch-icon" sizes="152x152" href="/img/QT4-152.png" type="image/png" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 097 Minutes 2024-11-05</h1>
<p>
<a href="../">Meeting index</a> / <a href="https://qt4cg.org">QT4CG.org</a> / <a href="https://qt4cg.org/dashboard">Dashboard</a> / <a href="https://github.com/qt4cg/qtspecs/issues">GH Issues</a> / <a href="https://github.com/qt4cg/qtspecs/pulls">GH Pull Requests</a>
</p>

<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes">Draft Minutes</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[1/7]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[12/12]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a>
<ul>
<li><a href="#so-far">1.2.1. Status so far…</a></li>
</ul>
</li>
<li><a href="#approve-minutes">1.3. Approve minutes of the previous meeting</a></li>
<li><a href="#next-meeting">1.4. Next meeting</a></li>
<li><a href="#open-actions">1.5. Review of open action items <code>[2/7]</code></a></li>
<li><a href="#open-pull-requests">1.6. Review of open pull requests and issues</a>
<ul>
<li><a href="#blocked">1.6.1. Blocked</a></li>
<li><a href="#merge-without-discussion">1.6.2. Merge without discussion</a></li>
<li><a href="#substantive">1.6.3. Substantive PRs</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#technical-agenda">2. Technical agenda</a>
<ul>
<li><a href="#pr-1523">2.1. PR #1523: 148 New functions to get type information</a></li>
<li><a href="#pr-1547">2.2. PR #1547: 1542 Add "formal" definitions of non-primitive axes</a></li>
<li><a href="#pr-1545">2.3. PR #1545: 1539 New civil-timezone function</a></li>
</ul>
</li>
<li><a href="#any-other-business">3. Any other business</a></li>
<li><a href="#adjourned">4. Adjourned</a></li>
</ul>
</div>
</div>

<div id="outline-container-minutes" class="outline-2">
<h2 id="minutes">Draft Minutes</h2>
<div class="outline-text-2" id="text-minutes">
</div>
</div>

<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[1/7]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<p>
XXX
</p>
</div>
</div>

<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>

<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[12/12]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<ul class="org-ul">
<li class="on"><code>[X]</code> David J Birnbaum (DB)</li>
<li class="on"><code>[X]</code> Reece Dunn (RD)</li>
<li class="on"><code>[X]</code> Sasha Firsov (SF)</li>
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="on"><code>[X]</code> Joel Kalvesmaki (JK)</li>
<li class="on"><code>[X]</code> Michael Kay (MK)</li>
<li class="on"><code>[X]</code> Juri Leino (JLO)</li>
<li class="on"><code>[X]</code> John Lumley (JWL)</li>
<li class="on"><code>[X]</code> Dimitre Novatchev (DN)</li>
<li class="on"><code>[X]</code> Wendell Piez (WP)</li>
<li class="on"><code>[X]</code> Ed Porter (EP)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW). <i>Scribe</i>. <i>Chair</i>.</li>
</ul>
</div>
</div>

<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2024/11-05.html">the agenda</a>.
</p>

<p>
Accepted.
</p>
</div>

<div id="outline-container-so-far" class="outline-4">
<h4 id="so-far"><span class="section-number-4">1.2.1.</span> Status so far…</h4>
<div class="outline-text-4" id="text-so-far">
<p>
These charts have been adjusted so they reflect the preceding six months of work.
</p>


<div id="org716ab3d" class="figure">
<p><img src="./issues-open-2024-11-05.png" alt="issues-open-2024-11-05.png" />
</p>
<p><span class="figure-number">Figure 1: </span>“Burn down” chart on open issues</p>
</div>


<div id="org6c3e04d" class="figure">
<p><img src="./issues-by-spec-2024-11-05.png" alt="issues-by-spec-2024-11-05.png" />
</p>
<p><span class="figure-number">Figure 2: </span>Open issues by specification</p>
</div>


<div id="org5821c43" class="figure">
<p><img src="./issues-by-type-2024-11-05.png" alt="issues-by-type-2024-11-05.png" />
</p>
<p><span class="figure-number">Figure 3: </span>Open issues by type</p>
</div>
</div>
</div>
</div>

<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.3.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2024/10-29.html">the minutes of the previous meeting</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.4.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
This next meeting is planned for 12 November. Any regrets?
</p>

<p>
DN gives regrets.
</p>
</div>
</div>

<div id="outline-container-open-actions" class="outline-3">
<h3 id="open-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[2/7]</code></h3>
<div class="outline-text-3" id="text-open-actions">
<p>
(Items marked [X] are believed to have been closed via email before
this agenda was posted.)
</p>

<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-080-07: NW to update the build instructions in the README</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-082-02: DN to work with MK to come to agreement on the fn:ranks proposal</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-088-01: NW to consider how best to add a dedication to MSM.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-088-04: [Someone] needs to update the processing model diagram needs vis-a-vis the static typing feature</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-089-01: CG to draft a PR that attempts to resolve the operators described in #755 to a smaller number of orthogonal choices.</li>
<li class="on"><code>[X]</code> QT4CG-096-01: MK to add a note to the Terminology section about ++ and **</li>
<li class="on"><code>[X]</code> QT4CG-096-02: NW to create an issue about the indentation parameters.
<ul class="org-ul">
<li><a href="https://github.com/qt4cg/qtspecs/issues/1548">#1548</a></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-open-pull-requests" class="outline-3">
<h3 id="open-pull-requests"><span class="section-number-3">1.6.</span> Review of open pull requests and issues</h3>
<div class="outline-text-3" id="text-open-pull-requests">
</div>

<div id="outline-container-blocked" class="outline-4">
<h4 id="blocked"><span class="section-number-4">1.6.1.</span> Blocked</h4>
<div class="outline-text-4" id="text-blocked">
<p>
The following PRs are open but have merge conflicts or comments which
suggest they aren’t ready for action.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1505">#1505</a>: 1503 Add err:map, err:stack-trace, err:additional to XSLT
<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1505">#1505</a>: 1503 Add err:map, err:stack-trace, err:additional to XSLT</li>
</ul></li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1454">#1454</a>: 1449 Relax rules on multiple xsl:includes</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1296">#1296</a>: 982 Rewrite of scan-left and scan-right</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1283">#1283</a>: 77b Update expressions</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1062">#1062</a>: 150bis revised proposal for fn:ranks</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-529">#529</a>: 528 fn:elements-to-maps</li>
</ul>
</div>
</div>

<div id="outline-container-merge-without-discussion" class="outline-4">
<h4 id="merge-without-discussion"><span class="section-number-4">1.6.2.</span> Merge without discussion</h4>
<div class="outline-text-4" id="text-merge-without-discussion">
<p>
The following PRs are editorial, small, or otherwise appeared to be
uncontroversial when the agenda was prepared. The chairs propose that
these can be merged without discussion. If you think discussion is
necessary, please say so.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1541">#1541</a>: QT4CG-096-1 Add notes explaining EBNF notation</li>
</ul>

<p>
Proposal: accept this PR without discussion.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-substantive" class="outline-4">
<h4 id="substantive"><span class="section-number-4">1.6.3.</span> Substantive PRs</h4>
<div class="outline-text-4" id="text-substantive">
<p>
The following substantive PRs were open when this agenda was prepared.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1547">#1547</a>: 1542 Add "formal" definitions of non-primitive axes</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1546">#1546</a>: 1538 Add XSLT support for json-lines</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1545">#1545</a>: 1539 New civil-timezone function</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1544">#1544</a>: Allow (some) self-references in global variables</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1543">#1543</a>: Drop fn:element-number</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1541">#1541</a>: QT4CG-096-1 Add notes explaining EBNF notation</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1535">#1535</a>: 1478 Drop variadic functions</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1523">#1523</a>: 148 New functions to get type information</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1470">#1470</a>: 689 fn:stack-trace: replace with $err:stack-trace</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1454">#1454</a>: 1449 Relax rules on multiple xsl:includes</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">2.</span> Technical agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
</div>

<div id="outline-container-pr-1523" class="outline-3">
<h3 id="pr-1523"><span class="section-number-3">2.1.</span> PR #1523: 148 New functions to get type information</h3>
<div class="outline-text-3" id="text-pr-1523">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1523">#1523</a>.
</p>

<ul class="org-ul">
<li>MK: We ran out of time last week, but I don’t think anything has changed.</li>
</ul>

<p>
(We’ll do a quick skim to catch up.)
</p>

<ul class="org-ul">
<li>MK: They’re all new functions: <code>fn:node-kind</code>. It’s defined in terms of node tests.
<ul class="org-ul">
<li>Should be defined in terms of the Data Model accessor function.</li>
<li>Section 19, Functions on Types, is a new section</li>
</ul></li>
</ul>

<p>
MK summarizes <code>schema-type-record</code> and the introduction to Section 19.
</p>

<ul class="org-ul">
<li>JL: Given that these are functions, does it make sense to call out why?</li>
</ul>

<p>
ACTION QT4CG-097-01: MK to add a note explaining why base-type and friends are functions in the <code>schema-type-record</code>
</p>

<ul class="org-ul">
<li>MK: I’m assuming that readers are familiar with the XSD schema component model.</li>

<li>RD: For the XSD properties, would it make sense to put a link to them in the XSD spec?</li>
</ul>

<p>
ACTION QT4CG-097-02: MK to make the XSD schema component references into links to XSD
</p>

<ul class="org-ul">
<li>MK: The <code>validate</code> function returns the annotated type, <code>valid</code> just indicates if it’s valid or not.</li>
</ul>

<p>
Three new function use the <code>schema-type-record</code>
</p>

<ul class="org-ul">
<li>MK: <code>fn:schema-type</code>, finds an in-scope schema type if there is one;
<code>fn:atomic-type-annotation</code>, returns annotations for the atomic type. Don’t
use it as a substitute for <code>instance of</code>. ~fn:node-type-annotation does the
same thing for nodes. If you’re not schema aware, the type annotations will be
any type.</li>

<li>CG: In the last example are incomplete, you need to add a <code>?</code> and <code>name</code>. In
general, it might be good to show the full result for at least one example.</li>

<li>JL: Would you use <code>atomic-type-annotation</code> and <code>matches</code> to see if two items
were the same type?</li>

<li>MK: You could just compare the name properties of the name properties.
Assuming they aren’t anonymous. Anonymous types are tricky, XSD is a bit vague
about what it means for two types to be the same.</li>

<li>DN: It seems that these functions aren’t applicable to function items.</li>

<li>MK: That’s correct; function items don’t have a schema type.</li>

<li>DN: It would be really useful if we had similar functions to query the types
of function items. Even if they have many types, a function that returns one
of the types would be useful.</li>

<li>MK: In a sense, it’s a separate requirement. It is something to think about.</li>

<li>DN: Yes, but it is obviously needed and useful.</li>

<li>MK: For arrays, I can imagine a function that gives you a list of all the
types of all the items with duplicates removed.</li>

<li>DN: Some of these functions only apply to atomic items, but it may be
confusing to users to remember all of this. Perhaps it would be better to have
a function like “simple-item-validation” so that the name of the function
gives a hint about what it applies to.</li>

<li>MK: That’s why I used <code>node-type-annotation</code> and <code>atomic-type-annotation</code>.</li>
</ul>

<p>
Some further discussion of which functions were in question. Apparently <code>matches</code>.
</p>

<ul class="org-ul">
<li>DN: I think <code>atomic-type-matches</code> would be a better name.</li>

<li>CG: MK, have you considered a single type annotation function? Both flavors
seem to return the same thing.</li>

<li>MK: The problem I hit with that is that if you try to have them return
different types, you get into a problem with interchangeability. They’re
overlapping sets. There’s better interoperability this way.</li>

<li>JLO: I was also wondering why there’s no <code>type-annotation</code> function that would
take atomic types or nodes.</li>

<li>MK: The reason I went with two different functions is that actually we’ve
overloaded the term type annotation. It’s a very different property for nodes
than it is for atomic values. It has the same name, but the details are very
different.
<ul class="org-ul">
<li>… Despite the similarity of the names, I wanted to stress that they’re different.</li>
<li>… But we could go either way.</li>
</ul></li>

<li>JLO: I’d like to keep the issue open.</li>

<li>MK: I think a new issue that addresses the unfinished items is better.
<ul class="org-ul">
<li>… The reason that doesn’t work is that a lot of things like maps don’t have
a distinct type. It’s not a meaningful question.</li>
</ul></li>

<li>JLO: <code>map(*)</code> is useful to me.</li>

<li>MK: One function that does everything just doesn’t seem practical.</li>

<li>DN: The fact that maps and functions don’t have a type shouldn’t prevent us
from having a function that returns something useful.</li>

<li>MK: I agree, this doesn’t completely wipe the slate clean. It doesn’t do
everything, but it provides four useful functions that cover some of the
space.</li>

<li>CG: For users who really want to get into all of the details, those are very
useful. But perhaps a single function that returns a string representation of
the type would be useful for 99% of the users.
<ul class="org-ul">
<li>… The challenge is to provide a function that’s correct in some way.</li>
<li>… I agree with JLO that returning <code>map(*)</code> could be very useful.</li>
</ul></li>

<li>DN: I agree. A single way to represent some normalized value for the type
could be very useful. This could be used in hashing, for example.</li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-1547" class="outline-3">
<h3 id="pr-1547"><span class="section-number-3">2.2.</span> PR #1547: 1542 Add "formal" definitions of non-primitive axes</h3>
<div class="outline-text-3" id="text-pr-1547">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1547">#1547</a>.
</p>

<ul class="org-ul">
<li>MK: This one turned out to be a little larger than expected.
<ul class="org-ul">
<li>… I stared by trying to have some more formal definitions of what the axes are.</li>
<li>… The child axis was done that way, but descendant was still informal.</li>
<li>… I’ve made that more formal. And the same for descendant-or-self and so on.</li>
<li>… Then I discovered that I’d got it wrong for the sibling axes because I
didn’t cover the case of starting at an attribute or namespace node.</li>
<li>… Instead, I did it in terms of a sibling function.</li>
<li>… The other comment that was made that it doesn’t tell you anything about
the ordering of nodes on the axes.
<ul class="org-ul">
<li>… It tells you that some expressions return results in the same order.</li>
<li>… It doesn’t say anything about the order because it’s using “/” which
will put them in document order.</li>
<li>… Perhaps “!” would have been better since it would have been more explicit.</li>
<li>… But it’s not saying anything about predicates applied to the axis.</li>
<li>… Perhaps that should be more formally defined as well…</li>
<li>… We have the peculiar rule about nodes are indocument order but the
numbered predicates work the other way.</li>
</ul></li>
</ul></li>
<li>JL: Having worked on this for years, I’ve never come across an example where I
didn’t <b>think</b> the axis returned the nodes in reverse order.
<ul class="org-ul">
<li>… Might be worth a note.</li>
</ul></li>
<li>DN: It’s good to see that we have a <code>fn:siblings</code> function. But why is it a
function? Why is it not an axis? That would create the expressions uniform.</li>
<li>MK: There is a precedent for this, the <code>root()</code> function which we considered
making an axis. There was an argument that all the axes and even the word
“axis” suggests a direction of motion from the context node. That’s not true
of <code>fn:siblings</code>.</li>
<li>DN: This is rather theoretical. I agree, but it would still be better to have
an axis. It’s not a problem, we just have a new kind of axis, an “immersive”
axis.</li>
<li>MK: It’s certainly an alternative that could be adopted.</li>
<li>DB: Before you poll, I note that the axis names are singular and the function
is plural.</li>
</ul>

<p>
Straw poll: should access to the siblings of a node be available through an axis.
In favor: 6, opposed: 3.
</p>

<p>
ACTION QT4CG-097-03: DN to proposal an axis for accessing the siblings of a node.
</p>

<ul class="org-ul">
<li>CG: It’s always good to have an issue.</li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>

<ul class="org-ul">
<li>CG: The return type of the function must be node, not boolean.</li>
</ul>
</div>
</div>

<div id="outline-container-pr-1545" class="outline-3">
<h3 id="pr-1545"><span class="section-number-3">2.3.</span> PR #1545: 1539 New civil-timezone function</h3>
<div class="outline-text-3" id="text-pr-1545">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1545">#1545</a>.
</p>

<p>
MK introduces the fuction, proposed by CG and implemented by MK.
</p>

<ul class="org-ul">
<li>NW: When I read the issue and thought about the function, I was assuming the
supplied time had to be in UTC. Is that not the case? What happens?</li>
<li>MK: It just takes the implicit timezone.</li>
<li>DN: The notes should explain what happens for times not in UTC.
<ul class="org-ul">
<li>… It’s not clear to me what “conventional use” means.</li>
<li>… Specifying place as a string seems absolutely unsatisfactory.</li>
</ul></li>
<li>MK: “Conventional use” means a societal convention, not a technical spec.
Everyone in France uses UTC+01:00 in winter time is a matter of convention or
civil regulation. Sometimes that’s a matter of civil law, sometimes it’s just
a convention.</li>
<li>DN: It would be very difficult to maintain.</li>
</ul>

<p>
Some brief discussion of the IANA Timezone Database.
</p>

<ul class="org-ul">
<li>MK: That relates to the other question, these are “the Olson timezone names”.
It’s now been adopted by IANA. It’s not perfect, but it’s widely established.</li>
<li>JLO: I think it’s completely reasonable to use the IANA Timezone database.
Why is it not an enum?</li>
<li>NW: They change!</li>
<li>RD: I was going to comment on the where the names come from. Links in the chat.
<ul class="org-ul">
<li><a href="https://timezonedb.com/time-zones">https://timezonedb.com/time-zones</a></li>
<li><a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">https://en.wikipedia.org/wiki/List_of_tz_database_time_zones</a></li>
</ul></li>
<li>MK: This is not a new dependency, it’s already in format-dateTime.</li>
<li>WP: What does the function do if the place doesn’t exist.</li>
<li>MK: It raises a dynamic error.</li>
<li>DB: DN’s question made me think that some users think that users can construct their own names.
<ul class="org-ul">
<li>… What about changing the parameter name to “iana_timezone_name”.</li>
</ul></li>
<li>MK: I used <code>$place</code> because that was what <code>format-dateTime</code> used.</li>
<li>CG: What about <code>zoneId</code></li>
<li>MK: I looked in the IANA documentation to see what they call it and I didn’t
find a clear name.</li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>
</div>

<div id="outline-container-any-other-business" class="outline-2">
<h2 id="any-other-business"><span class="section-number-2">3.</span> Any other business</h2>
<div class="outline-text-2" id="text-any-other-business">
<p>
None heard.
</p>
</div>
</div>

<div id="outline-container-adjourned" class="outline-2">
<h2 id="adjourned"><span class="section-number-2">4.</span> Adjourned</h2>
<div class="outline-text-2" id="text-adjourned">
</div>
</div>
</div>
</body>
</html>
