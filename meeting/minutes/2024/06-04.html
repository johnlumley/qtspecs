<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 080 Minutes 2024-06-04</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
<link rel="shortcut icon" href="/img/QT4-64.png" />
<link rel="apple-touch-icon" sizes="64x64" href="/img/QT4-64.png" type="image/png" />
<link rel="apple-touch-icon" sizes="76x76" href="/img/QT4-76.png" type="image/png" />
<link rel="apple-touch-icon" sizes="120x120" href="/img/QT4-120.png" type="image/png" />
<link rel="apple-touch-icon" sizes="152x152" href="/img/QT4-152.png" type="image/png" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 080 Minutes 2024-06-04</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes-1">Draft Minutes (day 1 of 2)</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[0/15]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[4/12]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a></li>
<li><a href="#approve-minutes">1.3. Approve minutes of the previous meeting</a></li>
<li><a href="#next-meeting">1.4. Next meeting</a></li>
<li><a href="#open-actions">1.5. Review of open action items <code>[1/6]</code></a></li>
</ul>
</li>
<li><a href="#technical-agenda">2. Technical Agenda</a>
<ul>
<li><a href="#h-9EF69C1E-BBCD-440B-991A-BD648D96FF3F">2.1. Make the agenda</a></li>
<li><a href="#issues-1">2.2. Review the issues</a></li>
</ul>
</li>
<li><a href="#wrap-up-1">3. End-of-day wrapup</a>
<ul>
<li><a href="#roll-call-wrapup">3.1. Roll call <code>[3/3]</code></a></li>
<li><a href="#wrap-up-notes-1">3.2. Notes</a></li>
</ul>
</li>
<li><a href="#minutes-2">Draft Minutes (day 2 of 2)</a>
<ul>
<li><a href="#issues-2">Review the issues</a></li>
<li><a href="#review-prs">Review of PRs</a></li>
<li><a href="#closely-related">Closely related issues</a></li>
<li><a href="#h-872DD948-C3D3-42C0-9958-B67FD5CA55B7">Planning?</a></li>
</ul>
</li>
<li><a href="#wrap-up-2">4. End-of-day wrapup</a>
<ul>
<li><a href="#roll-call-wrapup">4.1. Roll call <code>[4/4]</code></a></li>
<li><a href="#wrap-up-notes-2">4.2. Notes</a></li>
</ul>
</li>
<li><a href="#thank-you-jirka">5. Thank our host</a></li>
<li><a href="#any-other-business">6. Any other business</a></li>
<li><a href="#adjourned">7. Adjourned</a></li>
</ul>
</div>
</div>
<p>
<a href="../">Meeting index</a> / <a href="https://qt4cg.org">QT4CG.org</a> / <a href="https://qt4cg.org/dashboard">Dashboard</a> / <a href="https://github.com/qt4cg/qtspecs/issues">GH Issues</a> / <a href="https://github.com/qt4cg/qtspecs/pulls">GH Pull Requests</a>
</p>

<div id="outline-container-minutes-1" class="outline-2">
<h2 id="minutes-1">Draft Minutes (day 1 of 2)</h2>
<div class="outline-text-2" id="text-minutes-1">
</div>
</div>

<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[0/15]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-063-06: MK to consider refactoring the declare item type syntax to something like declare record</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-077-03: MK to add a note about document order across documents</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-077-04: MK to review inconsistencies discovered in review of #1117</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-078-01: MK to make the default for normalize-newlines backwards compatible.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-079-01: WP to seek expert advice on hashing functions.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-080-01: NW to add what the DocBook stylesheets do for this function</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-080-02: NW to fix issue classification so PR #1181 isn’t misclassified as an XSLT issue</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-080-03: MK to make a separate issue for @as on xsl:value-of</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-080-04: NW to revise p:invisible-xml</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-080-05: NW to add absolute property to the parse-uri output</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-080-06: NW to investigate the cross-spec reference errors in the build</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-080-07: NW to update the build instructions in the README</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-080-08: MK to work out what happened to his next-match PR</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-080-09: MK to address comments made on PR #832</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-080-10: NW to find out if we can change the community group name</li>
</ul>
</div>
</div>

<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>

<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[4/12]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> Reece Dunn (RD)</li>
<li class="off"><code>[&#xa0;]</code> Sasha Firsov (SF)</li>
<li class="off"><code>[&#xa0;]</code> Christian Grün (CG)</li>
<li class="off"><code>[&#xa0;]</code> Joel Kalvesmaki (JK)</li>
<li class="on"><code>[X]</code> Michael Kay (MK)</li>
<li class="on"><code>[X]</code> Juri Leino (JLO)</li>
<li class="off"><code>[&#xa0;]</code> John Lumley (JLY)</li>
<li class="off"><code>[&#xa0;]</code> Dimitre Novatchev (DN)</li>
<li class="off"><code>[&#xa0;]</code> Wendell Piez (WP)</li>
<li class="on"><code>[X]</code> Ed Porter (EP)</li>
<li class="off"><code>[&#xa0;]</code> C. M. Sperberg-McQueen (MSM)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW). <i>Scribe</i>. <i>Chair</i>.</li>
</ul>
</div>
</div>

<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2024/06-04.html">the agenda</a>.
</p>

<p>
Accepted.
</p>
</div>

<div id="outline-container-so-far" class="outline-4">
<h4 id="so-far"><span class="section-number-4">1.2.1.</span> Status so far…</h4>
<div class="outline-text-4" id="text-so-far">

<div id="org36f63e8" class="figure">
<p><img src="./issues-open-2024-06-04.png" alt="issues-open-2024-06-04.png" />
</p>
<p><span class="figure-number">Figure 1: </span>“Burn down” chart on open issues</p>
</div>


<div id="org50c8f6d" class="figure">
<p><img src="./issues-by-spec-2024-06-04.png" alt="issues-by-spec-2024-06-04.png" />
</p>
<p><span class="figure-number">Figure 2: </span>Open issues by specification</p>
</div>


<div id="org92af030" class="figure">
<p><img src="./issues-by-type-2024-06-04.png" alt="issues-by-type-2024-06-04.png" />
</p>
<p><span class="figure-number">Figure 3: </span>Open issues by type</p>
</div>
</div>
</div>
</div>

<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.3.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2024/05-28.html">the minutes of the previous meeting</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.4.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
The next meeting is scheduled for tomorrow.
</p>

<p>
The meeting after that is 11 June.
</p>

<p>
EP may give regrets.
</p>
</div>
</div>

<div id="outline-container-open-actions" class="outline-3">
<h3 id="open-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[1/6]</code></h3>
<div class="outline-text-3" id="text-open-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-063-06: MK to consider refactoring the declare item type syntax to something like declare record</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-077-03: MK to add a note about document order across documents</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-077-04: MK to review inconsistencies discovered in review of #1117</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-078-01: MK to make the default for normalize-newlines backwards compatible.</li>
<li class="on"><code>[X]</code> QT4CG-078-02: MK to update the prose of <code>transient{}</code> to use the word “should”.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-079-01: WP to seek expert advice on hashing functions.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">2.</span> Technical Agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
</div>

<div id="outline-container-h-9EF69C1E-BBCD-440B-991A-BD648D96FF3F" class="outline-3">
<h3 id="h-9EF69C1E-BBCD-440B-991A-BD648D96FF3F"><span class="section-number-3">2.1.</span> Make the agenda</h3>
<div class="outline-text-3" id="text-h-9EF69C1E-BBCD-440B-991A-BD648D96FF3F">
<ul class="org-ul">
<li>Triage the open issues</li>
<li>Discuss open PRs</li>
<li>Planning</li>
</ul>
</div>
</div>

<div id="outline-container-issues-1" class="outline-3">
<h3 id="issues-1"><span class="section-number-3">2.2.</span> Review the issues</h3>
<div class="outline-text-3" id="text-issues-1">
<ul class="org-ul">
<li>NW: Triage into groups:
<ul class="org-ul">
<li>easy/hard</li>
<li>required/optional</li>
</ul></li>
</ul>

<p>
Optional = if we don’t get a PR, it doesn’t stop us from finishing
</p>

<p>
In the course of review, we found several clusters of issues. We mostly marked
those “revisit”. They appear at the end of the minutes along with any discussion
we actually had about them.
</p>
</div>

<div id="outline-container-iss-37" class="outline-4">
<h4 id="iss-37"><span class="section-number-4">2.2.1.</span> 37, support sequence, array, and map destructuring</h4>
<div class="outline-text-4" id="text-iss-37">
<ul class="org-ul">
<li>MK: The devil is in the details and there are a lot of details
<ul class="org-ul">
<li>… Including in the grammar</li>
</ul></li>
<li>JLO: I’d like to have this</li>
</ul>

<p>
Some discussion of whether this is mostly about maps.
</p>

<ul class="org-ul">
<li>MK: I’m unsure about doing this for arrays
<ul class="org-ul">
<li>… It just saves a few keystrokes</li>
</ul></li>
</ul>

<p>
Some discussion of how it would work with maps. 
</p>

<ul class="org-ul">
<li>MK: This capability is for the use case where the keys are known at compile
time.</li>
<li>JLO: We could limit it to record destructuring?</li>
<li>MK: Yes, but that’s not really a datatype
<ul class="org-ul">
<li>… You could restrict it to just keys that are NCNames or QNames…but which is
it?</li>
</ul></li>
</ul>

<p>
“Hard”/”Optional”
</p>
</div>
</div>

<div id="outline-container-iss-46" class="outline-4">
<h4 id="iss-46"><span class="section-number-4">2.2.2.</span> 46, xsl:sequence: @as #46</h4>
<div class="outline-text-4" id="text-iss-46">
<ul class="org-ul">
<li>MK: I’m torn about whether this is desirable or not</li>
</ul>

<p>
“Easy”/”Optional”
</p>
</div>
</div>

<div id="outline-container-iss-69" class="outline-4">
<h4 id="iss-69"><span class="section-number-4">2.2.3.</span> 69, fn:document, fn:function-available: default arguments #6</h4>
<div class="outline-text-4" id="text-iss-69">
<ul class="org-ul">
<li>MK: I think this is a bit out of date.
<ul class="org-ul">
<li>… Generally, I think there’s a need to reflect some of the changes we’ve
made to the standard function library to make corresponding changes for the
XSLT defined functions.</li>
</ul></li>
</ul>

<p>
There’s no conceptual difficulty, it’s just legwork.
</p>

<p>
“Optional”/”Easy”
</p>
</div>
</div>

<div id="outline-container-iss-75" class="outline-4">
<h4 id="iss-75"><span class="section-number-4">2.2.4.</span> 75, Support processing HTML 5 template element content</h4>
<div class="outline-text-4" id="text-iss-75">
<p>
We wish RD was here to explain HTML templates.
</p>

<ul class="org-ul">
<li>JLO: The content of the template element isn’t visible in the DOM. It’s used
for instantiating something</li>
</ul>

<p>
Some attempt to understand the meaning of a template element.
</p>

<ul class="org-ul">
<li>JLO: It’s used when creating new instances.</li>

<li>MK: If this is an HTML feature, users will want to be able to create them
through the HTML serialization method.
<ul class="org-ul">
<li>… If the parse-html function does something special, does it round-trip?</li>
</ul></li>
</ul>

<p>
“Revisit”
</p>
</div>
</div>

<div id="outline-container-iss-76" class="outline-4">
<h4 id="iss-76"><span class="section-number-4">2.2.5.</span> 76, non-deterministic time</h4>
<div class="outline-text-4" id="text-iss-76">
<ul class="org-ul">
<li>MK: It’s fairly easy if you just wave your hands about the implementation
<ul class="org-ul">
<li>… My anxiety is that someone is going to use it for timing things, then it
gets tied in with things like lazy evaluation.</li>
</ul></li>
<li>NW: Or have some functions that you aren’t allowed to lazily evaluate?</li>
<li>MK: The xsl:message instruction is like that, it just leaves it to
implementations to do what makes sense
<ul class="org-ul">
<li>… But at the XPath level, it’s a lot more complicated</li>
</ul></li>
<li>MK: You could do it in pure code by having a monitor function (scribe: as
shown in the comment in the issue)
<ul class="org-ul">
<li>… No, that won’t work! It would evaluate the function before it started!</li>
</ul></li>
<li>MK: The other way to do it is just with a system date-time function with a
note to implementors that it’s useful to evaluate this eagerly.</li>
</ul>
</div>
</div>

<div id="outline-container-iss-77" class="outline-4">
<h4 id="iss-77"><span class="section-number-4">2.2.6.</span> 77, Allow manipulation of maps and arrays</h4>
<div class="outline-text-4" id="text-iss-77">
<p>
PR pending.
</p>
</div>
</div>

<div id="outline-container-iss-92" class="outline-4">
<h4 id="iss-92"><span class="section-number-4">2.2.7.</span> 92, Simplify rule for attribute values on Extension Instructions used to invoke named templates</h4>
<div class="outline-text-4" id="text-iss-92">
<ul class="org-ul">
<li>MK: I don’t think I want to do this. I prefer the spec as written.
<ul class="org-ul">
<li>Extension elements generally have boolean attributes, string attributes
(usually AVTs), or expressions (typically @select).</li>
</ul></li>
</ul>

<p>
“Revisit”
</p>
</div>
</div>

<div id="outline-container-iss-105" class="outline-4">
<h4 id="iss-105"><span class="section-number-4">2.2.8.</span> 105, Maps with Infinite Number of Keys: Total Maps and Decorated maps</h4>
<div class="outline-text-4" id="text-iss-105">
<ul class="org-ul">
<li>MK: This is a hybrid of sorts between maps and functions.
<ul class="org-ul">
<li>… I think this is too difficult.</li>
</ul></li>
</ul>

<p>
“Hard”/”Optional”
</p>
</div>
</div>

<div id="outline-container-iss-106" class="outline-4">
<h4 id="iss-106"><span class="section-number-4">2.2.9.</span> 106, Decorators’ support</h4>
<div class="outline-text-4" id="text-iss-106">
<p>
One angle here is dynamic function calls taking keyword arguments that’s popped
up in several places.
</p>

<p>
After half an hour spent reviewing the proposal, the chair proposed we mark it
hard and optional.
</p>

<p>
”Hard”/“Optional”
</p>
</div>
</div>

<div id="outline-container-iss-108" class="outline-4">
<h4 id="iss-108"><span class="section-number-4">2.2.10.</span> 108, Template match using values of [tunnel] parameters</h4>
<div class="outline-text-4" id="text-iss-108">
<p>
”Hard”/“Optional”
</p>
</div>
</div>

<div id="outline-container-iss-111" class="outline-4">
<h4 id="iss-111"><span class="section-number-4">2.2.11.</span> 111, FLWOR tracing</h4>
<div class="outline-text-4" id="text-iss-111">
<p>
Close with no action.
</p>
</div>
</div>

<div id="outline-container-iss-148" class="outline-4">
<h4 id="iss-148"><span class="section-number-4">2.2.12.</span> 148, Get the type of a value</h4>
<div class="outline-text-4" id="text-iss-148">
<ul class="org-ul">
<li>JLO: The biggest problem seems to be “what is the type of a value”? Is it
integer or decimal?</li>
<li>MK: The type system is such a mess
<ul class="org-ul">
<li>But atomic values clearly have a type label. A function can return that.
<ul class="org-ul">
<li>There’s one complication, what to do if it is an anonymous type.
<ul class="org-ul">
<li>(If you evaluate against a schema with an anonymous type.)</li>
<li>One solution would be the nearest type up the hierarchy that has a name</li>
</ul></li>
</ul></li>
<li>Nodes have a well defined kind. There’s also a “content annotation”, an
element validated against a type might be a “part number”, for example.
<ul class="org-ul">
<li>We could define a function that returned “element and part number”</li>
</ul></li>
</ul></li>
</ul>

<p>
Some discussion of nodes. You might also want to get the element name.
</p>

<ul class="org-ul">
<li>MK: Not many people write schema-aware XSLT or XQuery code.
<ul class="org-ul">
<li>It’s just a pain to start with.</li>
</ul></li>
</ul>

<p>
Returning to the discussion.
</p>

<ul class="org-ul">
<li>MK: The real problem is what to do with functions, and arrays, and maps. They
don’t have an intrisic type. An empty map belongs to an infinite number of
types.</li>
<li>JLO: But an empty map is “map(*)”!</li>
<li>MK: For all maps, arrays, and functions, you could say all you get back is
that it’s one of those.</li>
<li>JLO: That would be good, but you could also look into the map or array.
<ul class="org-ul">
<li>Both BaseX and in my own hack of that function, do introspection.</li>
</ul></li>
<li>MK: I’ve no problem that it’s useful. It was defined by EXSLT for 1.0 very
quickly.
<ul class="org-ul">
<li>… There’s plenty of evidence that it’s needed, it’s just the detail.</li>
</ul></li>
<li>MK: The other question is what kind of result do you return?
<ul class="org-ul">
<li>Type, in principle, should be first class objects, but that’s a big step in
terms of the data model.</li>
</ul></li>
<li>JLO: All of the existing versions get you strings. But it could be an enum.</li>
<li>MK: I think you want it to be a structured result.</li>
<li>NW: A record with an optional qname type and an option node kind?</li>
<li>MK: Yes, I think that would be more useful than a string you have to parse.</li>
</ul>

<p>
If we limit the scope to just saying map, array, or function does that make it
easy?
</p>

<p>
“Hard”/”Optional”
</p>
</div>
</div>

<div id="outline-container-iss-150" class="outline-4">
<h4 id="iss-150"><span class="section-number-4">2.2.13.</span> 150, fn:ranks: Produce all ranks in applying a function on the items of a sequence</h4>
<div class="outline-text-4" id="text-iss-150">
<p>
PR pending.
</p>
</div>
</div>

<div id="outline-container-iss-158" class="outline-4">
<h4 id="iss-158"><span class="section-number-4">2.2.14.</span> 158, Support optional parameters on dynamic functions</h4>
<div class="outline-text-4" id="text-iss-158">
<p>
There are a bundle of things in this area that we keep coming back to by other
routes.
</p>

<ul class="org-ul">
<li>MK: We’ve done some of this in the function coercion rules.</li>
</ul>

<p>
“Revisit”
</p>
</div>
</div>

<div id="outline-container-h-CF3E116F-712D-48FF-8730-5889BF14F3F0" class="outline-4">
<h4 id="h-CF3E116F-712D-48FF-8730-5889BF14F3F0"><span class="section-number-4">2.2.15.</span> 168, XSLT Extension Instructions invoking Named Templates</h4>
<div class="outline-text-4" id="text-h-CF3E116F-712D-48FF-8730-5889BF14F3F0">
<ul class="org-ul">
<li>MK: I think we’ve made this part of the status quo, but we don’t want to lose
Jirka’s proposal for an extension.</li>
</ul>

<p>
We’ve asked Jirka to open a new issue for his extension.
</p>

<p>
Close this issue without further action.
</p>
</div>
</div>

<div id="outline-container-iss-266" class="outline-4">
<h4 id="iss-266"><span class="section-number-4">2.2.16.</span> 266 Add an option on xsl:copy-of to copy a subtree with a change of namespace</h4>
<div class="outline-text-4" id="text-iss-266">
<ul class="org-ul">
<li>MK: Back in the age of 4GLs this was called a stereotype. There’s a general
feature but it’s too complex for this use case. How do you define the
boundaries?
<ul class="org-ul">
<li>… One of the motivations for this is that copy-namespaces="no" doesn’t do
what users expect.</li>
<li>… There are all sorts of degrees of elaboration possible.</li>
</ul></li>
<li>JLO: If I wanted tei:p output as html:p what would I do?</li>
<li>MK: You’d have to write a mode with a single template rule that matches all
elements and changes the namespace.</li>
<li>NW: It’s certainly optional, do we want to keep it?</li>
<li>MK: Let’s abandon it.</li>
</ul>
</div>
</div>

<div id="outline-container-iss-269" class="outline-4">
<h4 id="iss-269"><span class="section-number-4">2.2.17.</span> 269, Function for URI relativization</h4>
<div class="outline-text-4" id="text-iss-269">
<ul class="org-ul">
<li>NW: It looks like defining the <i>behavior</i> is the tricky part.</li>
<li>MK: Nothing to do with URIs is easy!</li>
</ul>

<p>
ACTION: QT4CG-080-01: NW to add what the DocBook stylesheets do for this function
</p>

<p>
“Optional”/”Easy”
</p>
</div>
</div>

<div id="outline-container-iss-272" class="outline-4">
<h4 id="iss-272"><span class="section-number-4">2.2.18.</span> 272, Setting parameter values in xsl:use-package</h4>
<div class="outline-text-4" id="text-iss-272">
<ul class="org-ul">
<li>MK: There are a number of issues with packages introduced in 3.0.
<ul class="org-ul">
<li>… There are only a few people using them in anger, but they’re the one’s
finding issues.</li>
<li>… It would be nice to have more feedback.</li>
<li>… Certainly one issue is that packages can take parameters (particularly
static parameters). If you write a package that has a parameter that’s the
localization attributes and you then want to versions of that package in a
stylesheet with different localization attributes, there’s no way to do that.</li>
</ul></li>
</ul>

<p>
“Required”/”Hard”
</p>
</div>
</div>

<div id="outline-container-iss-285" class="outline-4">
<h4 id="iss-285"><span class="section-number-4">2.2.19.</span> 285, Stability of collections</h4>
<div class="outline-text-4" id="text-iss-285">
<p>
There are a group of issues related to transiency
</p>

<p>
“Revisit”
</p>

<p>
(We’ve come back to this issue on the afternoon of the second day).
</p>

<ul class="org-ul">
<li>JLO: CG has a point about collection and doc being different.</li>
<li>MK: Yes, except pragmatically, in our experience, people read the same
document many times but rarely read the same collection more than once.
<ul class="org-ul">
<li>… But maybe that’s not the case in other environments</li>
<li>… CG says he imagines doing collections over database and filestores
differently.</li>
</ul></li>
</ul>

<p>
Is it a database or filestore is one dimension. What’s the duration of an
execution scope is another. If an execution scope is republishing a suite of
documents, then you really don’t want be holding onto the whole collection.
</p>

<ul class="org-ul">
<li>MK: A common use case is to process the documents in the collection one at a
time. It’s such horrible overhead to hold all of the documents just in case
you come back to that collection again.</li>
<li>NW: It sounds like we might get consensus to relax the requirement.</li>
</ul>

<p>
This is related to the question of transiency because a transient block or
something like that would give the user the appearance of control.
</p>

<p>
Some discussion of how database and filesystem access differs.
</p>

<ul class="org-ul">
<li>MK: The issue quotes the existing text. The transient proposal doesn’t change
that. The transient proposal gives the user an interoperable way of switching
that off but it doesn’t change the default.
<ul class="org-ul">
<li>… For our user base, I think the default is wrong.</li>
</ul></li>
<li>JLO: So what we want is an interoperable way to specify that.</li>
<li>EP: Would it be reasonable to change the default for XPath and not XQuery?</li>
<li>MK: We could say that the implementation must provide an option for it to be
deterministic but that doesn’t have to be the default.</li>
</ul>

<p>
Some discussion of the use of an options parameter. That’s not necessarily
something you can know statically, but certainly the 99% case is that it will 
be a literal!
</p>
</div>
</div>

<div id="outline-container-iss-296" class="outline-4">
<h4 id="iss-296"><span class="section-number-4">2.2.20.</span> 296, Default namespace for elements; especially in the context of HTML</h4>
<div class="outline-text-4" id="text-iss-296">
<p>
ACTION: QT4CG-080-02: NW to fix issue classification so PR #1181 isn’t misclassified as an XSLT issue
</p>

<p>
Some discussion of <a href="https://github.com/qt4cg/qtspecs/pull/1181">PR #1181</a> which addresses this issue.
</p>

<p>
PR pending
</p>
</div>
</div>

<div id="outline-container-iss-305" class="outline-4">
<h4 id="iss-305"><span class="section-number-4">2.2.21.</span> 305, parse-xml() and whitespace stripping</h4>
<div class="outline-text-4" id="text-iss-305">
<ul class="org-ul">
<li>MK: The whole implicit context dependencies of some functions is very
worrying. The fact that strip-space and preserve-space apply globally is very
unsatisfactory.</li>
</ul>

<p>
Some discussion
</p>

<ul class="org-ul">
<li>MK: These need to be options parameters on the functions (parse-xml, doc,
etc.)</li>
</ul>

<p>
“Required”/”Hard”
</p>
</div>
</div>

<div id="outline-container-iss-322" class="outline-4">
<h4 id="iss-322"><span class="section-number-4">2.2.22.</span> 322, Map construction in XSLT: xsl:record instruction</h4>
<div class="outline-text-4" id="text-iss-322">
<ul class="org-ul">
<li>NW: Looks useful to me.</li>
</ul>

<p>
“Optional”/”Easy”
</p>
</div>
</div>

<div id="outline-container-iss-323" class="outline-4">
<h4 id="iss-323"><span class="section-number-4">2.2.23.</span> 323, add select attribute to xsl:text</h4>
<div class="outline-text-4" id="text-iss-323">
<p>
Some discussion of the fact that <code>xsl:sequence</code> isn’t intuitive but
<code>xsl:value-of</code> returns a text node.
</p>

<p>
MK’s response in this issue is a separable issue. It’s a tangent.
</p>

<p>
ACTION: QT4CG-080-03: MK to make a separate issue for @as on xsl:value-of
</p>

<p>
With respect to @select on xsl:text, it’s hard to argue against.
</p>

<p>
“Optional”/”Easy”/
</p>
</div>
</div>

<div id="outline-container-iss-332" class="outline-4">
<h4 id="iss-332"><span class="section-number-4">2.2.24.</span> 332, Add a namespace uris option to fn:path</h4>
<div class="outline-text-4" id="text-iss-332">
<p>
This seems to have garnered some support.
</p>

<p>
“Optional”/”Easy”/
</p>
</div>
</div>

<div id="outline-container-iss-350" class="outline-4">
<h4 id="iss-350"><span class="section-number-4">2.2.25.</span> 350, CompPath (Composite-objects path) Expressions</h4>
<div class="outline-text-4" id="text-iss-350">
<p>
We’ve done some of this in other ways, or in other open PRs. Needs to be revised
in light of the current language.
</p>

<p>
“Optional”/”Hard”
</p>
</div>
</div>

<div id="outline-container-iss-366" class="outline-4">
<h4 id="iss-366"><span class="section-number-4">2.2.26.</span> 366, Support xsl:use-package with xsl:package-location</h4>
<div class="outline-text-4" id="text-iss-366">
<ul class="org-ul">
<li>MK: One school of thought says that locating packages should be outside the
core language. You should be able to configure where they come from without
changing your source code. OTOH, we know from Query and Schema that it’s much
more convenient to say where they come from inline.</li>
</ul>

<p>
“Optional”/”Easy”
</p>
</div>
</div>

<div id="outline-container-iss-374" class="outline-4">
<h4 id="iss-374"><span class="section-number-4">2.2.27.</span> 374, Can't view the XSD for XSLT in the browser</h4>
<div class="outline-text-4" id="text-iss-374">
<p>
Build issue. Let NW fix it.
</p>
</div>
</div>

<div id="outline-container-iss-379" class="outline-4">
<h4 id="iss-379"><span class="section-number-4">2.2.28.</span> 379, Namespace handling in parse-html</h4>
<div class="outline-text-4" id="text-iss-379">
<p>
Duplicate of 296, close with no further action.
</p>
</div>
</div>

<div id="outline-container-iss-402" class="outline-4">
<h4 id="iss-402"><span class="section-number-4">2.2.29.</span> 402, XSLT patterns: intersect and except</h4>
<div class="outline-text-4" id="text-iss-402">
<ul class="org-ul">
<li>MK: I think the proposal is to break the way it’s currently defined.
<ul class="org-ul">
<li>… In the cases where it’s changing it, the existing behavior is almost
certainly not what the user intended.</li>
</ul></li>
</ul>

<p>
“Optional”/”Easy”
</p>

<p>
Some consideration of what it means in stylesheets with other versions. Might we
just consider it a bug fix?
</p>
</div>
</div>

<div id="outline-container-iss-407" class="outline-4">
<h4 id="iss-407"><span class="section-number-4">2.2.30.</span> 407, XSLT-specific context properties used in function items</h4>
<div class="outline-text-4" id="text-iss-407">
<ul class="org-ul">
<li>MK: We have a catch-all issue that streamability of 4.0 hasn’t been addressed.</li>
</ul>

<p>
“Required”/”Easy”
</p>
</div>
</div>

<div id="outline-container-iss-421" class="outline-4">
<h4 id="iss-421"><span class="section-number-4">2.2.31.</span> 421, Make sure the build system syntax checks the syntax of examples</h4>
<div class="outline-text-4" id="text-iss-421">
<p>
Build issue.
</p>

<ul class="org-ul">
<li>MK: In the 3.x builds, we had a role for examples that caused them to be
syntactically validated.</li>
</ul>
</div>
</div>

<div id="outline-container-iss-451" class="outline-4">
<h4 id="iss-451"><span class="section-number-4">2.2.32.</span> 451, Multiple Schemas</h4>
<div class="outline-text-4" id="text-iss-451">
<ul class="org-ul">
<li>MK: We allow modules to use different schemas if they’re compatible
<ul class="org-ul">
<li>… And the spec is clearer about error conditions</li>
<li>… We don’t have the ability to import incompatible schemas and validate
against them separately.</li>
</ul></li>
</ul>

<p>
“Optional”/”Hard”
</p>

<p>
MK observes that part of this is now possible, you can have incompatible schemas
in use provided you don’t refer to them from your query.
</p>
</div>
</div>

<div id="outline-container-iss-490" class="outline-4">
<h4 id="iss-490"><span class="section-number-4">2.2.33.</span> 490, Control over schema validation in parse-xml(), doc(), etc.</h4>
<div class="outline-text-4" id="text-iss-490">
<p>
Like #305, this is about options on parse-xml, doc, etc.
</p>

<p>
“Required”/”Hard”
</p>
</div>
</div>

<div id="outline-container-iss-501" class="outline-4">
<h4 id="iss-501"><span class="section-number-4">2.2.34.</span> 501, Error handling: Rethrow errors; finally block</h4>
<div class="outline-text-4" id="text-iss-501">
<ul class="org-ul">
<li>MK: Not too difficult now that we have error maps.</li>
</ul>

<p>
“Required”/”Hard”
</p>
</div>
</div>

<div id="outline-container-iss-523" class="outline-4">
<h4 id="iss-523"><span class="section-number-4">2.2.35.</span> 523, Dealing with component name conflicts with library packages</h4>
<div class="outline-text-4" id="text-iss-523">
<ul class="org-ul">
<li>MK: Override with visibility hidden seems to be the same as accept with
visibility hidden.
<ul class="org-ul">
<li>… Perhaps this is “existing callers, use this version, but I don’t want to
call it from my package.”</li>
<li>Java doesn’t give you private overrides, do we really need this?</li>
</ul></li>
<li>MK: I can see the need for accept with alias, but is that really needed often
enough to justify?</li>
<li>JLO: That seems sensible enough to me, it’s “import as”.</li>
</ul>

<p>
“Optional”/”Hard”
</p>
</div>
</div>

<div id="outline-container-iss-528" class="outline-4">
<h4 id="iss-528"><span class="section-number-4">2.2.36.</span> 528, fn:elements-to-maps (before: Review of the fn:json() function)</h4>
<div class="outline-text-4" id="text-iss-528">
<p>
PR pending, but the PR is out of date and there are open actions to change it.
</p>
</div>
</div>

<div id="outline-container-iss-540" class="outline-4">
<h4 id="iss-540"><span class="section-number-4">2.2.37.</span> 540, Add fn:system-property() to XQuery</h4>
<div class="outline-text-4" id="text-iss-540">
<p>
This seems to have garnered some support.
</p>

<p>
“Optional”/”Easy”
</p>
</div>
</div>

<div id="outline-container-iss-557" class="outline-4">
<h4 id="iss-557"><span class="section-number-4">2.2.38.</span> 557, fn:unparsed-binary: accessing and manipulating binary types</h4>
<div class="outline-text-4" id="text-iss-557">
<p>
Superseded by #1127, close without further action
</p>
</div>
</div>

<div id="outline-container-iss-564" class="outline-4">
<h4 id="iss-564"><span class="section-number-4">2.2.39.</span> 564, Sorted maps</h4>
<div class="outline-text-4" id="text-iss-564">
<ul class="org-ul">
<li>MK: Might involve a data model change, that’s always difficult.</li>
</ul>

<p>
“Optional”/”Hard”
</p>
</div>
</div>

<div id="outline-container-iss-566" class="outline-4">
<h4 id="iss-566"><span class="section-number-4">2.2.40.</span> 566, fn:parse-uri, fn:build-uri: Feedback</h4>
<div class="outline-text-4" id="text-iss-566">
<p>
PR pending
</p>
</div>
</div>

<div id="outline-container-iss-573" class="outline-4">
<h4 id="iss-573"><span class="section-number-4">2.2.41.</span> 573, Node construction functions</h4>
<div class="outline-text-4" id="text-iss-573">
<ul class="org-ul">
<li>MK: I wanted to do it for two reasons: it’s useful to be able to use
functions, and also to make it possible in XPath rather than only XSLT and
XQuery.
<ul class="org-ul">
<li>… CG asks why not move the XQuery syntax into XPath</li>
<li>… I don’t like that partly because it only solves one of the problems, not the other</li>
<li>… From an XSLT perspective, wanting to keep the XPath grammar small</li>
</ul></li>
<li>NW: I predict it will be difficult to get consensus</li>
</ul>

<p>
Some discussion of whether it should be an extension; but users don’t tend to
use extensions if there’s another way.
</p>

<p>
“Revisit”
</p>
</div>
</div>

<div id="outline-container-iss-576" class="outline-4">
<h4 id="iss-576"><span class="section-number-4">2.2.42.</span> 576, JSON serialization: Sequences, INF/NaN, function items</h4>
<div class="outline-text-4" id="text-iss-576">
<ul class="org-ul">
<li>NW: It does seem bad that serialization and items-to-json behave differently.</li>
</ul>

<p>
Some discussion of the streamability consequences of serializing a sequence as
an array.
</p>

<ul class="org-ul">
<li>MK: We’re revisiting items-to-json anyway.</li>
</ul>

<p>
“Revisit”
</p>
</div>
</div>

<div id="outline-container-iss-583" class="outline-4">
<h4 id="iss-583"><span class="section-number-4">2.2.43.</span> 583, (array|map):replace → *:substitute or *:change</h4>
<div class="outline-text-4" id="text-iss-583">
<ul class="org-ul">
<li>MK: My last comment is to scrap the functions and go with the update syntax</li>
</ul>

<p>
“Revisit” after the PR on update syntax.
</p>
</div>
</div>

<div id="outline-container-iss-641" class="outline-4">
<h4 id="iss-641"><span class="section-number-4">2.2.44.</span> 641, Serialization fallback.</h4>
<div class="outline-text-4" id="text-iss-641">
<p>
Related to #576, marked revisit.
</p>

<p>
“Revisit”.
</p>

<p>
(We’ve come back to this issue on the afternoon of the second day).
</p>

<ul class="org-ul">
<li>MK: A common error is that you can’t use a map in document content. The
proposal is that instead of telling you that, it gives you a document that
contains a representation of that map.</li>
<li>NW: What about the streaming problem?</li>
<li>MK: We could have an extra serialization parameter “serialize sequence as
array”.</li>
<li>NW: And what’s the default?</li>
</ul>

<p>
Some discussion of streaming. This isn’t specifically about XSLT streaming, it’s
about the fact that serializers often work “on the fly”.
</p>

<ul class="org-ul">
<li>MK: A JSON serializer would have to look ahead to find out if the top-level
item was a sequence. So it’d have to buffer the <b>whole thing</b>.</li>
</ul>

<p>
With respect to serializing +Inf, -Inf, NaN, using null per the standards is
probably the right thing to do.
</p>
</div>
</div>

<div id="outline-container-iss-657" class="outline-4">
<h4 id="iss-657"><span class="section-number-4">2.2.45.</span> 657, User-defined functions in main modules without `local` prefix</h4>
<div class="outline-text-4" id="text-iss-657">
<ul class="org-ul">
<li>MK: The whole point here is to avoid conflicts with system functions. You
don’t want a query to fail just because we added a new function to the static
context.</li>
</ul>

<p>
“Optional”/”Hard”
</p>
</div>
</div>

<div id="outline-container-iss-670" class="outline-4">
<h4 id="iss-670"><span class="section-number-4">2.2.46.</span> 670, The trouble with XPath‘s fn:fold-right. A fix and Proposal for fn:fold-lazy</h4>
<div class="outline-text-4" id="text-iss-670">
<p>
Consensus: we need an actual PR for fold-lazy.
</p>

<p>
“Optional”/”Hard”
</p>
</div>
</div>

<div id="outline-container-iss-675" class="outline-4">
<h4 id="iss-675"><span class="section-number-4">2.2.47.</span> 675, XSLT streaming rules for new constructs</h4>
<div class="outline-text-4" id="text-iss-675">
<p>
“Required”/”Hard”
</p>
</div>
</div>

<div id="outline-container-iss-689" class="outline-4">
<h4 id="iss-689"><span class="section-number-4">2.2.48.</span> 689, fn:stack-trace: keep, drop, replace with $err:stack-trace ?</h4>
<div class="outline-text-4" id="text-iss-689">
<p>
Consensus: provide the stack trace on error, but not as a function.
</p>

<p>
“Required”/”Easy”
</p>
</div>
</div>

<div id="outline-container-iss-708" class="outline-4">
<h4 id="iss-708"><span class="section-number-4">2.2.49.</span> 708, Toward a design for generators</h4>
<div class="outline-text-4" id="text-iss-708">
<p>
See #716
</p>

<p>
“Optional”/”Hard”
</p>
</div>
</div>

<div id="outline-container-iss-714" class="outline-4">
<h4 id="iss-714"><span class="section-number-4">2.2.50.</span> 714, Function annotations in XSLT</h4>
<div class="outline-text-4" id="text-iss-714">
<ul class="org-ul">
<li>MK: I think I proposed this for neatness.</li>
</ul>

<p>
“Optional”/”Easy”
</p>
</div>
</div>

<div id="outline-container-iss-716" class="outline-4">
<h4 id="iss-716"><span class="section-number-4">2.2.51.</span> 716, Generators in XPath</h4>
<div class="outline-text-4" id="text-iss-716">
<p>
See #708
</p>

<p>
“Optional”/”Hard”
</p>
</div>
</div>

<div id="outline-container-iss-729" class="outline-4">
<h4 id="iss-729"><span class="section-number-4">2.2.52.</span> 729, xsi:schemaLocation</h4>
<div class="outline-text-4" id="text-iss-729">
<p>
“Required”/”Easy”
</p>
</div>
</div>

<div id="outline-container-iss-735" class="outline-4">
<h4 id="iss-735"><span class="section-number-4">2.2.53.</span> 735, Local functions in XSLT</h4>
<div class="outline-text-4" id="text-iss-735">
<ul class="org-ul">
<li>MK: My preferred is named local functions.
<ul class="org-ul">
<li>… Putting all the functions first avoids hoisting and other problems.</li>
</ul></li>
</ul>

<p>
See #745
</p>

<p>
“Optional”/”Hard”
</p>
</div>
</div>

<div id="outline-container-iss-745" class="outline-4">
<h4 id="iss-745"><span class="section-number-4">2.2.54.</span> 745, Support for inline (anonymous) xslt functions</h4>
<div class="outline-text-4" id="text-iss-745">
<p>
See #735.
</p>

<p>
Close with no action.
</p>
</div>
</div>

<div id="outline-container-iss-748" class="outline-4">
<h4 id="iss-748"><span class="section-number-4">2.2.55.</span> 748, Parse functions: consistency</h4>
<div class="outline-text-4" id="text-iss-748">
<p>
“Required”/”Easy”
</p>
</div>
</div>

<div id="outline-container-iss-755" class="outline-4">
<h4 id="iss-755"><span class="section-number-4">2.2.56.</span> 755, Expression for binding the Context Value</h4>
<div class="outline-text-4" id="text-iss-755">
<p>
“Required”/”Hard”
</p>
</div>
</div>

<div id="outline-container-iss-760" class="outline-4">
<h4 id="iss-760"><span class="section-number-4">2.2.57.</span> 760, Serialize functions: consistency</h4>
<div class="outline-text-4" id="text-iss-760">
<p>
What’s the proposal?
</p>
</div>
</div>

<div id="outline-container-iss-767" class="outline-4">
<h4 id="iss-767"><span class="section-number-4">2.2.58.</span> 767, parse-html(): case of SVG element names</h4>
<div class="outline-text-4" id="text-iss-767">
<ul class="org-ul">
<li>MK: I think we determined that the case should be preserved.</li>
</ul>

<p>
“Required”/”Easy”
</p>
</div>
</div>

<div id="outline-container-iss-774" class="outline-4">
<h4 id="iss-774"><span class="section-number-4">2.2.59.</span> 774, What should be percent-encoded in a URI?</h4>
<div class="outline-text-4" id="text-iss-774">
<p>
Addressed by recent changes.
</p>
</div>
</div>

<div id="outline-container-iss-814" class="outline-4">
<h4 id="iss-814"><span class="section-number-4">2.2.60.</span> 814, XSLT: Rules for on-no-match=\"shallow-copy-all\"</h4>
<div class="outline-text-4" id="text-iss-814">
<p>
Superseded by #1238
</p>
</div>
</div>


<div id="outline-container-iss-826" class="outline-4">
<h4 id="iss-826"><span class="section-number-4">2.2.61.</span> 826, Arrays: Representation of single members of an array</h4>
<div class="outline-text-4" id="text-iss-826">
<ul class="org-ul">
<li>MK: Some of the comments here are superseded by more recent work.</li>
<li>MK: We could get rid of array:members and array:split as user-visible functions.</li>
</ul>

<p>
“Required”/”Hard”
</p>
</div>
</div>

<div id="outline-container-iss-835" class="outline-4">
<h4 id="iss-835"><span class="section-number-4">2.2.62.</span> 835, Review names of record types</h4>
<div class="outline-text-4" id="text-iss-835">
<ul class="org-ul">
<li>MK: The names are local to the spec, they don’t have any effect on queries.
<ul class="org-ul">
<li>… So it is purely editorial.</li>
</ul></li>
</ul>

<p>
“Optional”/”Easy”
</p>
</div>
</div>

<div id="outline-container-iss-850" class="outline-4">
<h4 id="iss-850"><span class="section-number-4">2.2.63.</span> 850, fn:parse-html: Finalization</h4>
<div class="outline-text-4" id="text-iss-850">
<p>
PR pending.
</p>
</div>
</div>

<div id="outline-container-iss-854" class="outline-4">
<h4 id="iss-854"><span class="section-number-4">2.2.64.</span> 854, Need more discussion and explanation of deep-lookup operator</h4>
<div class="outline-text-4" id="text-iss-854">
<p>
PR Pending (#832)
</p>
</div>
</div>

<div id="outline-container-iss-868" class="outline-4">
<h4 id="iss-868"><span class="section-number-4">2.2.65.</span> 868, fn:intersperse → fn:join, array:join($arrays, $separator)</h4>
<div class="outline-text-4" id="text-iss-868">
<ul class="org-ul">
<li>JLY: It’s now or never.</li>
</ul>

<p>
“Required”/”Easy”
</p>
</div>
</div>

<div id="outline-container-iss-877" class="outline-4">
<h4 id="iss-877"><span class="section-number-4">2.2.66.</span> 877, Inconsistency in XQFO comparator functions/operators with recursive rules</h4>
<div class="outline-text-4" id="text-iss-877">
<p>
“Optional”/”Easy”
</p>
</div>
</div>

<div id="outline-container-iss-882" class="outline-4">
<h4 id="iss-882"><span class="section-number-4">2.2.67.</span> 882, fn:chain or fn:compose</h4>
<div class="outline-text-4" id="text-iss-882">
<ul class="org-ul">
<li>MK: In some ways, this is like the discussion we had about transitive closure.
We decided there that what most people would want and need is something that
applies the transitive closure.
<ul class="org-ul">
<li>… What DN has pointed out here is that fn:chain is similar.</li>
<li>… I think I probably want the composition function more often.</li>
</ul></li>
</ul>

<p>
“Optional”/”Easy”
</p>
</div>
</div>

<div id="outline-container-iss-885" class="outline-4">
<h4 id="iss-885"><span class="section-number-4">2.2.68.</span> 885, fn:uuid</h4>
<div class="outline-text-4" id="text-iss-885">
<ul class="org-ul">
<li>MK: To do random numbers properly, we decided we need to have something more
complicated.
<ul class="org-ul">
<li>… The same arguments apply to UUID.</li>
<li>… One thing that occurs to me is to add UUID as a subfunction of random
number generator.</li>
</ul></li>
</ul>

<p>
Some discussion of which flavors of random UUID require access to the time, and
if that could compromise the output of the random number generator.
</p>

<ul class="org-ul">
<li>NW: MK is right that we’d need <code>fn:uuid-generator</code> …</li>
</ul>

<p>
“Optional”/”Hard”
</p>
</div>
</div>

<div id="outline-container-iss-910" class="outline-4">
<h4 id="iss-910"><span class="section-number-4">2.2.69.</span> 910, Introduce a Kollection object with functions that operate on all types of items that can be containers of unlimited number of \"members\"</h4>
<div class="outline-text-4" id="text-iss-910">
<p>
“Optional”/”Hard”
</p>
</div>
</div>

<div id="outline-container-iss-917" class="outline-4">
<h4 id="iss-917"><span class="section-number-4">2.2.70.</span> 917, Better support for typed maps</h4>
<div class="outline-text-4" id="text-iss-917">
<p>
“Optional”/”Hard”
</p>
</div>
</div>

<div id="outline-container-iss-920" class="outline-4">
<h4 id="iss-920"><span class="section-number-4">2.2.71.</span> 920, The rules for the \"tail position\" of a sequence constructor need to take account of xsl:switch</h4>
<div class="outline-text-4" id="text-iss-920">
<p>
PR pending
</p>
</div>
</div>

<div id="outline-container-iss-938" class="outline-4">
<h4 id="iss-938"><span class="section-number-4">2.2.72.</span> 938, Canonical serialization</h4>
<div class="outline-text-4" id="text-iss-938">
<p>
“Optional”/”Easy”
</p>
</div>
</div>

<div id="outline-container-iss-954" class="outline-4">
<h4 id="iss-954"><span class="section-number-4">2.2.73.</span> 954, Establish a default value for the XSLT fixed-namespaces attribute</h4>
<div class="outline-text-4" id="text-iss-954">
<p>
Close without further action
</p>
</div>
</div>

<div id="outline-container-iss-955" class="outline-4">
<h4 id="iss-955"><span class="section-number-4">2.2.74.</span> 955, Options parameters as record types</h4>
<div class="outline-text-4" id="text-iss-955">
<p>
Close without further action
</p>
</div>
</div>

<div id="outline-container-iss-959" class="outline-4">
<h4 id="iss-959"><span class="section-number-4">2.2.75.</span> 959, Milliseconds ↔ xs:dayTimeDuration, Unix time ↔ xs:dateTime</h4>
<div class="outline-text-4" id="text-iss-959">
<p>
“Optional”/”Easy”
</p>
</div>
</div>

<div id="outline-container-iss-967" class="outline-4">
<h4 id="iss-967"><span class="section-number-4">2.2.76.</span> 967, XPath Appendix I: Comparisons</h4>
<div class="outline-text-4" id="text-iss-967">
<p>
“Required”/”Easy”
</p>
</div>
</div>

<div id="outline-container-iss-981" class="outline-4">
<h4 id="iss-981"><span class="section-number-4">2.2.77.</span> 981, Identify optional arguments in callback functions</h4>
<div class="outline-text-4" id="text-iss-981">
<p>
“Optional”/”Easy”
</p>
</div>
</div>

<div id="outline-container-iss-982" class="outline-4">
<h4 id="iss-982"><span class="section-number-4">2.2.78.</span> 982, Add position argument to scan-left and scan-right</h4>
<div class="outline-text-4" id="text-iss-982">
<ul class="org-ul">
<li>MK: We have to do this, we can’t leave one function that’s different from all
the others.</li>
</ul>

<p>
“Required”/”Easy”
</p>
</div>
</div>

<div id="outline-container-iss-986" class="outline-4">
<h4 id="iss-986"><span class="section-number-4">2.2.79.</span> 986, Numeric Comparisons</h4>
<div class="outline-text-4" id="text-iss-986">
<p>
This is roughly a duplicate of #967.
</p>

<p>
“Required”/”Easy”
</p>
</div>
</div>

<div id="outline-container-iss-991" class="outline-4">
<h4 id="iss-991"><span class="section-number-4">2.2.80.</span> 991, Invisible-xml - missing details</h4>
<div class="outline-text-4" id="text-iss-991">
<p>
ACTION: QT4CG-080-04: NW to revise p:invisible-xml
</p>
</div>
</div>

<div id="outline-container-iss-998" class="outline-4">
<h4 id="iss-998"><span class="section-number-4">2.2.81.</span> 998, regular expression addition - lookbehind assertions and lookahead assertions</h4>
<div class="outline-text-4" id="text-iss-998">
<p>
“Optional”/”Hard”
</p>
</div>
</div>

<div id="outline-container-iss-1006" class="outline-4">
<h4 id="iss-1006"><span class="section-number-4">2.2.82.</span> 1006, regular expression addition - word boundaries</h4>
<div class="outline-text-4" id="text-iss-1006">
<p>
“Optional”/”Hard”
</p>
</div>
</div>

<div id="outline-container-iss-1011" class="outline-4">
<h4 id="iss-1011"><span class="section-number-4">2.2.83.</span> 1011, fn:transform() improvements</h4>
<div class="outline-text-4" id="text-iss-1011">
<p>
“Required”/”Hard”
</p>
</div>
</div>

<div id="outline-container-iss-1013" class="outline-4">
<h4 id="iss-1013"><span class="section-number-4">2.2.84.</span> 1013, [XSLT] Need to say what happens when a capturing accumulator rule matches a non-element node</h4>
<div class="outline-text-4" id="text-iss-1013">
<p>
PR pending
</p>
</div>
</div>

<div id="outline-container-iss-1014" class="outline-4">
<h4 id="iss-1014"><span class="section-number-4">2.2.85.</span> 1014, Predicates, sequences of numbers: Feedback</h4>
<div class="outline-text-4" id="text-iss-1014">
<ul class="org-ul">
<li>MK: Under CG’s proposal, an untyped atomic is problematic. If you say, if the
first thing in the sequence is a number, then everything else is coerced to a
number, you get some quite strange results.</li>
</ul>

<p>
“Required”/”Easy”
</p>
</div>
</div>

<div id="outline-container-iss-1021" class="outline-4">
<h4 id="iss-1021"><span class="section-number-4">2.2.86.</span> 1021, Extend `fn:doc`, `fn:collection` and `fn:uri-collection` with options maps</h4>
<div class="outline-text-4" id="text-iss-1021">
<p>
Related to other issues about having options arguments for these functions.
</p>

<p>
“Required”/”Hard”
</p>
</div>
</div>

<div id="outline-container-iss-1026" class="outline-4">
<h4 id="iss-1026"><span class="section-number-4">2.2.87.</span> 1026, XSLT match patterns on pinned maps and arrays</h4>
<div class="outline-text-4" id="text-iss-1026">
<p>
“Optional”/”Hard”
</p>
</div>
</div>

<div id="outline-container-iss-1035" class="outline-4">
<h4 id="iss-1035"><span class="section-number-4">2.2.88.</span> 1035, Add default values for parameters in constructor functions for records</h4>
<div class="outline-text-4" id="text-iss-1035">
<p>
“Optional”/”Hard”
</p>
</div>
</div>

<div id="outline-container-iss-1045" class="outline-4">
<h4 id="iss-1045"><span class="section-number-4">2.2.89.</span> 1045, Functions to manage namespace usage</h4>
<div class="outline-text-4" id="text-iss-1045">
<p>
“Required”/”Hard”
</p>
</div>
</div>

<div id="outline-container-iss-1048" class="outline-4">
<h4 id="iss-1048"><span class="section-number-4">2.2.90.</span> 1048, fn:format-number: relax restrictions on exponent-separator (possibly minus-sign, percent, per-mille)</h4>
<div class="outline-text-4" id="text-iss-1048">
<p>
PR pending
</p>
</div>
</div>

<div id="outline-container-iss-1055" class="outline-4">
<h4 id="iss-1055"><span class="section-number-4">2.2.91.</span> 1055, xsl:variable/@as - simplifying the language - attempt 2</h4>
<div class="outline-text-4" id="text-iss-1055">
<p>
We just don’t think this is something we are prepared to do.
</p>
</div>
</div>

<div id="outline-container-iss-1065" class="outline-4">
<h4 id="iss-1065"><span class="section-number-4">2.2.92.</span> 1065, fn:format-number: further notes</h4>
<div class="outline-text-4" id="text-iss-1065">
<ul class="org-ul">
<li>MK: The <code>fn:format-number</code> function has always been context independent.</li>
</ul>

<p>
“Optional”/”Hard”
</p>
</div>
</div>

<div id="outline-container-iss-1069" class="outline-4">
<h4 id="iss-1069"><span class="section-number-4">2.2.93.</span> 1069, fn:ucd</h4>
<div class="outline-text-4" id="text-iss-1069">
<p>
Useful functionality. But will it be hard to implement efficiently?
</p>

<p>
“Optional”/”Hard”
</p>
</div>
</div>

<div id="outline-container-iss-1085" class="outline-4">
<h4 id="iss-1085"><span class="section-number-4">2.2.94.</span> 1085, Parameters to fn:sort</h4>
<div class="outline-text-4" id="text-iss-1085">
<p>
“Optional”/”Hard”
</p>
</div>
</div>

<div id="outline-container-iss-1096" class="outline-4">
<h4 id="iss-1096"><span class="section-number-4">2.2.95.</span> 1096, Effect of atomization on array:index-of()</h4>
<div class="outline-text-4" id="text-iss-1096">
<p>
“Required”/”Easy”/
</p>
</div>
</div>

<div id="outline-container-iss-1103" class="outline-4">
<h4 id="iss-1103"><span class="section-number-4">2.2.96.</span> 1103, CSV Parsing - handling line ending normalization</h4>
<div class="outline-text-4" id="text-iss-1103">
<p>
“Revisit”, CG isn’t present.
</p>
</div>
</div>

<div id="outline-container-iss-1111" class="outline-4">
<h4 id="iss-1111"><span class="section-number-4">2.2.97.</span> 1111, xsl:pipeline</h4>
<div class="outline-text-4" id="text-iss-1111">
<p>
“Optional”/”Hard”
</p>
</div>
</div>

<div id="outline-container-iss-1114" class="outline-4">
<h4 id="iss-1114"><span class="section-number-4">2.2.98.</span> 1114, Partial function application: Keywords and placeholders</h4>
<div class="outline-text-4" id="text-iss-1114">
<p>
“Revisit”, CG isn’t present.
</p>
</div>
</div>

<div id="outline-container-iss-1119" class="outline-4">
<h4 id="iss-1119"><span class="section-number-4">2.2.99.</span> 1119, Declare namespace bindings in XPath</h4>
<div class="outline-text-4" id="text-iss-1119">
<p>
Some discussion of the issue; making the XPath prolog a separable
part of the language might be useful.
</p>

<p>
Close without action.
</p>
</div>
</div>

<div id="outline-container-iss-1124" class="outline-4">
<h4 id="iss-1124"><span class="section-number-4">2.2.100.</span> 1124, Formatting XPath/XQuery: Preferences, Conventions</h4>
<div class="outline-text-4" id="text-iss-1124">
<p>
Editorial. Not discussed at the f2f.
</p>
</div>
</div>

<div id="outline-container-iss-1127" class="outline-4">
<h4 id="iss-1127"><span class="section-number-4">2.2.101.</span> 1127, Binary resources</h4>
<div class="outline-text-4" id="text-iss-1127">
<p>
“Required”/”Easy”
</p>

<p>
(Doing the easy parts is easy!)
</p>
</div>
</div>

<div id="outline-container-iss-1136" class="outline-4">
<h4 id="iss-1136"><span class="section-number-4">2.2.102.</span> 1136, Defining names for parameters on typed function tests</h4>
<div class="outline-text-4" id="text-iss-1136">
<p>
Part of the nexus of issues about arguments to dynamic functions.
</p>

<p>
“Revisit”
</p>
</div>
</div>

<div id="outline-container-iss-1153" class="outline-4">
<h4 id="iss-1153"><span class="section-number-4">2.2.103.</span> 1153, XSLT: debugging template rule selection</h4>
<div class="outline-text-4" id="text-iss-1153">
<p>
“Optional”/”Easy”
</p>
</div>
</div>

<div id="outline-container-iss-1158" class="outline-4">
<h4 id="iss-1158"><span class="section-number-4">2.2.104.</span> 1158, Simple mapping operator for arrays</h4>
<div class="outline-text-4" id="text-iss-1158">
<p>
“Required”/”Easy”
</p>
</div>
</div>

<div id="outline-container-iss-1160" class="outline-4">
<h4 id="iss-1160"><span class="section-number-4">2.2.105.</span> 1160, fn:is-collation-available</h4>
<div class="outline-text-4" id="text-iss-1160">
<p>
“Optional”/”Easy”
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-wrap-up-1" class="outline-2">
<h2 id="wrap-up-1"><span class="section-number-2">3.</span> End-of-day wrapup</h2>
<div class="outline-text-2" id="text-wrap-up-1">
</div>

<div id="outline-container-roll-call-wrapup" class="outline-3">
<h3 id="roll-call-wrapup"><span class="section-number-3">3.1.</span> Roll call <code>[3/3]</code></h3>
<div class="outline-text-3" id="text-roll-call-wrapup">
<p>
Face-to-face participants and:
</p>

<ul class="org-ul">
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="on"><code>[X]</code> Joel Kalvesmaki (JK)</li>
<li class="on"><code>[X]</code> Dimitre Novatchev (DN)</li>
</ul>
</div>
</div>

<div id="outline-container-wrap-up-notes-1" class="outline-3">
<h3 id="wrap-up-notes-1"><span class="section-number-3">3.2.</span> Notes</h3>
<div class="outline-text-3" id="text-wrap-up-notes-1">
<ul class="org-ul">
<li>DN: I’m waiting on records to finish my proposals for fold-lazy, kollections,
and generators</li>
<li>MK: I think what we have for records is complete and consistent, but there are
some ideas for enhancements that are still open.
<ul class="org-ul">
<li>Adding defaults for constructors</li>
<li>The most difficult issue raised is whether to promote records from purely a
predicate applied to maps to being some kind of labeled item type.</li>
<li>It’s a fairly substantive data model change and could be disruptive.</li>
</ul></li>
</ul>

<p>
(MK’s audio was hard to hear on the phone, apologies.)
</p>

<ul class="org-ul">
<li>DN: Look at how Python deals with variadic options for anonymous functions.</li>
<li>NW: We didn’t make progress on that issue because it’s part of a cluster.</li>

<li>ED: We could review the close without action group.</li>
</ul>

<p>
NW projects the list.
</p>

<ul class="org-ul">
<li>MK: Some of these are covered by other issues.</li>

<li>DN: What about adding milestones?</li>
<li>NW: If that seems practical</li>

<li>JK: I can’t make tomorrow’s meeting. I’m looking at the list of PRG-required.</li>
</ul>
</div>
</div>
</div>


<div id="outline-container-minutes-2" class="outline-2">
<h2 id="minutes-2">Draft Minutes (day 2 of 2)</h2>
<div class="outline-text-2" id="text-minutes-2">
<p>
Present: MK, JLO, EP, NW, and Jirka Kosek.
</p>
</div>

<div id="outline-container-issues-2" class="outline-3">
<h3 id="issues-2">Review the issues</h3>
<div class="outline-text-3" id="text-issues-2">
</div>

<div id="outline-container-iss-1161" class="outline-4">
<h4 id="iss-1161">1161, More changes to drop the requirement for document-uri() uniqueness</h4>
<div class="outline-text-4" id="text-iss-1161">
<p>
“Required”/”Easy”
</p>
</div>
</div>

<div id="outline-container-iss-1169" class="outline-4">
<h4 id="iss-1169">1169, Maps &amp; Arrays: Consistency &amp; Terminology</h4>
<div class="outline-text-4" id="text-iss-1169">
<p>
“Required”/”Hard”
</p>
</div>
</div>

<div id="outline-container-iss-1175" class="outline-4">
<h4 id="iss-1175">1175, XPath: Optional parameters in the definition of an inline function</h4>
<div class="outline-text-4" id="text-iss-1175">
<p>
“Revisit”
</p>
</div>
</div>

<div id="outline-container-iss-1176" class="outline-4">
<h4 id="iss-1176">1176, Use fn:parse-uri to check whether a filepath is relative or absolute</h4>
<div class="outline-text-4" id="text-iss-1176">
<p>
“Optional”/”Easy”
</p>

<p>
ACTION: QT4CG-080-05: NW to add absolute property to the parse-uri output
</p>
</div>
</div>

<div id="outline-container-iss-1179" class="outline-4">
<h4 id="iss-1179">1179, Editorial: `array:values`, `map:values`</h4>
<div class="outline-text-4" id="text-iss-1179">
<p>
See issue #1169 and PR #1185.
</p>

<p>
“Revise”
</p>
</div>
</div>

<div id="outline-container-iss-1183" class="outline-4">
<h4 id="iss-1183">1183, transient() - a function to make functions nondeterministic</h4>
<div class="outline-text-4" id="text-iss-1183">
<p>
“Revise”
</p>
</div>
</div>

<div id="outline-container-iss-1187" class="outline-4">
<h4 id="iss-1187">1187, Decimal rounding</h4>
<div class="outline-text-4" id="text-iss-1187">
<ul class="org-ul">
<li>MK: We have half-to-even but we don’t have the other modes.
<ul class="org-ul">
<li>You can usually wangle it by negating, rounding, etc. But it’s a kludge.</li>
</ul></li>
<li>NW: This is preventing real users from getting the results they need.</li>
</ul>

<p>
“Required”/”Easy”
</p>
</div>
</div>

<div id="outline-container-iss-1193" class="outline-4">
<h4 id="iss-1193">1193, Parsing Functions: Empty input</h4>
<div class="outline-text-4" id="text-iss-1193">
<ul class="org-ul">
<li>MK: I think the last time we looked at this in 3.x, we agreed that most
functions have a “principle argument”, the first argument, and it makes sense
to allow that and return an empty sequence.
<ul class="org-ul">
<li>… There are other conflicting positions, for example that empty sequences to
string functions give the empty string.</li>
</ul></li>
</ul>

<p>
PR pending
</p>
</div>
</div>

<div id="outline-container-iss-1194" class="outline-4">
<h4 id="iss-1194">1194, New function fn:query()</h4>
<div class="outline-text-4" id="text-iss-1194">
<p>
“Optional”/”Hard”
</p>
</div>
</div>

<div id="outline-container-iss-1202" class="outline-4">
<h4 id="iss-1202">1202, XQFO: Rendering of new/updated functions</h4>
<div class="outline-text-4" id="text-iss-1202">
<p>
“Required”/”Easy”
</p>
</div>
</div>

<div id="outline-container-iss-1216" class="outline-4">
<h4 id="iss-1216">1216, Detailed comments on math:e, sinh(), cosh(), tanh()</h4>
<div class="outline-text-4" id="text-iss-1216">
<p>
PR pending
</p>
</div>
</div>

<div id="outline-container-iss-1224" class="outline-4">
<h4 id="iss-1224">1224, Attribute priority for xsl:accumulator-rule</h4>
<div class="outline-text-4" id="text-iss-1224">
<ul class="org-ul">
<li>MK: I think I’m persuaded.</li>
</ul>

<p>
“Optional”/”Easy”
</p>
</div>
</div>

<div id="outline-container-iss-1225" class="outline-4">
<h4 id="iss-1225">1225, Generalization of Deep Updates</h4>
<div class="outline-text-4" id="text-iss-1225">
<ul class="org-ul">
<li>JLO: There’s an extension to XQuery Update in eXist DB that looks like the new
map and array syntax.</li>
<li>MK: It’s obviously desirable, but the prospect of taking on XQuery Update is
daunting.
<ul class="org-ul">
<li>… Partly because of issues of consensus on the 3.x specifications.</li>
<li>… You could decide that it was a false start and go back to the 1.0 spec.</li>
</ul></li>
</ul>

<p>
“Optional”/”Hard”
</p>
</div>
</div>

<div id="outline-container-iss-1234" class="outline-4">
<h4 id="iss-1234">1234, Seralization Parameters: Indentation, Whitespace, Newlines</h4>
<div class="outline-text-4" id="text-iss-1234">
<p>
“Optional”/”Easy”
</p>
</div>
</div>

<div id="outline-container-iss-1235" class="outline-4">
<h4 id="iss-1235">1235, Function Identity: Treating function items with identical bodies</h4>
<div class="outline-text-4" id="text-iss-1235">
<ul class="org-ul">
<li>MK: This has always been a pretty sore area. If you call a function that calls
a function that calls a function that calls generate-id, are you allowed to
pull that function out of a loop?
<ul class="org-ul">
<li>… It’s hard to maintain function identity in all case.</li>
</ul></li>
</ul>

<p>
“Required”/”Hard”
</p>
</div>
</div>

<div id="outline-container-iss-1236" class="outline-4">
<h4 id="iss-1236">1236, QT4CG-078-01 fn:unparsed-text-lines, normalize newlines</h4>
<div class="outline-text-4" id="text-iss-1236">
<p>
“Optional”/”Easy”
</p>
</div>
</div>

<div id="outline-container-iss-1238" class="outline-4">
<h4 id="iss-1238">1238, XSLT on-no-match=\"shallow-copy-all\" - revised rules</h4>
<div class="outline-text-4" id="text-iss-1238">
<p>
“Required”/”Easy”
</p>
</div>
</div>

<div id="outline-container-iss-1239" class="outline-4">
<h4 id="iss-1239">1239, XSLT xsl:next-match with select attribute</h4>
<div class="outline-text-4" id="text-iss-1239">
<ul class="org-ul">
<li>MK: It needs working through. I hit it with arrays, where I wanted to sort the
array and then carry on.</li>
</ul>

<p>
“Optional”/”Hard”
</p>
</div>
</div>

<div id="outline-container-iss-1240" class="outline-4">
<h4 id="iss-1240">1240, $sequence-of-maps ? info()</h4>
<div class="outline-text-4" id="text-iss-1240">
<ul class="org-ul">
<li>NW: Does the presence of this ugly gotcha raise this to the level of required?</li>
<li>MK: I think so.</li>
</ul>

<p>
“Required”/”Hard”
</p>
</div>
</div>

<div id="outline-container-iss-1241" class="outline-4">
<h4 id="iss-1241">1241, Node constructor vs. otherwise/map constructor</h4>
<div class="outline-text-4" id="text-iss-1241">
<p>
“Required”/”Easy”
</p>
</div>
</div>

<div id="outline-container-iss-1245" class="outline-4">
<h4 id="iss-1245">1245, fn:format-dateTime: Properties</h4>
<div class="outline-text-4" id="text-iss-1245">
<p>
“Required”/”Easy”
</p>
</div>
</div>

<div id="outline-container-iss-1246" class="outline-4">
<h4 id="iss-1246">1246, fn:json-to-xml: `number-parser` option</h4>
<div class="outline-text-4" id="text-iss-1246">
<p>
“Required”/”Easy”
</p>
</div>
</div>

<div id="outline-container-iss-1247" class="outline-4">
<h4 id="iss-1247">1247, `??type(T)` in lookup expressions - shortcuts</h4>
<div class="outline-text-4" id="text-iss-1247">
<p>
“Optional”/”Easy”
</p>
</div>
</div>

<div id="outline-container-iss-1248" class="outline-4">
<h4 id="iss-1248">1248, for member allowing empty</h4>
<div class="outline-text-4" id="text-iss-1248">
<p>
PR prending
</p>
</div>
</div>

<div id="outline-container-iss-1251" class="outline-4">
<h4 id="iss-1251">1251, Allow sequence constructor in extension instructions that are implemented with named templates</h4>
<div class="outline-text-4" id="text-iss-1251">
<ul class="org-ul">
<li>MK: That’s not the only possible interpretation, but it seems a reasonable
default.</li>
</ul>

<p>
“Optional”/”Easy”
</p>
</div>
</div>
</div>















<div id="outline-container-review-prs" class="outline-3">
<h3 id="review-prs">Review of PRs</h3>
<div class="outline-text-3" id="text-review-prs">
<p>
Two are tagged “merge without discussion”, we’ll merge those. Any that we agree
should be merged we’ll mark as “propose to merge without discussion” for the
next meeting. That’ll give the whole group an opportunity to see what’s planned
before we do it.
</p>
</div>

<div id="outline-container-pr-1233" class="outline-4">
<h4 id="pr-1233">1233 Major edits to fn:chain, clarification only</h4>
<div class="outline-text-4" id="text-pr-1233">
<p>
Merged without discussion.
</p>
</div>
</div>

<div id="outline-container-pr-1230" class="outline-4">
<h4 id="pr-1230">1230 1216 Detailed comments on math:e, sinh(), cosh(), tanh()</h4>
<div class="outline-text-4" id="text-pr-1230">
<p>
Merged without discussion.
</p>
</div>
</div>

<div id="outline-container-pr-1250" class="outline-4">
<h4 id="pr-1250">1250 1048 Extended decimal format properties</h4>
<div class="outline-text-4" id="text-pr-1250">
<p>
Agreed.
</p>
</div>
</div>

<div id="outline-container-pr-1249" class="outline-4">
<h4 id="pr-1249">1249 31 Introduce "for key $k value $v in $map"</h4>
<div class="outline-text-4" id="text-pr-1249">
<ul class="org-ul">
<li>MK: There are some sections that have been moved around so that we can align
the grammar between XPath and XQuery.</li>
<li>MK: We’re a bit looser these days about what it means to compare two QNames,
we used to spell it out very precisely everywhere.</li>
</ul>
</div>
</div>

<div id="outline-container-pr-1244" class="outline-4">
<h4 id="pr-1244">1244 566-partial Rewrite parse-uri</h4>
<div class="outline-text-4" id="text-pr-1244">
<p>
Wait until NW and CG agree that the prose and the tests are consistent and
correct.
</p>
</div>
</div>

<div id="outline-container-pr-1231" class="outline-4">
<h4 id="pr-1231">1231 1193 Parsing Functions: Empty input</h4>
<div class="outline-text-4" id="text-pr-1231">
<p>
Blocked. (The build failed.)
</p>
</div>
</div>

<div id="outline-container-pr-1228" class="outline-4">
<h4 id="pr-1228">1228 – Adding the BLAKE3 hashing algorithm to fn:hash</h4>
<div class="outline-text-4" id="text-pr-1228">
<ul class="org-ul">
<li>MK: We have a responsibility because it will seen as an endorsement.</li>
</ul>

<p>
Wait for WP to provide more background information.
</p>
</div>
</div>

<div id="outline-container-pr-1227" class="outline-4">
<h4 id="pr-1227">1227 150 PR resubmission for fn ranks</h4>
<div class="outline-text-4" id="text-pr-1227">
<ul class="org-ul">
<li>MK: Having two different collations seems impractical. Either that’s
unnecessary or I don’t understand what the function is for.</li>
<li>NW: I took that to mean just what it appears to say, that you have a collation
for the keys and a different collation for the items.</li>
<li>JLO: I thought we said that the collations could be made part of the functions.</li>
</ul>

<p>
Some discussion of how the use case (the football scores) could be done today.
</p>

<ul class="org-ul">
<li>MK: My mental model is you sort by the key and the partition. It’s a variant
of sort that delivers a partitioned result.
<ul class="org-ul">
<li>… So why on earth do you need two collations?</li>
</ul></li>
<li>JLO: Could this be done with <code>fn:sort</code> and <code>fn:partition</code>?</li>
<li>MK: Yes, but you might have to evaluate the sort key twice.</li>
</ul>

<p>
Some discussion of whether that could be avoided by passing in tuples.
</p>

<p>
Some discussion about whether or not the Swedish collation in the language
example is doing anything.
</p>

<p>
Finding anagrams doesn’t appear to require <code>fn:ranks</code>, you could just group on
the constructed character/frequency string.
</p>

<p>
We look briefly at MK’s formulation.
</p>

<ul class="org-ul">
<li>MK: It’s basically sort followed by partition.</li>
<li>EP: The only difference is that you don’t have two collations?</li>
<li>MK: I’m not sure because I haven’t tried to address the boolean parameter
about duplicates.</li>
</ul>

<p>
Some discussion of dealing with duplicates. For simple cases, you could remove
them from the input. Where that wasn’t possible, you’d have to post-process.
</p>

<ul class="org-ul">
<li>MK: What is missing from this formulation that is in DN’s presentation?</li>
<li>JLO: The ability to make distinct values.</li>
<li>MK: Then maybe that should be added to sort?
<ul class="org-ul">
<li>… Why should the way <code>fn:ranks</code> behave differently than <code>fn:sort</code> with
respect to duplicates?</li>
</ul></li>
</ul>

<p>
Unclear how to proceed.
</p>
</div>
</div>

<div id="outline-container-pr-1209" class="outline-4">
<h4 id="pr-1209">1209 1183 Add transient mode and the transient{} expression</h4>
<div class="outline-text-4" id="text-pr-1209">
<p>
MK made the requested change. Needs to be reviewed again.
</p>
</div>
</div>

<div id="outline-container-pr-1185" class="outline-4">
<h4 id="pr-1185">1185 1179 array:values, map:values → array:get, map:get</h4>
<div class="outline-text-4" id="text-pr-1185">
<ul class="org-ul">
<li>MK: Are we sure this isn’t recursive? That <code>?*</code> isn’t defined in terms of <code>map:get()</code>?</li>
</ul>

<p>
No, that’s not the case. (We checked.)
</p>

<ul class="org-ul">
<li>MK: Okay, the design works. But do we like it? It means there’s one function
that does two very different things.</li>
<li>NW: I’m not a huge fan, I think it hinders discoverability. I go looking for
functions to get the keys and values out of a map, I’ll find <code>map:keys</code> but
not <code>map:values</code>. So I have to write that myself? It might be a while before I
thought of having <code>map:get(())</code> do it.</li>
<li>JLO: If I’m using an expression for the argument to <code>map:get</code> and I
accidentally use an empty sequence, I’m going to get wildly different results.
<ul class="org-ul">
<li>… Why is <code>values</code> so bad?</li>
</ul></li>
<li>MK: In many ways I prefer the status quo.</li>
</ul>

<p>
We don’t seem to have consensus for this change.
</p>
</div>
</div>

<div id="outline-container-pr-1181" class="outline-4">
<h4 id="pr-1181">1181 296 Allow default-namespace=##any</h4>
<div class="outline-text-4" id="text-pr-1181">
<ul class="org-ul">
<li>JLO: Why <code>##any</code>?</li>
<li>MK: Following the convention for XSD, using a string with ## in it shouldn’t
be used as a namespace.</li>
</ul>

<p>
In the XSLT spec:
</p>

<ul class="org-ul">
<li>MK: We’ve reverted the change that made element and type namespaces different.
There’s a change here that corrects an error where we failed to do that.</li>
</ul>
</div>
</div>

<div id="outline-container-pr-1062" class="outline-4">
<h4 id="pr-1062">1062 150bis - revised proposal for fn:ranks</h4>
<div class="outline-text-4" id="text-pr-1062">
<p>
See discussion of <code>fn:ranks</code> above.
</p>
</div>
</div>

<div id="outline-container-pr-1015" class="outline-4">
<h4 id="pr-1015">1015 1013 [XSLT] Clarify effect of accumulator capture on non-element nodes</h4>
<div class="outline-text-4" id="text-pr-1015">
<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-956" class="outline-4">
<h4 id="pr-956">0956 850-partial Editorial improvements to parse-html()</h4>
<div class="outline-text-4" id="text-pr-956">
<p>
It appears that there might be a rebasing problem.
</p>

<p>
(MK rebased and pushed.)
</p>

<ul class="org-ul">
<li>NW: Looks fine to me.</li>
</ul>

<p>
Some discussion of the (dis)similarity of JSON parsing mandated by the fact that
unparsed-text must reject non-XML characters.
</p>

<ul class="org-ul">
<li>JLO: Is there an HTML version of <code>html-doc</code>?</li>
<li>MK: No.</li>
</ul>

<p>
Agreement that it should be raised, JLO will do so.
</p>

<p>
ACTION: QT4CG-080-06: NW to investigate the cross-spec reference errors in the build
</p>

<p>
ACTION: QT4CG-080-07: NW to update the build instructions in the README
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-921" class="outline-4">
<h4 id="pr-921">0921 920 Allow xsl:break and xsl:next-iteration within branch of xsl:switch</h4>
<div class="outline-text-4" id="text-pr-921">
<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-871" class="outline-4">
<h4 id="pr-871">0871 Action qt4 cg 027 01 next match</h4>
<div class="outline-text-4" id="text-pr-871">
<p>
ACTION: QT4CG-080-08: MK to work out what happened to his next-match PR
</p>
</div>
</div>


<div id="outline-container-pr-832" class="outline-4">
<h4 id="pr-832">0832 77 Add map:deep-update and array:deep-update</h4>
<div class="outline-text-4" id="text-pr-832">
<ul class="org-ul">
<li><p>
NW: In this note:
</p>

<p>
These rules affect the way an xs:untypedAtomic key value is handled. Given
the shallow lookup expression $A?$x, if $A is an array and $x (after
atomization) is xs:untypedAtomic then the value of $x is converted to an
integer (by virtue of the coercion rules applying to a call on array:get).
With a deep lookup expression $A??$x, by contrast, the semantics are defined
in terms of a map lookup, in which xs:untypedAtomic values are always treated
as strings.
</p>

<p>
Is the reference to <code>array:get</code> correct? (Is the note correct overall?)
</p></li>

<li>NW: <code>fn:selection:path</code> should be <code>fn:selection-path</code></li>
<li>MK: Allowing a sequence in <code>UpdateExpr</code> causes a grammar ambiguity</li>
<li>JLO: <code>ExtendClause</code> is missing from the definition of <code>UpdateClause</code></li>
</ul>

<p>
Some discussion of the ambiguity. For a single clause leave out the curly braces:
</p>

<pre class="example">
  update map $data …
</pre>

<p>
For multiple clauses use the curly braces but precede by <code>do</code>.
</p>

<ul class="org-ul">
<li>MK: Needs another pass, but we’re getting there.
<ul class="org-ul">
<li>… What I quite like about it is that most users won’t need to worry about
most complexities. The syntax is reasonably intuitive. Users will be able to
use the expressions without a deep understanding of the semantics.</li>
</ul></li>
</ul>

<p>
ACTION: QT4CG-080-09: MK to address comments made on PR #832
</p>
</div>
</div>

<div id="outline-container-pr-529" class="outline-4">
<h4 id="pr-529">0529 528 fn:elements-to-maps</h4>
<div class="outline-text-4" id="text-pr-529">
<p>
Needs revision, come back to later.
</p>
</div>
</div>
</div>

<div id="outline-container-closely-related" class="outline-3">
<h3 id="closely-related">Closely related issues</h3>
<div class="outline-text-3" id="text-closely-related">
</div>

<div id="outline-container-variable-arity-dynamic-functions" class="outline-4">
<h4 id="variable-arity-dynamic-functions">Variable arity dynamic functions</h4>
<div class="outline-text-4" id="text-variable-arity-dynamic-functions">
<ul class="org-ul">
<li>158, Support optional parameters on dynamic functions</li>
<li>1136, Defining names for parameters on typed function tests</li>
<li>1175, XPath: Optional parameters in the definition of an inline function</li>
</ul>

<p>
MK observes that the primary obstacle is argument names.
</p>

<ul class="org-ul">
<li>MK: If you declare a function with keyword arguments <code>x</code>, <code>y</code>, <code>z</code>, and you
pass it to a another function as an argument where the expected names are
<code>p</code>, <code>q</code>, and <code>r</code>, what happens?
<ul class="org-ul">
<li>… There have been lots of suggestions that we’d like the names of the
parameters to be a lot more visible. Perhaps starting in the function type.</li>
<li>… The purpose is for the caller of the function to call arguments by name.</li>
<li>… Where does that come from? If it’s in the author’s declaration then you
can’t pass <code>x</code>, <code>y</code>, <code>z</code> if <code>p</code>, <code>q</code>, and <code>r</code>, are expected.</li>
<li>… I don’t want to constrain the caller of the function to use the same name
as the recipient.</li>
<li>… If function coercion changes the names, how does that work.</li>
</ul></li>
</ul>

<p>
Some discussion of what’s different here. It’s about dynamic evaluation, not
whether or not the function was declare statically.
</p>

<p>
(Note to readers: the code examples were constructed on the fly while being
projected. It’s likely that intermediate stages have been lost.)
</p>

<pre class="example">
declare local:add($v1, $v2, $rounding-mode:="normal") {…}
declare local:sub($a, $b) {…}

add(v2:=3, v1:=1)
add(1,3)

let $partial := local:add(1, ?)
$partial(v2=3) (: error :)

declare local:higher-order($op, $f as function(xs:double, xs:double)) {
  $f(2, 3) (: ok :)
  $f(v1=2, v2=3)  (: wat? :)
}

local:higher-order(3, local:add#2)
local:higher-order(3, local:sub#2)

declare local:higher-order($op, $f as function($x as xs:double, $y as xs:double)) {
(:  $f(2, 3) (: ok :)
  $f(x=2, y=3)  (: ok :)

  let $g := $f(y=?, x=3)
:)
  $op =&gt; $f(x=2)
}

add(v2=7, v1=14)
</pre>

<ul class="org-ul">
<li>MK: Keyword arguments allow you to change the argument order in dynamic function calls.
<ul class="org-ul">
<li>… Optional parameters can only be called with keywords, and keyword
parameters must be optional. They are always implicitly passed through by
names.</li>
<li>… If you declare a function with an optional, keyword based <code>$collation</code>
parameter, it passes through silently and can be called by its original
name.</li>
</ul></li>
<li>JLO: But then you can’t ask “does this function have a collation argument?”</li>
<li>MK: You could provide an interogative to ask.
<ul class="org-ul">
<li>… But then you can’t pass an option statically because you can’t know
statically!</li>
</ul></li>
<li>MK: It’s much more like passing an options map where the names are dynamic.</li>
</ul>

<pre class="example">
declare local:add($v1, $v2, $rounding-mode:="normal") { ... }
declare local:sub($v1, $v2) { ... }

declare local:higher-order($op, $f as function($x as xs:double, $y as xs:double)) {
  $f(1, 2)
  $f(1, 2, rounding-mode:="special")
}

local:higher-order(3, local:add#2) (: function works :)
local:higher-order(3, local:sub#2) (: dynamic error in the second call to $f in higher-orde: :)
</pre>

<ul class="org-ul">
<li>MK: Instead of binding $rounding-mode to it’s default when you create the
closure, you allow it to be passed through by name.</li>

<li>NW: I don’t think we’re making improvements…</li>
</ul>

<p>
Looking at the example from issue #1175:
</p>

<p>
Let’s extend it so that data flow analysis won’t answer the question “is
increment correct”?
</p>

<pre class="example">
let $incr := if ($random)
             then fn($arg1, $increment := 1) {$arg1 + $increment }
             else fn($arg1, $decrement := 1) {$arg1 - $decrement }
 return
  (
   $incr(5),
   $incr(5, increment := 2),
   $incr(5, increment := 3)
 )
</pre>

<p>
Presumably this raises a dynamic error when <code>$random</code> is false. It’s impossible
to know statically what will happen.
</p>

<ul class="org-ul">
<li>MK: It’s very much like an options argument on every function and the binding
of keyword parameters was creating a binding for that option. In which case it
might not be an error. You’d just be supplying an option the function doesn’t use.</li>
</ul>

<p>
Consensus in the room is that keyword arguments on dynamic function calls
doesn’t work.
</p>
</div>
</div>

<div id="outline-container-terminology" class="outline-4">
<h4 id="terminology">Terminology: map and array functions</h4>
<div class="outline-text-4" id="text-terminology">
<ul class="org-ul">
<li>1169, Maps &amp; Arrays: Consistency &amp; Terminology</li>
<li>1179, Editorial: `array:values`, `map:values`</li>
</ul>
</div>
</div>

<div id="outline-container-function-name-consistency" class="outline-4">
<h4 id="function-name-consistency">Terminology: parse functions</h4>
<div class="outline-text-4" id="text-function-name-consistency">
<ul class="org-ul">
<li>748, Parse functions: consistency</li>
<li>1021, Extend `fn:doc`, `fn:collection` and `fn:uri-collection` with options maps</li>
<li>1252, Add a new function fn:html-doc</li>
</ul>
</div>
</div>

<div id="outline-container-transiency" class="outline-4">
<h4 id="transiency">Transiency</h4>
<div class="outline-text-4" id="text-transiency">
<ul class="org-ul">
<li>285, Stability of collections</li>
<li>1183, transient() - a function to make functions nondeterministic</li>
<li>1209, 1183 Add transient mode and the transient{} expression</li>
</ul>
</div>
</div>
</div>


<div id="outline-container-h-872DD948-C3D3-42C0-9958-B67FD5CA55B7" class="outline-3">
<h3 id="h-872DD948-C3D3-42C0-9958-B67FD5CA55B7">Planning?</h3>
<div class="outline-text-3" id="text-h-872DD948-C3D3-42C0-9958-B67FD5CA55B7">
<ul class="org-ul">
<li>When will we be done?
<ul class="org-ul">
<li>Unclear. This is probably the first step.</li>
</ul></li>
<li>What will we publish?
<ul class="org-ul">
<li>W3C community group final reports</li>
</ul></li>
<li>Do we want an umbrella page?
<ul class="org-ul">
<li>Yes, probably</li>
</ul></li>
<li>Do we want to change the name of the community group?
<ul class="org-ul">
<li>XSLT and XQuery Extensions Community Group</li>
<li>Update the group abstract</li>
</ul></li>
</ul>

<p>
ACTION: QT4CG-080-10: NW to find out if we can change the community group name
</p>

<ul class="org-ul">
<li>Do we need to manage completion of the test suite?
<ul class="org-ul">
<li>Probably. Even if the W3C doesn’t require it, we want to know we have good
coverage and a couple of implementations of every feature.</li>
</ul></li>
<li>We’ll do all the specifications at once</li>
<li>Do we have a contact at the W3C?
<ul class="org-ul">
<li>Not a specific individual, but NW has found sysreq and webreq to be
responsive.</li>
</ul></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-wrap-up-2" class="outline-2">
<h2 id="wrap-up-2"><span class="section-number-2">4.</span> End-of-day wrapup</h2>
<div class="outline-text-2" id="text-wrap-up-2">
</div>

<div id="outline-container-roll-call-wrapup" class="outline-3">
<h3 id="roll-call-wrapup"><span class="section-number-3">4.1.</span> Roll call <code>[4/4]</code></h3>
<div class="outline-text-3" id="text-roll-call-wrapup">
<p>
Face-to-face participants and:
</p>

<ul class="org-ul">
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="on"><code>[X]</code> John Lumley (JLY)</li>
<li class="on"><code>[X]</code> Dimitre Novatchev (DN)</li>
<li class="on"><code>[X]</code> C. M. Sperberg-McQueen (MSM)</li>
</ul>
</div>
</div>

<div id="outline-container-wrap-up-notes-2" class="outline-3">
<h3 id="wrap-up-notes-2"><span class="section-number-3">4.2.</span> Notes</h3>
<div class="outline-text-3" id="text-wrap-up-notes-2">
<p>
Some discussion of serializing JSON. Would implementing json-lines help with the
case of serializing a top-level sequence of JSON items?
</p>

<ul class="org-ul">
<li>CG: Would using item separator help?</li>
<li>MK: Item separator is incredibly troublesome. The introduction of item
separator changes the boundary between what the query outputs and what the
serializer does. We certainly found it disruptive in implementation terms.</li>
</ul>

<p>
Some discussion of how this might interact with other options and whether you’d
get multiple newlines sometimes?
</p>
</div>

<div id="outline-container-pr-1181-2" class="outline-4">
<h4 id="pr-1181-2"><span class="section-number-4">4.2.1.</span> 1181 discussion</h4>
<div class="outline-text-4" id="text-pr-1181-2">
<p>
CG points us to <a href="https://github.com/qt4cg/qtspecs/pull/1181#pullrequestreview-2035405118">his comment</a> about using an <code>any</code> keyword in XQuery.
</p>

<ul class="org-ul">
<li>MK: I don’t feel strongly about it one way or the other.</li>

<li>MK: We’re very fuzzy about what strings are acceptable as namespaces.</li>
</ul>
</div>
</div>

<div id="outline-container-h-040021CE-C4E8-4199-B05E-0C30C26C223C" class="outline-4">
<h4 id="h-040021CE-C4E8-4199-B05E-0C30C26C223C"><span class="section-number-4">4.2.2.</span> Variadic functions</h4>
<div class="outline-text-4" id="text-h-040021CE-C4E8-4199-B05E-0C30C26C223C">
<p>
DN asserts that we need support for map-variadic functions.
</p>

<p>
MK says that the it isn’t the case because function items can’t be variadic, so
you can’t pass them to apply.
</p>

<ul class="org-ul">
<li>DN: Right now, I think <code>fn:apply</code> can take any function. But that’s not the case?</li>
<li>MK: No, at the moment, you can pass any function item to <code>fn:apply</code> and
<i>function items</i> can’t be variadic currently!</li>
<li>DN: I think we see the problem here, we need to do something about it.</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-thank-you-jirka" class="outline-2">
<h2 id="thank-you-jirka"><span class="section-number-2">5.</span> Thank our host</h2>
<div class="outline-text-2" id="text-thank-you-jirka">
<p>
Thank you, Jirka.
</p>
</div>
</div>

<div id="outline-container-any-other-business" class="outline-2">
<h2 id="any-other-business"><span class="section-number-2">6.</span> Any other business</h2>
<div class="outline-text-2" id="text-any-other-business">
<p>
None heard.
</p>
</div>
</div>

<div id="outline-container-adjourned" class="outline-2">
<h2 id="adjourned"><span class="section-number-2">7.</span> Adjourned</h2>
<div class="outline-text-2" id="text-adjourned">
</div>
</div>
</div>
</body>
</html>
