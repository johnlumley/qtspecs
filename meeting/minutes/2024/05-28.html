<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 079 Minutes 2024-05-28</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
<link rel="shortcut icon" href="/img/QT4-64.png" />
<link rel="apple-touch-icon" sizes="64x64" href="/img/QT4-64.png" type="image/png" />
<link rel="apple-touch-icon" sizes="76x76" href="/img/QT4-76.png" type="image/png" />
<link rel="apple-touch-icon" sizes="120x120" href="/img/QT4-120.png" type="image/png" />
<link rel="apple-touch-icon" sizes="152x152" href="/img/QT4-152.png" type="image/png" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 079 Minutes 2024-05-28</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes">Minutes</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[0/6]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[9/12]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a>
<ul>
<li><a href="#so-far">1.2.1. Status so far…</a></li>
</ul>
</li>
<li><a href="#approve-minutes">1.3. Approve minutes of the previous meeting</a></li>
<li><a href="#next-meeting">1.4. Next meeting</a></li>
<li><a href="#open-actions">1.5. Review of open action items <code>[3/8]</code></a></li>
<li><a href="#open-pull-requests">1.6. Review of open pull requests and issues</a>
<ul>
<li><a href="#blocked">1.6.1. Blocked</a></li>
<li><a href="#merge-without-discussion">1.6.2. Merge without discussion</a></li>
<li><a href="#close-without-action">1.6.3. Close without action</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#technical-agenda">2. Technical Agenda</a>
<ul>
<li><a href="#pr-1237">2.1. PR #1237: 1232 consistent rendition of rfc2119 terms</a></li>
<li><a href="#pr-1228">2.2. PR #1228: Adding the BLAKE3 hashing algorithm to fn:hash</a></li>
<li><a href="#pr-1062">2.3. PR #1062/#1027/#1227: fn:ranks</a></li>
<li><a href="#pr-1108">2.4. PR #1108: 566-partial Describe a less aggressive %-encoding for fn:build-uri</a></li>
<li><a href="#pr-1185">2.5. PR #1185:  1179 array:values, map:values → array:get, map:get</a></li>
<li><a href="#iss-850">2.6. Issue #850: fn:parse-html: Finalization</a></li>
</ul>
</li>
<li><a href="#any-other-business">3. Any other business</a></li>
<li><a href="#adjourned">4. Adjourned</a></li>
</ul>
</div>
</div>
<p>
<a href="../">Meeting index</a> / <a href="https://qt4cg.org">QT4CG.org</a> / <a href="https://qt4cg.org/dashboard">Dashboard</a> / <a href="https://github.com/qt4cg/qtspecs/issues">GH Issues</a> / <a href="https://github.com/qt4cg/qtspecs/pulls">GH Pull Requests</a>
</p>

<div id="outline-container-minutes" class="outline-2">
<h2 id="minutes">Minutes</h2>
<div class="outline-text-2" id="text-minutes">
<p>
Approved <a href="../2024/06-04.html">at meeting 080</a> on 4 June 2024.
</p>
</div>
</div>

<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[0/6]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-063-06: MK to consider refactoring the declare item type syntax to something like declare record</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-077-03: MK to add a note about document order across documents</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-077-04: MK to review inconsistencies discovered in review of #1117</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-078-01: MK to make the default for normalize-newlines backwards compatible.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-078-02: MK to update the prose of <code>transient{}</code> to use the word “should”.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-079-01: WP to seek expert advice on hashing functions.</li>
</ul>
</div>
</div>

<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>

<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[9/12]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<p>
MK gives regrets. JLY gives regrets for this week and next.
</p>

<ul class="org-ul">
<li class="on"><code>[X]</code> Reece Dunn (RD)</li>
<li class="on"><code>[X]</code> Sasha Firsov (SF)</li>
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="on"><code>[X]</code> Joel Kalvesmaki (JK)</li>
<li class="off"><code>[&#xa0;]</code> Michael Kay (MK)</li>
<li class="off"><code>[&#xa0;]</code> Juri Leino (JLO)</li>
<li class="off"><code>[&#xa0;]</code> John Lumley (JLY)</li>
<li class="on"><code>[X]</code> Dimitre Novatchev (DN)</li>
<li class="on"><code>[X]</code> Wendell Piez (WP)</li>
<li class="on"><code>[X]</code> Ed Porter (EP)</li>
<li class="on"><code>[X]</code> C. M. Sperberg-McQueen (MSM)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW). <i>Scribe</i>. <i>Chair</i>.</li>
</ul>
</div>
</div>

<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2024/05-28.html">the agenda</a>.
</p>

<p>
Accepted.
</p>
</div>

<div id="outline-container-so-far" class="outline-4">
<h4 id="so-far"><span class="section-number-4">1.2.1.</span> Status so far…</h4>
<div class="outline-text-4" id="text-so-far">

<div id="org1996a1e" class="figure">
<p><img src="./issues-open-2024-05-28.png" alt="issues-open-2024-05-28.png" />
</p>
<p><span class="figure-number">Figure 1: </span>“Burn down” chart on open issues</p>
</div>


<div id="org39b4e6f" class="figure">
<p><img src="./issues-by-spec-2024-05-28.png" alt="issues-by-spec-2024-05-28.png" />
</p>
<p><span class="figure-number">Figure 2: </span>Open issues by specification</p>
</div>


<div id="orgd133330" class="figure">
<p><img src="./issues-by-type-2024-05-28.png" alt="issues-by-type-2024-05-28.png" />
</p>
<p><span class="figure-number">Figure 3: </span>Open issues by type</p>
</div>
</div>
</div>
</div>

<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.3.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2024/05-21.html">the minutes of the previous meeting</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.4.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
The next meeting is the face-to-face <a href="../../agenda/2024/06-04.html">the face-to-face meeting</a> on 4 and 5 June in Prague.
</p>
</div>
</div>

<div id="outline-container-open-actions" class="outline-3">
<h3 id="open-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[3/8]</code></h3>
<div class="outline-text-3" id="text-open-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-063-06: MK to consider refactoring the declare item type syntax to something like declare record</li>
<li class="on"><code>[X]</code> QT4CG-071-06: NW to clarify the cases that are distinguished by the leading empty string in path segments</li>
<li class="on"><code>[X]</code> QT4CG-072-03: NW to clarify the round-tripping of URIs</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-077-03: MK to add a note about document order across documents</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-077-04: MK to review inconsistencies discovered in review of #1117</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-078-01: MK to make the default for normalize-newlines backwards compatible.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-078-02: MK to update the prose of <code>transient{}</code> to use the word “should”.</li>
</ul>
</div>
</div>

<div id="outline-container-open-pull-requests" class="outline-3">
<h3 id="open-pull-requests"><span class="section-number-3">1.6.</span> Review of open pull requests and issues</h3>
<div class="outline-text-3" id="text-open-pull-requests">
</div>

<div id="outline-container-blocked" class="outline-4">
<h4 id="blocked"><span class="section-number-4">1.6.1.</span> Blocked</h4>
<div class="outline-text-4" id="text-blocked">
<p>
The following PRs are open but have merge conflicts or comments which
suggest they aren’t ready for action.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1062">#1062</a>: 150bis - revised proposal for fn:ranks</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-956">#956</a>: 850-partial Editorial improvements to parse-html()</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-921">#921</a>: 920 Allow xsl:break and xsl:next-iteration within branch of xsl:switch</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-871">#871</a>: Action qt4 cg 027 01 next match</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-832">#832</a>: 77 Add map:deep-update and array:deep-update</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-529">#529</a>: 528 fn:elements-to-maps</li>
</ul>
</div>
</div>

<div id="outline-container-merge-without-discussion" class="outline-4">
<h4 id="merge-without-discussion"><span class="section-number-4">1.6.2.</span> Merge without discussion</h4>
<div class="outline-text-4" id="text-merge-without-discussion">
<p>
The following PRs are editorial, small, or otherwise appeared to be
uncontroversial when the agenda was prepared. The chairs propose that
these can be merged without discussion. If you think discussion is
necessary, please say so.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1243">#1243</a>: Change required result of system-property(&#x2026;version)</li>
</ul>

<p>
(PR <a href="https://qt4cg.org/dashboard/#pr-1233">#1233</a> was withdrawn in email discussion after the agenda was published.)
</p>

<p>
Proposal: merge without discussion.
</p>

<p>
Approved.
</p>
</div>
</div>

<div id="outline-container-close-without-action" class="outline-4">
<h4 id="close-without-action"><span class="section-number-4">1.6.3.</span> Close without action</h4>
<div class="outline-text-4" id="text-close-without-action">
<p>
It has been proposed that the following issues be closed without action.
If you think discussion is necessary, please say so.
</p>

<ul class="org-ul">
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/1000">#1000</a>: XQFO Code in the Rules sections</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/908">#908</a>: Function identity: documentation, nondeterminism</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/894">#894</a>: Errors in forming function items</li>
</ul>

<p>
Proposal: close without further action.
</p>

<p>
Approved.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">2.</span> Technical Agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
</div>

<div id="outline-container-pr-1237" class="outline-3">
<h3 id="pr-1237"><span class="section-number-3">2.1.</span> PR #1237: 1232 consistent rendition of rfc2119 terms</h3>
<div class="outline-text-3" id="text-pr-1237">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1237">#1237</a>
</p>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-1228" class="outline-3">
<h3 id="pr-1228"><span class="section-number-3">2.2.</span> PR #1228: Adding the BLAKE3 hashing algorithm to fn:hash</h3>
<div class="outline-text-3" id="text-pr-1228">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1228">#1228</a>
</p>

<p>
Straw poll: add BLAKE3? In favor: 4, opposed: 1.
</p>

<ul class="org-ul">
<li>CG: The question is whether to do exactly this algorithm and not others?</li>
<li>DN: My proposal should be regarded in a more general sense. There are faster
algorithms, but many quality and security issues. This is just my opinion for
a modern, better algorithm. Even if we merge this, let’s consider if we want
to have at least one modern algorithm. It doesn’t have to be this one.</li>
<li>RD: I wonder if it would be worth having a review of hasing algorithms
implemented in different languages. XQuery and XSLT processors are implemented
in many languages. Rather than making a specific decision on this now, say
“these are the common algorithms that are readily available.” That lets us
choose a suitable set or required and/or recommended algorithms.</li>
<li>MSM: What I’m hearing is that we should think generally and not just about
hashing algorithms but also the criteria by which we choose. I don’t have any
suggestions. A systematic decision would be better than a casual one. I think
that means someone needs to volunteer to do research.</li>
<li>RD: I wonder if it might make sense to add additional functions: one that’s a
default hash that returns the name of a sensible default hashing algorithm
recommended by the implementor. And maybe an available-algorithms function.</li>
<li>DN: I heard what RD said, but I think we’re deviating far away from the
original proposal. I think we just need one modern algorithm.
<ul class="org-ul">
<li>… What MSM said is true, it would really be great if someone could do some
research.</li>
</ul></li>
<li>WP: I agree with everything I’ve heard so far. Managing the list is a hard
problem. I feel a little on the hook because I work with the sorts of people
who could answer the question.</li>
</ul>

<p>
ACTION: QT4CG-079-01: WP to seek expert advice on hashing functions.
</p>

<ul class="org-ul">
<li>CG: One question regarding the current proposal: this is BLAKE3 without the
defaults. What about supporting keyed hashes?</li>
<li>DN: If we get expert advice, hopefully that question will be answered.</li>
<li>NW: I implemented all of the BLAKE3 options to amuse myself one evening; I</li>
</ul>
<p>
j  think it wouldn’t be easy with the current function signature.
</p>
<ul class="org-ul">
<li>JK: I like the idea RD has of a hashes-available function.</li>
<li>RD: I just checked and Java has an API that supports testing what algorithms
are available.</li>
</ul>

<p>
Proposal: leave this until we hear back from WP.
</p>
</div>
</div>

<div id="outline-container-pr-1062" class="outline-3">
<h3 id="pr-1062"><span class="section-number-3">2.3.</span> PR #1062/#1027/#1227: fn:ranks</h3>
<div class="outline-text-3" id="text-pr-1062">
<ul class="org-ul">
<li>See PR <a href="https://qt4cg.org/dashboard/#pr-1227">#1227</a></li>
<li>See PR <a href="https://qt4cg.org/dashboard/#pr-1062">#1062</a></li>
<li>See PR <a href="https://qt4cg.org/dashboard/#pr-1027">#1027</a></li>

<li>DN: I’m a little reluctant to talk in the absence of MK. I just wanted to say
that I don’t think the proposals are in that much conflict. With two
proposals, we should try to synthesize what’s best between them.
<ul class="org-ul">
<li>… My proposal is a radical simplification, just a single key function. There
was a long discussion and I proved it was possible.</li>
<li>… I am not insisting on a key function, so we can use the approach that MK
took.</li>
<li>… What I think is missing in MK’s proposal is an additional argument that by
default only creates distinct items in every rank.</li>
<li>… This is a new function, so we could reorder the arguments so that the
collation sequence is not so awkward to use.</li>
</ul></li>
<li>NW: Can you attempt to work with MK to come up with a unified proposal.</li>
</ul>

<p>
Leave until after XML Prague. DN will attempt to work with MK.
</p>
</div>
</div>

<div id="outline-container-pr-1108" class="outline-3">
<h3 id="pr-1108"><span class="section-number-3">2.4.</span> PR #1108: 566-partial Describe a less aggressive %-encoding for fn:build-uri</h3>
<div class="outline-text-3" id="text-pr-1108">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1108">#1108</a>
</p>

<p>
NW attempts to describe the PR.
</p>

<ul class="org-ul">
<li>RD: Do we want to specify that the path segment characters are encoded
exclusively or do we want implementors to be allowed to encode additional
ones.</li>
<li>NW: I think it would be better if we had a single algorithm for all implementations.</li>
<li>CG: Did you have time to look at the test cases?</li>
<li>NW: I did, but I don’t have a PR yet.</li>
</ul>

<p>
Proposal: merge this PR.
</p>

<p>
Accepted.
</p>

<p>
NW describes his recent rewrite of <code>fn:parse-uri</code> for discussion in the future.
</p>
</div>
</div>

<div id="outline-container-pr-1185" class="outline-3">
<h3 id="pr-1185"><span class="section-number-3">2.5.</span> PR #1185:  1179 array:values, map:values → array:get, map:get</h3>
<div class="outline-text-3" id="text-pr-1185">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1185">#1185</a>
</p>

<p>
CG: Introduced merge conflicts; looking at <a href="https://github.com/qt4cg/qtspecs/pull/1185#issuecomment-2101774348">the issue</a> instead.
</p>

<ul class="org-ul">
<li>CG: We could drop the <code>array-values</code> and <code>map-values</code> functions and just use
<code>array:get</code> and <code>map:get</code>.
<ul class="org-ul">
<li>… We could extend the functions to get more functionality by making the arguments optional.</li>
</ul></li>
</ul>

<p>
Some discussion of how wildcard arguments and the function syntax intract.
</p>

<ul class="org-ul">
<li>MSM: I guess it’s not quite orthogonality, but more user expectations, should
we consider: would it be better to allow the functional form to accept an
argument of <code>*</code> just for parallelism?</li>
<li>CG: I think if the <code>*</code> is a string, it’ll already give that value.</li>
<li>RD: I was going to suggest updating the XPath spec, but I see it’s been
updated to use the pairs accessor and things so we don’t need to update it to
say <code>map?*</code> is equivalent to <code>map:get()</code> although it may be worth adding that
in a note in XPath.</li>
</ul>

<p>
Some discussion of the goal: it’s to get a flat sequence.
</p>

<ul class="org-ul">
<li>DN: Do we have a good way to represent the unflattened members or values?
We’re losing information and not considering the question of getting the data
without loss. I think that the operator MK introduced is sufficient.</li>
<li>CG: I’m not sure how that’s related to this issue. How would you use the new
syntax here?</li>
</ul>

<p>
Some question if there was confusion about the question.
</p>

<ul class="org-ul">
<li>RD: With the new lookup modifier, the items modifier returns the flat list.
Pairs returns the pairs and values returns a structured sequence of arrays to
preserve the grouping. You can use those.
<ul class="org-ul">
<li>… If you want specific values, you can specify those in a parenthesized
sequence to the lookup operator.</li>
</ul></li>
<li>CG: Yes.</li>
<li>DN: Maybe we need more examples?</li>
<li>RD: There are examples in the postfix lookup section.</li>
<li>DN: But I mean for these functions. We need to do a better job of grouping
things together. We should have a single section on records, for example.</li>
<li>CG: I think the best way is to create a separate issue on that.
<ul class="org-ul">
<li>… My hope was to make it easier with these two functions.</li>
</ul></li>
<li>NW: I think reducing the number of functions is good.</li>
</ul>

<p>
CG agrees to finalize the PR after the meeting.
</p>
</div>
</div>

<div id="outline-container-iss-850" class="outline-3">
<h3 id="iss-850"><span class="section-number-3">2.6.</span> Issue #850: fn:parse-html: Finalization</h3>
<div class="outline-text-3" id="text-iss-850">
<p>
See issue <a href="https://github.com/qt4cg/qtspecs/issues/850">#850</a>
</p>

<ul class="org-ul">
<li>RD: MK has opened a PR that needs sorting. I was planning on removing most of the
supported HTML variants and just saying use HTML 5.
<ul class="org-ul">
<li>… We can just say HTML 5 or later.</li>
<li>… I’ll work on simplifying the API arguments.</li>
</ul></li>
</ul>

<p>
RD to perhaps work with MK on the open PR.
</p>
</div>
</div>
</div>

<div id="outline-container-any-other-business" class="outline-2">
<h2 id="any-other-business"><span class="section-number-2">3.</span> Any other business</h2>
<div class="outline-text-2" id="text-any-other-business">
<p>
None heard.
</p>
</div>
</div>

<div id="outline-container-adjourned" class="outline-2">
<h2 id="adjourned"><span class="section-number-2">4.</span> Adjourned</h2>
<div class="outline-text-2" id="text-adjourned">
</div>
</div>
</div>
</body>
</html>
