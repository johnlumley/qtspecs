<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 099 Minutes 2024-11-19</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
<link rel="shortcut icon" href="/img/QT4-64.png" />
<link rel="apple-touch-icon" sizes="64x64" href="/img/QT4-64.png" type="image/png" />
<link rel="apple-touch-icon" sizes="76x76" href="/img/QT4-76.png" type="image/png" />
<link rel="apple-touch-icon" sizes="120x120" href="/img/QT4-120.png" type="image/png" />
<link rel="apple-touch-icon" sizes="152x152" href="/img/QT4-152.png" type="image/png" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 099 Minutes 2024-11-19</h1>
<p>
<a href="../">Meeting index</a> / <a href="https://qt4cg.org">QT4CG.org</a> / <a href="https://qt4cg.org/dashboard">Dashboard</a> / <a href="https://github.com/qt4cg/qtspecs/issues">GH Issues</a> / <a href="https://github.com/qt4cg/qtspecs/pulls">GH Pull Requests</a>
</p>

<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes">Minutes</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[0/9]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[10/12]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a>
<ul>
<li><a href="#so-far">1.2.1. Status so far…</a></li>
</ul>
</li>
<li><a href="#approve-minutes">1.3. Approve minutes of the previous meeting</a></li>
<li><a href="#next-meeting">1.4. Next meeting</a></li>
<li><a href="#open-actions">1.5. Review of open action items <code>[1/9]</code></a></li>
<li><a href="#open-pull-requests">1.6. Review of open pull requests and issues</a>
<ul>
<li><a href="#blocked">1.6.1. Blocked</a></li>
<li><a href="#merge-without-discussion">1.6.2. Merge without discussion</a></li>
<li><a href="#close-without-action">1.6.3. Close without action</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#technical-agenda">2. Technical agenda</a>
<ul>
<li><a href="#pr-1575">2.1. PR #1575: 528bis element to map</a></li>
<li><a href="#pr-1577">2.2. PR #1577: 1491 Empty record types</a></li>
</ul>
</li>
<li><a href="#any-other-business">3. Any other business</a></li>
<li><a href="#adjourned">4. Adjourned</a></li>
</ul>
</div>
</div>

<div id="outline-container-minutes" class="outline-2">
<h2 id="minutes">Minutes</h2>
<div class="outline-text-2" id="text-minutes">
<p>
Approved <a href="../2024/11-26.html">at meeting 100</a> on 26 November 2024.
</p>
</div>
</div>

<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[0/9]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-080-07: NW to update the build instructions in the README</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-082-02: DN to work with MK to come to agreement on the fn:ranks proposal</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-088-01: NW to consider how best to add a dedication to MSM.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-088-04: [Someone] needs to update the processing model diagram needs vis-a-vis the static typing feature</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-089-01: CG to draft a PR that attempts to resolve the operators described in #755 to a smaller number of orthogonal choices.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-097-02: MK to make the XSD schema component references into links to XSD</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-097-03: DN to proposal an axis for accessing the siblings of a node.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-098-02: NW to look at the XSL stylesheet for XSD, <a href="https://github.com/qt4cg/qtspecs/issues/374">#374</a>.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-099-01: MK to add a default layout option for elements-to-map.</li>
</ul>
</div>
</div>

<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>

<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[10/12]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<p>
DB gives regrets.
</p>

<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> David J Birnbaum (DB)</li>
<li class="on"><code>[X]</code> Reece Dunn (RD)</li>
<li class="off"><code>[&#xa0;]</code> Sasha Firsov (SF)</li>
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="on"><code>[X]</code> Joel Kalvesmaki (JK)</li>
<li class="on"><code>[X]</code> Michael Kay (MK)</li>
<li class="on"><code>[X]</code> Juri Leino (JLO)</li>
<li class="on"><code>[X]</code> John Lumley (JWL)</li>
<li class="on"><code>[X]</code> Dimitre Novatchev (DN)</li>
<li class="on"><code>[X]</code> Wendell Piez (WP)</li>
<li class="on"><code>[X]</code> Ed Porter (EP)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW). <i>Scribe</i>. <i>Chair</i>.</li>
</ul>
</div>
</div>

<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2024/11-19.html">the agenda</a>.
</p>

<p>
Accepted.
</p>
</div>

<div id="outline-container-so-far" class="outline-4">
<h4 id="so-far"><span class="section-number-4">1.2.1.</span> Status so far…</h4>
<div class="outline-text-4" id="text-so-far">
<p>
These charts have been adjusted so they reflect the preceding six months of work.
</p>


<div id="orgce515b1" class="figure">
<p><img src="./issues-open-2024-11-19.png" alt="issues-open-2024-11-19.png" />
</p>
<p><span class="figure-number">Figure 1: </span>“Burn down” chart on open issues</p>
</div>


<div id="orgdedde15" class="figure">
<p><img src="./issues-by-spec-2024-11-19.png" alt="issues-by-spec-2024-11-19.png" />
</p>
<p><span class="figure-number">Figure 2: </span>Open issues by specification</p>
</div>


<div id="orge699635" class="figure">
<p><img src="./issues-by-type-2024-11-19.png" alt="issues-by-type-2024-11-19.png" />
</p>
<p><span class="figure-number">Figure 3: </span>Open issues by type</p>
</div>
</div>
</div>
</div>

<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.3.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2024/11-12.html">the minutes of the previous meeting</a>.
</p>

<ul class="org-ul">
<li>JLO: The last few paragraphs should refer to EXPath and EXQuery, not XPath and XQuery</li>
</ul>

<p>
Accepted, as amended.
</p>
</div>
</div>

<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.4.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
This next meeting is planned for 26 November.
</p>

<p>
DB, JLO gives regrets for 26 November.
</p>

<p>
The CG does not plan to meet on 24 or 31 December.
</p>
</div>
</div>

<div id="outline-container-open-actions" class="outline-3">
<h3 id="open-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[1/9]</code></h3>
<div class="outline-text-3" id="text-open-actions">
<p>
(Items marked [X] are believed to have been closed via email before
this agenda was posted.)
</p>

<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-080-07: NW to update the build instructions in the README</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-082-02: DN to work with MK to come to agreement on the fn:ranks proposal</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-088-01: NW to consider how best to add a dedication to MSM.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-088-04: [Someone] needs to update the processing model diagram needs vis-a-vis the static typing feature</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-089-01: CG to draft a PR that attempts to resolve the operators described in #755 to a smaller number of orthogonal choices.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-097-02: MK to make the XSD schema component references into links to XSD</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-097-03: DN to proposal an axis for accessing the siblings of a node.</li>
<li class="on"><code>[X]</code> QT4CG-098-01: NW to update the Relax NG grammar for XSLT 4.0</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-098-02: NW to look at the XSL stylesheet for XSD, <a href="https://github.com/qt4cg/qtspecs/issues/374">#374</a>.</li>
</ul>
</div>
</div>

<div id="outline-container-open-pull-requests" class="outline-3">
<h3 id="open-pull-requests"><span class="section-number-3">1.6.</span> Review of open pull requests and issues</h3>
<div class="outline-text-3" id="text-open-pull-requests">
</div>

<div id="outline-container-blocked" class="outline-4">
<h4 id="blocked"><span class="section-number-4">1.6.1.</span> Blocked</h4>
<div class="outline-text-4" id="text-blocked">
<p>
The following PRs are open but have merge conflicts or comments which
suggest they aren’t ready for action.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1296">#1296</a>: 982 Rewrite of scan-left and scan-right</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1283">#1283</a>: 77b Update expressions</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1062">#1062</a>: 150bis revised proposal for fn:ranks</li>
</ul>
</div>
</div>

<div id="outline-container-merge-without-discussion" class="outline-4">
<h4 id="merge-without-discussion"><span class="section-number-4">1.6.2.</span> Merge without discussion</h4>
<div class="outline-text-4" id="text-merge-without-discussion">
<p>
The following PRs are editorial, small, or otherwise appeared to be
uncontroversial when the agenda was prepared. The chairs propose that
these can be merged without discussion. If you think discussion is
necessary, please say so.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1585">#1585</a>: Update RELAX NG grammar for XSLT</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1582">#1582</a>: 767 Fix reference to HTML5 spec</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1581">#1581</a>: 69 Add default for current-merge-group $source</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1580">#1580</a>: 1462 Change default for deep-equal options</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1578">#1578</a>: 1493 Expand the rules for handling numbers in xml-to-json</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1576">#1576</a>: 1574 Mark some productions as XQuery only</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1573">#1573</a>: 1552 Change fn:siblings to include self in all cases</li>
</ul>

<p>
Proposal: merge these PRs without discussion.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-close-without-action" class="outline-4">
<h4 id="close-without-action"><span class="section-number-4">1.6.3.</span> Close without action</h4>
<div class="outline-text-4" id="text-close-without-action">
<p>
It has been proposed that the following issues be closed without action.
If you think discussion is necessary, please say so.
</p>

<ul class="org-ul">
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/1349">#1349</a>: Nothing</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/421">#421</a>: Make sure the build system syntax checks the syntax of examples</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/92">#92</a>: Simplify rule for attribute values on Extension Instructions used to invoke named templates</li>
</ul>

<p>
Proposal: close these issues without further action.
</p>

<p>
Accepted.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">2.</span> Technical agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
</div>

<div id="outline-container-pr-1575" class="outline-3">
<h3 id="pr-1575"><span class="section-number-3">2.1.</span> PR #1575: 528bis element to map</h3>
<div class="outline-text-3" id="text-pr-1575">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1575">#1575</a>.
</p>

<p>
MK introduces the PR; there was substantial discussion last time, this is an
attempt to apply comments from that discussion to the current spec.
</p>

<ul class="org-ul">
<li>MK: The requirement is to convert XML to JSON in a way that can handle any
XML, unlike the current function that’s limited to a specific format.
<ul class="org-ul">
<li>… It now generates a map that can be serialized as JSON</li>
<li>… The resulting JSON should be intuitive and easy to use</li>
<li>… And it should be consistent and stable; which is a conflicting requirement.</li>
<li>… A great deal of the design about how to reconcile that conflict.</li>
<li>… The conversion is not lossless and is not streamable.</li>
</ul></li>
<li>MK: We start with a set of patterns and their equivalents in JSON.
<ul class="org-ul">
<li>… The patterns are called “layouts”.</li>
<li>… The re are four different ways to select a layout:
<ol class="org-ol">
<li>Explicitly in an options parameter</li>
<li>Inferred from the schema-annotation (if it has one)</li>
<li>Based on the properties of the actual element instance</li>
<li>If <code>uniform</code> is true, all elements with the same name get the same
mapping. (This requires a pre-scan of the data.)</li>
</ol></li>
</ul></li>
<li>MK: The notation for layouts is introduced.</li>
<li>MK: The mapping is designed to be error free; if you select a layout that
doesn’t match your data, you’ll still get something back.</li>
</ul>

<p>
MK walks through the layouts in the PR.
</p>

<ul class="org-ul">
<li>MK: I’ve tried it on a bunch of examples, and the default results are pretty
good.</li>

<li>JWL: Are there wildcard possibilities in the layout map?</li>
<li>MK: Not yet, but it could be done.</li>
<li>JWL: How would you do “all empty”?</li>
<li>MK: You’d need to enumerate them all.</li>
</ul>

<p>
ACTION: QT4CG-099-01: MK to add a default layout option.
</p>

<ul class="org-ul">
<li>JLO: Can I filter out things I don’t want?</li>
<li>MK: The fallback representation will have the effect of losing data, but
filtering isn’t one of the requirements of objectives.
<ul class="org-ul">
<li>… The idea is that if you really want to do a transformation, you can do it
before or after.</li>
</ul></li>
</ul>

<p>
Some discussion of precedence.
</p>

<ul class="org-ul">
<li>MK: If you’re choosing based on the match predicate, there’s an implicit order
based on the order in the specification.</li>
<li>JLO: I’d prefer it if this was more explicit in the specification.</li>
</ul>

<p>
Some discussion of when element names are omitted from the output.
</p>

<ul class="org-ul">
<li>CG: I think about a year ago I implemented the first version, but what’s different?</li>
<li>MK: I had to do a complete rewrite because I was previously writing directly
to a JSON string.
<ul class="org-ul">
<li>… All the output generation was rewritten, but the logic for choosing a
layout is pretty much the same.</li>
</ul></li>
<li>CG: There are not so many things that have changed perhaps?</li>
</ul>

<p>
It’s not entirely clear what has changed.
</p>

<ul class="org-ul">
<li>CG: I really like the proposal.</li>
<li>MK: There’s a comprehensive set of tests.</li>
<li>CG: It’s definitely an improvement to have this in the specification. We can
fine tune later.</li>
</ul>

<p>
Some discussion of merging some of the layouts.
</p>

<ul class="org-ul">
<li>RD: With JSON-LD, there’s a context block that lets you define namespaces. So you
can use the compact IRI form. I wonder if it’s possible to add support for that.</li>
<li>MK: I haven’t looked at that at all.</li>
<li>DN: I think this is good progress. The previous version wasn’t satisfactory to me. I have questions.
<ol class="org-ol">
<li>Now we have elements-to-map, will we also need a map-to-elements function?</li>
<li>I think there are too many options to remember; it would be good to have a more general option.</li>
<li>I think data loss should always raise errors; we could have an option to turn that behavior off</li>
<li>Why is the conversion not lossless? Can’t we have some sort of layout where
there is a lossless conversion?</li>
<li>Why is there a JSON equivalent when the result is a map. Shouldn’t this be named map equivalent?
<ul class="org-ul">
<li>… Otherwise, this prescribes the serialization</li>
</ul></li>
<li>What is the difference between empty string and null and empty map?
<ul class="org-ul">
<li>… Bearing in mind that <code>null</code> is only for JSON not for maps.</li>
</ul></li>
</ol></li>
<li>MK: They’re all good points! They’re all points on which you have to make a design decision.
<ul class="org-ul">
<li>… The point about being lossless is a conflict between being lossless and error free.</li>
<li>… The point about having lots of options to remember is important as well.</li>
<li>… On a lot of simple XML, you get good results with just the default
options. I think the typical mode of use will be to try it with defaults and
stick with that. But we don’t want to lose the cases where some intervention
is needed.</li>
</ul></li>
<li>DN: I meant that the typical user will just give up when they look at the
description of this function.</li>
</ul>

<p>
Some discussion of usability and marketability of the functions in a specification.
</p>

<ul class="org-ul">
<li>JK: I agree with everything that’s been said. Excellent function. I like the
initial preamble that sets expectations. JWL reminded me that it would be good
for the premable to say what happens to comments, processing instructions, and
namespace nodes.
<ul class="org-ul">
<li>… It would be good to have some examples where the strings have reserved
characters in XML or JSON.</li>
</ul></li>
<li>MK: On the whole, special characters aren’t particularly a problem because
we’re producing maps, not a serialized form.</li>
<li>WP: Yes, I like this too. The match predicate is a boolean test?</li>
<li>MK: In the original draft, it was an XSLT match pattern. I think it’s a lot
simpler this way.</li>
<li>WP: I think we should also have a couple of examples that show how you would emulate a pattern, such as a self test or an element test…</li>
<li>MK: No, these patterns are fixed, you can’t change them.</li>
<li>JWL: Am I correct that mixed layout is lossless, ignoring comments and processing instructions?</li>
<li>MK: Yes, I think so, subject to the way the internal elements is handled.</li>
</ul>

<p>
Some discussion of lossless. Even in the mixed case, you could use namespaces.
</p>

<ul class="org-ul">
<li>JWL: Are there ways to make it lossless?</li>
<li>MK: Yes, I think in terms of the XDM content, that might be possible.
<ul class="org-ul">
<li>… One thing that’s always lost unconditionally is in-scope namespaces!</li>
</ul></li>

<li>JLO: What about streamability? Is uniform=true the only thing that keeps us from streaming?</li>
<li>MK: No, even on an instance-by-instance case, the list layout requires lookahead.</li>
<li>JLO: Could you have streamability?</li>
</ul>

<p>
Some discussion, “maybe.”
</p>

<ul class="org-ul">
<li>MK: It would be nice to have this separate from XPath and XQuery and XSLT.</li>

<li>DN: As several of us have discussed, lossless conversion is really important.
Perhaps an adaptive strategy could work: mixed or record. Lossless should be
the default.
<ul class="org-ul">
<li>… Unreferenced namespaces will be lost so it can’t really be called lossless.</li>
<li>… Maybe we can define a term like “equivalent” to cover this case.</li>
<li>… A “visually lossless conversion” should be a requirement.</li>
</ul></li>

<li>NW: The formatting is awkward, the tables appear to be too wide. A line break in the
JSON example in the record layout would help.</li>
</ul>

<p>
Proposal: Accept this PR.
</p>

<p>
Accepted.
</p>

<ul class="org-ul">
<li>WP: Is this something that can be implemented in XSLT?
<ul class="org-ul">
<li>… I think round tripping is also related to lossless conversion.</li>
</ul></li>
<li>MK: There’s an obvious inversion function of maps-to-elements that we could consider.
<ul class="org-ul">
<li>… I don’t think it’s round trippable though, you won’t be able to infer the
same patterns of data.</li>
</ul></li>
<li>NW: You lose the list item type.</li>
</ul>
</div>
</div>

<div id="outline-container-pr-1577" class="outline-3">
<h3 id="pr-1577"><span class="section-number-3">2.2.</span> PR #1577: 1491 Empty record types</h3>
<div class="outline-text-3" id="text-pr-1577">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1577">#1577</a>.
</p>

<ul class="org-ul">
<li>MK introduces the PR and walks through the XQuery changes.</li>

<li>MK: We have overlapping text in Functions and Operators about constructor
functions and we had failed to change a few things.
<ul class="org-ul">
<li>… The constructor functions in F&amp;O now point to the prose in XQuery.</li>
</ul></li>

<li>JWL: Does that mean that you can’t use this in XSLT?</li>
<li>MK: I’m anticipating that we’ll have <code>&lt;xsl:record&gt;</code> in XSLT that’s equivalent.</li>
</ul>

<p>
Proposal: Accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>
</div>

<div id="outline-container-any-other-business" class="outline-2">
<h2 id="any-other-business"><span class="section-number-2">3.</span> Any other business</h2>
<div class="outline-text-2" id="text-any-other-business">
<p>
None heard.
</p>
</div>
</div>

<div id="outline-container-adjourned" class="outline-2">
<h2 id="adjourned"><span class="section-number-2">4.</span> Adjourned</h2>
<div class="outline-text-2" id="text-adjourned">
</div>
</div>
</div>
</body>
</html>
