<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2024/">2024</a>, <a href="2023/">2023</a>, <a href="2022/">2022</a>, <a href="2021/">2021</a>, <a href="2020/">2020</a></p><div class="toots">
<div class="toot" id="created-1483"><h2>Issue #1483 created<span class="toot-id"> #created-1483</span></h2><div class="pubdate">07 Oct at 09:29:37 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1483">https://github.com/qt4cg/qtspecs/issues/1483</a></div><details><summary>Type `none`</summary><div class="markup"><p>The function <code>fn:error</code> uses <code>none</code> as return type. This type is only defined in the outdated <a href="https://www.w3.org/TR/xquery-semantics/">XQuery 1.0 and XPath 2.0 Formal Semantics</a> specification:</p>
<ol>
<li>Do we want to live with the current state?</li>
<li>Should we include a better definition in the current specifications?</li>
<li>Should we simply use <code>item()*</code> as return type, even if the function never returns anything?</li>
</ol>
<p>If we keep <code>none</code>, the test case generator should be revised for <a href="https://github.com/qt4cg/qt4tests/blob/b0d8df63d57ab0ab9f985217178811487f0b74ae/misc/BuiltInKeywords.xml#L74C21-L82">Keywords-fn-error-1</a>.</p>
</div></details></div>
<div class="toot" id="created-1482"><h2>Pull request #1482 created<span class="toot-id"> #created-1482</span></h2><div class="pubdate">04 Oct at 16:32:00 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1482">https://github.com/qt4cg/qtspecs/pull/1482</a></div><details><summary>1468 Revise the xsl:array instruction</summary><div class="markup"><p>Attempts an improved (more intuitive) specification for the xsl:array instruction.</p>
<p>Fix #1468</p>
</div></details></div>
<div class="toot" id="closed-1239"><h2>Issue #1239 closed<span class="toot-id"> #closed-1239</span></h2><div class="pubdate">04 Oct at 15:37:18 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1239">https://github.com/qt4cg/qtspecs/issues/1239</a></div><p>XSLT xsl:next-match with select attribute</p></div>
<div class="toot" id="closed-1273"><h2>Issue #1273 closed<span class="toot-id"> #closed-1273</span></h2><div class="pubdate">04 Oct at 15:36:06 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1273">https://github.com/qt4cg/qtspecs/issues/1273</a></div><p>Generalize for-each-pair to work with any number of input sequences</p></div>
<div class="toot" id="created-1481"><h2>Pull request #1481 created<span class="toot-id"> #created-1481</span></h2><div class="pubdate">03 Oct at 11:51:10 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1481">https://github.com/qt4cg/qtspecs/pull/1481</a></div><details><summary>1448 Component extraction on gregorian types</summary><div class="markup"><p>Fix #1448</p>
</div></details></div>
<div class="toot" id="created-1480"><h2>Pull request #1480 created<span class="toot-id"> #created-1480</span></h2><div class="pubdate">03 Oct at 11:07:45 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1480">https://github.com/qt4cg/qtspecs/pull/1480</a></div><details><summary>1450 Disallow reserved names in element/attribute constructors</summary><div class="markup"><p>Fix #1450</p>
</div></details></div>
<div class="toot" id="created-1479"><h2>Issue #1479 created<span class="toot-id"> #created-1479</span></h2><div class="pubdate">03 Oct at 09:24:58 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1479">https://github.com/qt4cg/qtspecs/issues/1479</a></div><details><summary>Default element namespace in XQuery: interaction of 'fixed' and '##any'</summary><div class="markup"><p>In §5.14 we document two changes to "declare default element namespace":</p>
<ol>
<li>
<p>The [default namespace for elements and types] can now be declared to be <code>fixed</code> for a query module, meaning it is unaffected by a namespace declaration appearing on a direct element constructor. [citation missing - should be issue #65, PR #753]</p>
</li>
<li>
<p>The [default namespace for elements and types] can be set to the value ##any, allowing unprefixed names in axis steps to match elements with a given local name in any namespace.   [Issue #296 PR #1181]</p>
</li>
</ol>
<p>We don't discuss how these two options interact. Are they completely orthogonal?</p>
<p>The description of <code>##any</code> says its effect is that "an unprefixed name appearing in any other context where an element or type name is expected is treated as being in no namespace." This deserves a mention in the rules for direct and computed element constructors.</p>
<p>In §2.2.1 we have added the statement: <em>The statically known namespaces may include a binding for the zero-length prefix; however, this is used only in limited circumstances because the rules for resolving unprefixed QNames depend on how such a name is used.</em></p>
<p>It's not clear how such a binding can come into existence. It can't be done using any of the prolog declarations that bind  a prefix. And under the current rules, I don't think it can be done using a namespace declaration attribute on a fixed element constructor. Perhaps it was the intent that <code>xmlns="abc"</code> would do this if "fixed" is set, but that's not the case currently.</p>
<p>Section §4.12.1.2 Namespace Declaration Attributes could do with a "changes" section explaining what has changed.</p>
<p>In §4.12.1, Direct Element Constructors, we say "If the element name has no namespace prefix, the namespace binding for the zero-length prefix in the [statically known namespaces] is used; if there is no such binding, the element name will be in no namespace." That can't be right, there's no mention of the default element/type namespace at all.</p>
<p>In §4.12.3.1 Computed Element Constructors, the same problem arises for a bare unprefixed NCName, but for a dynamically-computed name, we use the default element/type namespace.</p>
</div></details></div>
<div class="toot" id="created-1478"><h2>Issue #1478 created<span class="toot-id"> #created-1478</span></h2><div class="pubdate">02 Oct at 16:52:49 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1478">https://github.com/qt4cg/qtspecs/issues/1478</a></div><details><summary>Drop variadic functions</summary><div class="markup"><p>We've made a decision -- for good reasons of maintaining extensibility -- not to make any of the functions in the system function library variadic.</p>
<p>I think this raises the question of whether the feature is worth retaining. And we already had the situation that many functions that were obvious candidates for variadicity (min, max, distinct-values, sum) couldn't use the feature because they already had additional optional arguments.</p>
<p>If it's not a good design principle for system-defined functions, then the same applies equally to user-defined functions.</p>
<p>We could drop the feature and just revert to defining concat() as a special case. It would remove a significant amount of complexity.</p>
</div></details></div>
<div class="toot" id="created-1477"><h2>Pull request #1477 created<span class="toot-id"> #created-1477</span></h2><div class="pubdate">02 Oct at 16:43:44 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1477">https://github.com/qt4cg/qtspecs/pull/1477</a></div><details><summary>1475 Stylesheet change to mark optional fields with '?'</summary><div class="markup"><p>Fix #1475</p>
</div></details></div>
<div class="toot" id="created-1476"><h2>Pull request #1476 created<span class="toot-id"> #created-1476</span></h2><div class="pubdate">02 Oct at 11:52:11 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1476">https://github.com/qt4cg/qtspecs/pull/1476</a></div><details><summary>1474 xml-to-json: ensure numbers are JSON conformant</summary><div class="markup"><p>Fix #1474</p>
<p>Describes the changes that might be needed to supplied numbers to ensure the output conforms with JSON syntax.</p>
<p>Independently, adds a note to appendix to G.4 to affirm that changes to argument keywords have no backwards compatibility implication, satisfying action  QT4CG-091-01</p>
</div></details></div>
<div class="toot" id="closed-1464"><h2>Issue #1464 closed<span class="toot-id"> #closed-1464</span></h2><div class="pubdate">02 Oct at 06:42:18 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1464">https://github.com/qt4cg/qtspecs/issues/1464</a></div><p>Inconsistent spelling: implementer or implementor?</p></div>
<div class="toot" id="closed-1466"><h2>Issue #1466 closed<span class="toot-id"> #closed-1466</span></h2><div class="pubdate">02 Oct at 06:42:17 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1466">https://github.com/qt4cg/qtspecs/pull/1466</a></div><p>1464 Standardize on "implementer" spelling</p></div>
<div class="toot" id="created-1475"><h2>Issue #1475 created<span class="toot-id"> #created-1475</span></h2><div class="pubdate">01 Oct at 19:46:36 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1475">https://github.com/qt4cg/qtspecs/issues/1475</a></div><details><summary>In rendered named record types, optional fields are not so marked</summary><div class="markup"><p>For example in uri-structure-record as shown beneath the signatures of fn:build-uri and fn:parse-uri, the field names are not marked "?" to indicate the field is optional.</p>
<p>The underlying XML contains this information correctly.</p>
</div></details></div>
<div class="toot" id="closed-1461"><h2>Issue #1461 closed<span class="toot-id"> #closed-1461</span></h2><div class="pubdate">01 Oct at 19:39:06 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1461">https://github.com/qt4cg/qtspecs/issues/1461</a></div><p>### Errors in `misc/BuiltinKeywords`</p></div>
<div class="toot" id="closed-1460"><h2>Issue #1460 closed<span class="toot-id"> #closed-1460</span></h2><div class="pubdate">01 Oct at 19:31:53 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1460">https://github.com/qt4cg/qtspecs/pull/1460</a></div><p>1323b Function parameters names: $uri → $source</p></div>
<div class="toot" id="closed-1323"><h2>Issue #1323 closed<span class="toot-id"> #closed-1323</span></h2><div class="pubdate">01 Oct at 19:31:53 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1323">https://github.com/qt4cg/qtspecs/issues/1323</a></div><p>Function parameters names: $uri vs. $href</p></div>
<div class="toot" id="created-1474"><h2>Issue #1474 created<span class="toot-id"> #created-1474</span></h2><div class="pubdate">01 Oct at 17:37:03 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1474">https://github.com/qt4cg/qtspecs/issues/1474</a></div><details><summary>xml-to-json: strip leading plus signs</summary><div class="markup"><p>xml-to-json now retains the format of supplied numbers, except that it strips off redundant leading zeros to ensure they are valid JSON.</p>
<p>It also needs to strip off redundant leading plus signs for the same reason.</p>
</div></details></div>
<div class="toot" id="minutes-10-01"><h2>QT4 CG meeting 092 draft minutes<span class="toot-id"> #minutes-10-01</span></h2><div class="pubdate">01 Oct at 16:30:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/minutes/2024/10%E2%80%9401">https://qt4cg.org/meeting/minutes/2024/10—01</a></div><p>Draft minutes published.</p></div>
<div class="toot" id="closed-1436"><h2>Issue #1436 closed<span class="toot-id"> #closed-1436</span></h2><div class="pubdate">01 Oct at 16:53:52 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1436">https://github.com/qt4cg/qtspecs/pull/1436</a></div><p>1323 Function parameters names: $href → $uri</p></div>
<div class="toot" id="closed-1445"><h2>Issue #1445 closed<span class="toot-id"> #closed-1445</span></h2><div class="pubdate">01 Oct at 16:14:25 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1445">https://github.com/qt4cg/qtspecs/issues/1445</a></div><p>fn:xml-to-json: `number-formatter` option</p></div>
<div class="toot" id="closed-1455"><h2>Issue #1455 closed<span class="toot-id"> #closed-1455</span></h2><div class="pubdate">01 Oct at 16:14:24 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1455">https://github.com/qt4cg/qtspecs/pull/1455</a></div><p>1445 Drop number-formatter option, retain string value</p></div>
<div class="toot" id="closed-1437"><h2>Issue #1437 closed<span class="toot-id"> #closed-1437</span></h2><div class="pubdate">01 Oct at 16:12:46 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1437">https://github.com/qt4cg/qtspecs/pull/1437</a></div><p>1325 Variadic System Functions limited to `fn:concat`</p></div>
<div class="toot" id="closed-1429"><h2>Issue #1429 closed<span class="toot-id"> #closed-1429</span></h2><div class="pubdate">01 Oct at 16:11:43 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1429">https://github.com/qt4cg/qtspecs/pull/1429</a></div><p>1403 Align type tests</p></div>
<div class="toot" id="closed-1465"><h2>Issue #1465 closed<span class="toot-id"> #closed-1465</span></h2><div class="pubdate">01 Oct at 15:55:18 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1465">https://github.com/qt4cg/qtspecs/pull/1465</a></div><p>1461 Generate correct tests for functions involving named record types</p></div>
<div class="toot" id="created-1473"><h2>Issue #1473 created<span class="toot-id"> #created-1473</span></h2><div class="pubdate">01 Oct at 15:46:06 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1473">https://github.com/qt4cg/qtspecs/issues/1473</a></div><details><summary>fn:identity: make it variadic</summary><div class="markup"><p>…see https://github.com/qt4cg/qtspecs/pull/1437#issuecomment-2346599503.</p>
</div></details></div>
<div class="toot" id="created-1472"><h2>Pull request #1472 created<span class="toot-id"> #created-1472</span></h2><div class="pubdate">01 Oct at 14:29:43 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1472">https://github.com/qt4cg/qtspecs/pull/1472</a></div><details><summary>1471 JSON Serialization: Sequences on Top Level</summary><div class="markup"><p>Issue: #1471</p>
</div></details></div>
<div class="toot" id="created-1471"><h2>Issue #1471 created<span class="toot-id"> #created-1471</span></h2><div class="pubdate">01 Oct at 13:43:34 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1471">https://github.com/qt4cg/qtspecs/issues/1471</a></div><details><summary>JSON Serialization: Sequences on Top Level</summary><div class="markup"><p>Extracted from #576:</p>
<p>All serialization methods except for <code>json</code> allow sequences to be output on top level. We should also allow this for JSON data. This way, constructs like…</p>
<pre><code class="language-xquery">declare option output:item-separator '&amp;#xa;';
declare option output:method 'text';

for $json in ({ 1: 2 }, { 3: 4 })
return serialize($json, { 'method': 'json' })
</code></pre>
<p>…can be simplified to:</p>
<pre><code class="language-xquery">declare option output:item-separator '&amp;#xa;';
declare option output:method 'json';
{ 1: 2 },
{ 3: 4 }
</code></pre>
<p>We should still not allow sequences within JSON structures. It would be inconsistent to have different output rules depending on the number of items in a sequence (<code>(1)</code> and <code>[1]</code> would not be serialized identically).</p>
</div></details></div>
<div class="toot" id="created-1470"><h2>Pull request #1470 created<span class="toot-id"> #created-1470</span></h2><div class="pubdate">01 Oct at 13:02:38 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1470">https://github.com/qt4cg/qtspecs/pull/1470</a></div><details><summary>689 fn:stack-trace: replace with $err:stack-trace</summary><div class="markup"><p>Issue: #689</p>
</div></details></div>
<div class="toot" id="created-1469"><h2>Issue #1469 created<span class="toot-id"> #created-1469</span></h2><div class="pubdate">01 Oct at 08:54:51 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1469">https://github.com/qt4cg/qtspecs/issues/1469</a></div><details><summary>Function finder</summary><div class="markup"><p>With the number of functions in the fn:namespace now standing at 213, the use of a drop-down in the F+O "function finder" has become a little unwieldy. Are there ways it could be improved, for example by reducing the size of the list when you type the first character of the required function name?</p>
</div></details></div>
<div class="toot" id="created-1468"><h2>Issue #1468 created<span class="toot-id"> #created-1468</span></h2><div class="pubdate">01 Oct at 02:00:41 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1468">https://github.com/qt4cg/qtspecs/issues/1468</a></div><details><summary>Understanding the xsl:array constructor</summary><div class="markup"><p>In reading the XSLT specs on the <code>xsl:array</code> constructor (#406 adopted at meeting <a href="https://qt4cg.org/meeting/minutes/2023/03-28.html#pr-406">28</a>) I find myself somewhat confused. Either I need to be illumined, the specs need to be clarified, or some other adjustments are needed.</p>
<p>First, I'm still struck by the disparity between maps and arrays; there's a <code>xsl:map-member</code> but no <code>xsl:array-member</code>. That horse has been beaten many times, I know. But I need to record that the disparity is very noticeable. The disorientation is aggravated by the second example in the <a href="https://qt4cg.org/specifications/xslt-40/Overview.html#array-construction">constructor overview</a>:</p>
<pre><code>&lt;xsl:array use="?value"&gt;
   &lt;xsl:for-each-group select="0 to 19" group-adjacent=". idiv 4"&gt;
     &lt;xsl:map-entry key="'value'" select="current-group()"/&gt;
   &lt;/xsl:for-each-group&gt;
&lt;/xsl:array&gt;
</code></pre>
<p>A map entry within an array? This just strikes me as a hack, and is suggestive of a design flaw in the language. (I know what you're about to say in response; hold that thought...) That's exacerbated when I see example 2c invoking an array constructor within an array, only to get rid of the nested array to get at what you wanted in the first place, the items grouped into members.</p>
<p>Furthermore, the value of attribute <code>@use</code>, <code>?value</code>, is cryptic. Yes, I get what's going on, but the first several times reading it I thought it was very abracadabrish. And that same feeling hit me for the other examples' values of <code>@use</code>: <code>.()</code> and <code>?*</code>. The <code>.()</code> bit of syntax appears only twice in the specs (here), without explanation.</p>
<p>If <code>@use</code> is evaluated once for every item, then in example 2b...</p>
<pre><code>&lt;xsl:array use=".()"&gt;
   &lt;xsl:for-each-group select="0 to 19" group-adjacent=". idiv 4"&gt;
     &lt;xsl:sequence select="current-group#0"/&gt;
   &lt;/xsl:for-each-group&gt;
&lt;/xsl:array&gt;
</code></pre>
<p>...I would expect the expression <code>.()</code> to be applied to twenty items, because a sequence of five sequences of four items each is simply one sequence of twenty items, innit? Or are we allowed here and only here for a sequence constructor to create a sequence of sequences?</p>
<p>It seems that <code>@use</code> is striving to do something similar to <code>@group-by</code> in <code>xsl:for-each-group</code>. But it isn't. Understanding the goal is obfuscated by the vague name. Use what, to what end?</p>
<p>Overall, I feel that the array constructor is a 2nd-class citizen in the specs. I love using the map constructor in XSLT: it tells users very clearly what's going on. I don't look forward to the using the array constructor in XSLT, because I think it does the opposite. But maybe I'm wrong.</p>
<p>I don't have a specific proposal to fix, because I understand some of the conceptual hurdles to a putative <code>xsl:array-member</code>. Still. I can't help but wish that that's what we had.</p>
</div></details></div></div><p>See 2930
            more statuses in yearly archives.</p></article></main></body></html>