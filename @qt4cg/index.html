<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2024/">2024</a>, <a href="2023/">2023</a>, <a href="2022/">2022</a>, <a href="2021/">2021</a>, <a href="2020/">2020</a></p><div class="toots">
<div class="toot" id="created-1451"><h2>Issue #1451 created<span class="toot-id"> #created-1451</span></h2><div class="pubdate">17 Sep at 13:33:01 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1451">https://github.com/qt4cg/qtspecs/issues/1451</a></div><details><summary>Minor syntax errors in FO examples</summary><div class="markup"><p>The example for <code>fn-load-xquery-module</code> contains I think an errant semicolon:</p>
<pre><code>let $expr := "2 + 2"
let $module := `xquery version "4.0"; 
                module namespace dyn="http://example.com/dyn";
                declare %public variable $dyn:value := {$expr};`
let $exec := load-xquery-module("http://example.com/dyn", 
                                {'content':$module}); 
let $variables := $exec?variables
return $variables(QName("http://example.com/dyn", "value"))
</code></pre>
<p>The semicolon after the third <code>let</code> is not permitted by the grammar - it only appears as a separator in <code>Version</code>, <code>Module</code> and <code>Prolog</code>. Removing that semicolon permits a parse under the current grammar.</p>
</div></details></div>
<div class="toot" id="closed-832"><h2>Issue #832 closed<span class="toot-id"> #closed-832</span></h2><div class="pubdate">17 Sep at 11:32:23 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/832">https://github.com/qt4cg/qtspecs/pull/832</a></div><p>77 Lookup returning path selection</p></div>
<div class="toot" id="created-1450"><h2>Issue #1450 created<span class="toot-id"> #created-1450</span></h2><div class="pubdate">17 Sep at 10:12:06 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1450">https://github.com/qt4cg/qtspecs/issues/1450</a></div><details><summary>Syntax of computed element and attribute constructors</summary><div class="markup"><p>The syntax of computed element and attribute constructors causes parsing problems, and problems in extending the grammar (for example it restricts the contexts in which bare-brace map constructors can appear).</p>
<p>In the syntax <code>element|attribute _name_ { _content-expression_ }</code> I propose that:</p>
<p>(a) it should be possible to use a <code>StringTemplate</code> in place of the <em>name</em>. This will normally just be the name enclosed in backticks but interpolated expressions are allowed.</p>
<p>(b) reserved names should be disallowed. This is a backwards-incompatible change. The reserved names are the non-delimiting terminal symbols listed in A.3.2. We should add a warning that additional names might be reserved in future versions, and advise use of backticks.</p>
</div></details></div>
<div class="toot" id="created-1449"><h2>Issue #1449 created<span class="toot-id"> #created-1449</span></h2><div class="pubdate">17 Sep at 07:41:42 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1449">https://github.com/qt4cg/qtspecs/issues/1449</a></div><details><summary>Discussion: include/import of files.</summary><div class="markup"><p>I don't especially do this.</p>
<p>a) because the environment that we run XSLT in (95% of the time) doesnt support it
b) because its too rigid to use (maybe I'm doing it wrong).</p>
<p>Motivation:</p>
<p>I have 'module' List.xsl lets say that models lists, and has a function (in psuedo XPath so you can see the types)
(a module contains constructors and ideally all functions related to, here, a list)</p>
<p><code>function tryHead($xs as list()) as maybe() </code></p>
<p>I have 'module' Maybe.xsl lets say that models Maybe</p>
<p><code>function toList($xs as maybe()) as list() </code></p>
<p>So Maybe.xsl needs to know about List.xsl and List.xsl needs to know about Maybe.xsl</p>
<p>if I use xsl:include or xsl:import (in saxon) I get:</p>
<p><code>The stylesheet module includes/imports itself directly or indirectly</code></p>
<p>(which I'm happy reflects the correct behaviour given the spec - i.e. I don't think this is a bug in the implementation)</p>
<p>Given that I CAN write this cycle in a single file, without restrictions on the order of the constructs (i.e. this isnt a restriction of the language itself - this isnt alway true in other languages), it seems less than ideal that I can't freely compose files in order to replicate the situation an allow decomposition into logical files.</p>
<p>(I expect this is a consequence of the rules around priority of templates, which I am broadly ignorant of, and to be honest, largely not directly concerned with - I don't use this to 'compose' templates, but to write 'function' libraries)</p>
<p>(MK has answered a question in stack overflow related to this, which solved the issue by reorganising the files, which is what I currently do, but its not ideal that I cannot decompose and test code in isolation)</p>
<p>Is this worth resolving?</p>
<p>Many years ago I was a C programmer, and I remember a similar issue that was resolved with #define, whereby header files were imported something like this (excuse my made up C syntax)</p>
<pre><code>#ifndef _Maybe_
#include "Maybe.h"
#endifndef
</code></pre>
<p>and then Maybe.h would define <code>_Maybe_</code>, this would mean, if you followed the idiom, that the file was included by the preprocessor, at most once (I'm not suggesting this mechanism is directly applicable, just that this is a common issue elsewhere).</p>
</div></details></div>
<div class="toot" id="created-1448"><h2>Issue #1448 created<span class="toot-id"> #created-1448</span></h2><div class="pubdate">16 Sep at 16:53:03 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1448">https://github.com/qt4cg/qtspecs/issues/1448</a></div><details><summary>Operations on the dateTime family of types</summary><div class="markup"><p>Now that we support choice types in function signatures, we can easily generalize functions such as <code>year-from-dateTime</code> to work on all types in the dateTime family (specifically dateTime, date, time, gYear, gYearMonth, gMonth, gMonthDay, gDay). A request for a component that is not present in the value returns ().</p>
<p>We can apply this to all seven X-from-dateTime() functions.</p>
<p>Of course this makes the X-from-date() and X-from-time() versions redundant, but that's not a problem.</p>
</div></details></div>
<div class="toot" id="created-1447"><h2>Pull request #1447 created<span class="toot-id"> #created-1447</span></h2><div class="pubdate">16 Sep at 16:35:31 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1447">https://github.com/qt4cg/qtspecs/pull/1447</a></div><details><summary>1446 Rephrase conformance rule on xs:dateTime limits</summary><div class="markup"><p>Fix #1446</p>
</div></details></div>
<div class="toot" id="created-1446"><h2>Issue #1446 created<span class="toot-id"> #created-1446</span></h2><div class="pubdate">16 Sep at 14:32:13 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1446">https://github.com/qt4cg/qtspecs/issues/1446</a></div><details><summary>Limits on xs:dateTime</summary><div class="markup"><p>Section 9.1.1 says</p>
<p>All minimally conforming processors must support positive year values with a minimum of 4 digits (i.e., YYYY)</p>
<p>The word "minimum" here is ambiguous.</p>
<p>I suggest</p>
<p>All minimally conforming processors must support year values in the range 1 to 9999.</p>
<p>For bonus points, drop the use of the undefined term "minimally conforming", and link instead to something defined in section 1.2 Conformance.</p>
</div></details></div>
<div class="toot" id="created-1445"><h2>Issue #1445 created<span class="toot-id"> #created-1445</span></h2><div class="pubdate">16 Sep at 11:34:39 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1445">https://github.com/qt4cg/qtspecs/issues/1445</a></div><details><summary>fn:xml-to-json: `number-formatter` option</summary><div class="markup"><p>I try to, but I don’t get happy with the <code>number-formatter</code> option of <code>fn:xml-to-json</code>. It results in a lot of special-casing at serialization time for a very special case. More generally, …</p>
<ul>
<li>The option would be much more helpful for outputting maps and arrays as JSON with at serialization time, but it is not available as standard serialization parameter.</li>
<li><code>fn:xml-to-json</code> represents numbers as text nodes, so numbers already have a string representation. If needed, they could easily be preprocessed before being serialized as JSON.</li>
</ul>
<p>I imagine that the major use cases for the option will be:</p>
<ul>
<li>to avoid scientific representation for doubles, and</li>
<li>to be able to serialize <code>INF</code> and <code>NaN</code>.</li>
</ul>
<p>Couldn’t we simply allow numeric string values (i.e., the children of <code>fn:number</code> elements) to be output without changes?</p>
<pre><code class="language-xquery">'1000000' =&gt; json-to-xml() =&gt; xml-to-json()  (: 1000000 instead of 1.0E6 :)
xml-to-json(&lt;fn:number&gt;INF&lt;/fn:number&gt;)      (: INF instead of error :)
</code></pre>
<p>We already have the <code>number-parser</code> option, which allows us to generate a string representation for numbers that will be suitable for being converted back with <code>fn:xml-to-json</code>. For other cases, the XML source can easily be updated before being passed to <code>fn:xml-to-json</code>.</p>
<p>If we really want to keep the option, …</p>
<ol>
<li>We should add examples for its usage in the spec.</li>
<li>We need more tests.</li>
<li>I would suggest using the function type <code>(fn(xs:untypedAtomic) as xs:untypedAtomic)?</code>, similar as for <code>fn:replace</code> and <code>fn:json-to-xml</code> (this would allow things like <code>xml-to-json($input, { 'number-formatter': fn { . + 1 } })</code>).</li>
<li>We should also add it as a general serialization parameter to be able to write:</li>
</ol>
<pre><code class="language-xquery">serialize(xs:double('NaN'), {
  'method': 'json',
  'number-formatter': fn($n) { if(is-NaN($n)) then '"NaN"' else $n }
})
</code></pre>
<p>If it’s too much hassle to introduce it as a general serialization parameter, we should at least provide it for <code>fn:serialize</code>.</p>
</div></details></div>
<div class="toot" id="created-1444"><h2>Pull request #1444 created<span class="toot-id"> #created-1444</span></h2><div class="pubdate">16 Sep at 10:42:43 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1444">https://github.com/qt4cg/qtspecs/pull/1444</a></div><details><summary>Implement improvement to bibligraphy entry for IEEE 802.3</summary><div class="markup"><p>Thank you, Wendell.</p>
</div></details></div>
<div class="toot" id="closed-1443"><h2>Issue #1443 closed<span class="toot-id"> #closed-1443</span></h2><div class="pubdate">16 Sep at 10:29:56 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1443">https://github.com/qt4cg/qtspecs/pull/1443</a></div><p>CSS tweaks for productions</p></div>
<div class="toot" id="created-1443"><h2>Pull request #1443 created<span class="toot-id"> #created-1443</span></h2><div class="pubdate">16 Sep at 10:29:50 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1443">https://github.com/qt4cg/qtspecs/pull/1443</a></div><details><summary>CSS tweaks for productions</summary><div class="markup"><ol>
<li>Make the productions a little easier to read by removing the border and background on <code>code</code> elements in production tables.</li>
<li>Make the background color for production notes a little less ... intense.</li>
</ol>
</div></details></div>
<div class="toot" id="closed-1441"><h2>Issue #1441 closed<span class="toot-id"> #closed-1441</span></h2><div class="pubdate">16 Sep at 10:27:40 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1441">https://github.com/qt4cg/qtspecs/pull/1441</a></div><p>1396 Improve presentation of grammar rules</p></div>
<div class="toot" id="created-1442"><h2>Pull request #1442 created<span class="toot-id"> #created-1442</span></h2><div class="pubdate">15 Sep at 10:12:23 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1442">https://github.com/qt4cg/qtspecs/pull/1442</a></div><details><summary>1394 Add new default priority rules</summary><div class="markup"><p>Adds rules for the default priority of new match pattern options such as <code>element(p:*)</code> and <code>element(p|q)</code>.</p>
<p>Fix #1394</p>
</div></details></div>
<div class="toot" id="created-1441"><h2>Pull request #1441 created<span class="toot-id"> #created-1441</span></h2><div class="pubdate">14 Sep at 18:13:45 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1441">https://github.com/qt4cg/qtspecs/pull/1441</a></div><details><summary>1396 Improve presentation of grammar rules</summary><div class="markup"><p>Improves the presentation of grammar rules.</p>
<ul>
<li>Production numbers are dropped</li>
<li>The width of the RHS column is increased so there is less line wrapping</li>
<li>The summary EBNF is alphabetically sorted</li>
</ul>
</div></details></div>
<div class="toot" id="closed-1185"><h2>Issue #1185 closed<span class="toot-id"> #closed-1185</span></h2><div class="pubdate">14 Sep at 08:39:44 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1185">https://github.com/qt4cg/qtspecs/pull/1185</a></div><p>1179 array:values, map:values → array:get, map:get</p></div>
<div class="toot" id="created-1440"><h2>Pull request #1440 created<span class="toot-id"> #created-1440</span></h2><div class="pubdate">12 Sep at 16:03:40 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1440">https://github.com/qt4cg/qtspecs/pull/1440</a></div><details><summary>1387 Another tweak to build-uri</summary><div class="markup"><p>In #1387 @ChristianGruen observes that the <code>+</code> seems to be a special case in the <code>tel:</code> scheme. In fact, I think we concluded that the special case is that you shouldn't encode the path segment of a non-hierarchical URI.</p>
<p>This PR attempts to implement that.</p>
</div></details></div>
<div class="toot" id="closed-1269"><h2>Issue #1269 closed<span class="toot-id"> #closed-1269</span></h2><div class="pubdate">12 Sep at 11:26:46 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1269">https://github.com/qt4cg/qtspecs/issues/1269</a></div><p>Could the labeling of grammar productions be improved?</p></div>
<div class="toot" id="created-1439"><h2>Pull request #1439 created<span class="toot-id"> #created-1439</span></h2><div class="pubdate">11 Sep at 06:54:40 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1439">https://github.com/qt4cg/qtspecs/pull/1439</a></div><details><summary>1235 Function Identity: Treating function items with identical bodies</summary><div class="markup"><p>Closes #1235</p>
</div></details></div>
<div class="toot" id="created-1438"><h2>Pull request #1438 created<span class="toot-id"> #created-1438</span></h2><div class="pubdate">11 Sep at 06:33:30 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1438">https://github.com/qt4cg/qtspecs/pull/1438</a></div><details><summary>1322 fn:collation-available (editorial)</summary><div class="markup"><p>Closes #1322</p>
</div></details></div>
<div class="toot" id="created-1437"><h2>Pull request #1437 created<span class="toot-id"> #created-1437</span></h2><div class="pubdate">11 Sep at 06:24:41 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1437">https://github.com/qt4cg/qtspecs/pull/1437</a></div><details><summary>1325 Variadic System Functions limited to `fn:concat`</summary><div class="markup"><p>Closes #1325</p>
</div></details></div>
<div class="toot" id="created-1436"><h2>Pull request #1436 created<span class="toot-id"> #created-1436</span></h2><div class="pubdate">11 Sep at 06:02:33 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1436">https://github.com/qt4cg/qtspecs/pull/1436</a></div><details><summary>1323 Function parameters names: $href → $uri</summary><div class="markup"><p>Closes #1323</p>
</div></details></div>
<div class="toot" id="created-1435"><h2>Pull request #1435 created<span class="toot-id"> #created-1435</span></h2><div class="pubdate">11 Sep at 05:37:22 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1435">https://github.com/qt4cg/qtspecs/pull/1435</a></div><details><summary>1421 fn:unix-time: Revisions</summary><div class="markup"><p>Closes #1421</p>
</div></details></div>
<div class="toot" id="created-1434"><h2>Pull request #1434 created<span class="toot-id"> #created-1434</span></h2><div class="pubdate">11 Sep at 05:26:23 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1434">https://github.com/qt4cg/qtspecs/pull/1434</a></div><details><summary>1373 XQFO: Editorial</summary><div class="markup"><p>Closes #1373</p>
</div></details></div>
<div class="toot" id="created-1433"><h2>Pull request #1433 created<span class="toot-id"> #created-1433</span></h2><div class="pubdate">11 Sep at 05:09:29 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1433">https://github.com/qt4cg/qtspecs/pull/1433</a></div><details><summary>1422 fn:hash: Revision</summary><div class="markup"><p>Closes #1422</p>
</div></details></div>
<div class="toot" id="created-1432"><h2>Pull request #1432 created<span class="toot-id"> #created-1432</span></h2><div class="pubdate">11 Sep at 04:47:55 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1432">https://github.com/qt4cg/qtspecs/pull/1432</a></div><details><summary>1379 Initializing expression: Allow self references</summary><div class="markup"><p>With function declarations, recursive functions can be declared:</p>
<pre><code class="language-xquery">declare function local:factorial($x) {
  if($x &gt; 1) then $x + local:factorial($x - 1) else $x
};
local:factorial(5)
</code></pre>
<p>We should allow the same for variable declarations:</p>
<pre><code class="language-xquery">declare variable $factorial := fn($x) {
  if($x &gt; 1) then $x + $factorial($x - 1) else $x
};
$factorial(5)
</code></pre>
<p>I believe it is sufficient to simplify the definition of <em>initializing expressions</em> and drop the exception “other than the variable being declared”.</p>
<p>Related: https://www.w3.org/Bugs/Public/show_bug.cgi?id=15791 (the static dependency check was given up before due to <code>fn:function-lookup</code>).</p>
<p>Closes #1379</p>
</div></details></div>
<div class="toot" id="created-1431"><h2>Pull request #1431 created<span class="toot-id"> #created-1431</span></h2><div class="pubdate">11 Sep at 04:26:41 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1431">https://github.com/qt4cg/qtspecs/pull/1431</a></div><details><summary>1372 Unknown option: FORG0013 → XPTY0004</summary><div class="markup"><p>Closes #1372</p>
</div></details></div>
<div class="toot" id="minutes-09-10"><h2>QT4 CG meeting 089 draft minutes<span class="toot-id"> #minutes-09-10</span></h2><div class="pubdate">10 Sep at 16:45:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/minutes/2024/09-10">https://qt4cg.org/meeting/minutes/2024/09-10</a></div><p>Draft minutes published.</p></div>
<div class="toot" id="closed-1209"><h2>Issue #1209 closed<span class="toot-id"> #closed-1209</span></h2><div class="pubdate">10 Sep at 17:26:26 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1209">https://github.com/qt4cg/qtspecs/pull/1209</a></div><p>1183 Add transient mode and the transient{} expression</p></div>
<div class="toot" id="closed-1426"><h2>Issue #1426 closed<span class="toot-id"> #closed-1426</span></h2><div class="pubdate">10 Sep at 16:35:11 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1426">https://github.com/qt4cg/qtspecs/issues/1426</a></div><p>Byte ordering of CRC-32 hash result</p></div>
<div class="toot" id="closed-1428"><h2>Issue #1428 closed<span class="toot-id"> #closed-1428</span></h2><div class="pubdate">10 Sep at 16:35:10 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1428">https://github.com/qt4cg/qtspecs/pull/1428</a></div><p>1426 Add notes on endianness of CRC-32</p></div></div><p>See 2852
            more statuses in yearly archives.</p></article></main></body></html>