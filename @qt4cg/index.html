<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2024/">2024</a>, <a href="2023/">2023</a>, <a href="2022/">2022</a>, <a href="2021/">2021</a>, <a href="2020/">2020</a></p><div class="toots">
<div class="toot" id="created-1518"><h2>Pull request #1518 created<span class="toot-id"> #created-1518</span></h2><div class="pubdate">20 Oct at 21:19:53 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1518">https://github.com/qt4cg/qtspecs/pull/1518</a></div><details><summary>Add to changes metadata</summary><div class="markup"><p>No issue raised.</p>
<p>Adds links from change metadata in the spec to issue and PR numbers in GitHub in many cases where these were previously missing.</p>
</div></details></div>
<div class="toot" id="created-1517"><h2>Pull request #1517 created<span class="toot-id"> #created-1517</span></h2><div class="pubdate">20 Oct at 21:13:30 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1517">https://github.com/qt4cg/qtspecs/pull/1517</a></div><details><summary>1516(A) Fix failing F&amp;O examples</summary><div class="markup"><p>Corrects many of the errors in tests identified in issue #1516</p>
</div></details></div>
<div class="toot" id="created-1516"><h2>Issue #1516 created<span class="toot-id"> #created-1516</span></h2><div class="pubdate">20 Oct at 17:42:02 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1516">https://github.com/qt4cg/qtspecs/issues/1516</a></div><details><summary>Test failures in app-spec-examples</summary><div class="markup"><p>I'm getting the following test failures (exluding ones where the Saxon implementation is known to be incomplete).</p>
<p><strong>fo-test-fn-csv-to-xml-004 to -010</strong></p>
<p>These are failing because the results are formatted with whitespace which the example expression does not actually generate.</p>
<p><strong>fo-test-fn-format-number-005</strong></p>
<p>Error on line 3 at column 16 (in expression on line 1116) of ... qt4tests/app/fo-spec-examples.xml
FODF1310  format-number picture: Digit sign must not appear after a zero-digit sign in the
integer part of a sub-picture</p>
<p>The test is format-number(12345, '0,###^0', {
'percent': '%:pc'
})
Result:	
"14pc"</p>
<p>which seems to be a complete aberration.</p>
<p><strong>fo-test-fn-format-number-008, -009, -010</strong></p>
<p>fail saying decimal-format 'de' is not defined. The dependency is documented in narrative prose, but is not codified so that the test generator knows about it.</p>
<p><strong>fo-test-fn-function-annotations-</strong>* **</p>
<p>failing because the examples use a non-existant function xs:QName#2. Probably fn:QName#2 is intended.</p>
<p>** fo-test-fn-highest-005 **
Error
XPST0142  Keyword key does not match the name of any declared parameter of function fn:highest</p>
<p>Possible Saxon bug ??</p>
<p><strong>fo-test-fn-hours-from-dateTime-007</strong></p>
<p>Example is incorrect - it calls year-from-dateTime not hours-from-dateTime</p>
<p><strong>fo-test-map-build-007</strong></p>
<p>Results are not deep-equal to the stated result -haven't established why. Possible whitespace issue.</p>
<p><strong>fo-test-map-pairs-001</strong></p>
<p>Getting "assert-permutation failed" from the Saxon test driver. Possible problem with the test driver?</p>
</div></details></div>
<div class="toot" id="closed-1336"><h2>Issue #1336 closed<span class="toot-id"> #closed-1336</span></h2><div class="pubdate">19 Oct at 16:14:59 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1336">https://github.com/qt4cg/qtspecs/issues/1336</a></div><p>Editorial: fos record descriptions within xmlspec prose</p></div>
<div class="toot" id="created-1515"><h2>Issue #1515 created<span class="toot-id"> #created-1515</span></h2><div class="pubdate">19 Oct at 05:16:44 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1515">https://github.com/qt4cg/qtspecs/issues/1515</a></div><details><summary>higher order function group-by or gather-by for grouping</summary><div class="markup"><p>xpath 4 offers a new function <code>fn:partition</code>: "<em>Partitions a sequence of items into a sequence of non-empty arrays containing the same items, starting a new partition when a supplied condition is true</em>". Looks like an equivalent to XSLT <code>xsl:for-each-group</code>with <code>@group-starting-with</code>.</p>
<p>I would appreciate another new HOF as an equivalent to XSLT <code>xsl:for-each-group</code>with <code>@group-by</code>, that is <em>Partitions a sequence of items into a sequence of non-empty arrays containing the same items, where all items in a partition give the same value when a function f is applied</em>. This is called <code>gather-by</code> in <em>Mathematica</em>.</p>
</div></details></div>
<div class="toot" id="created-1514"><h2>Issue #1514 created<span class="toot-id"> #created-1514</span></h2><div class="pubdate">19 Oct at 04:54:18 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1514">https://github.com/qt4cg/qtspecs/issues/1514</a></div><details><summary>Editorial: optional position argument in function signature for for-each and other HOF </summary><div class="markup"><p>The change in 4.0 for the higher order function <code>for-each</code> is that "<em>the $action callback function accepts an <strong>optional</strong> position argument</em>".  But the function signature is</p>
<pre><code>fn:for-each(
  $input as item()*, 	
  $action as fn(item(), xs:integer) as item()* 	
) as item()*
</code></pre>
<p>I read <code>$action as fn(item(), xs:integer) as item()* </code> as a function with two <strong>mandatory</strong> parameters <code>item()</code> and <code>xs:integer</code>. Since the second (position) argument should be optional, i would expect:</p>
<pre><code>fn:for-each(
  $input as item()*, 	
  $action as fn(item(), xs:integer?) as item()* 	
) as item()*
</code></pre>
<p>There are several HOFs with this new <strong>optional</strong> position argument which seems to be <strong>mandatory</strong> in the function signature.</p>
</div></details></div>
<div class="toot" id="created-1513"><h2>Pull request #1513 created<span class="toot-id"> #created-1513</span></h2><div class="pubdate">18 Oct at 17:43:05 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1513">https://github.com/qt4cg/qtspecs/pull/1513</a></div><details><summary>1512 Disallow reserved names in namespace and PI constructors</summary><div class="markup"><p>Fix #1512</p>
</div></details></div>
<div class="toot" id="created-1512"><h2>Issue #1512 created<span class="toot-id"> #created-1512</span></h2><div class="pubdate">18 Oct at 14:00:03 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1512">https://github.com/qt4cg/qtspecs/issues/1512</a></div><details><summary>Disallow reserved names in computed processing-instruction and namespace node constructors</summary><div class="markup"><p>The new rules banning unquoted reserved names in computed element and attribute constructors should apply equally to processing instruction and namespace node constructors.</p>
</div></details></div>
<div class="toot" id="created-1511"><h2>Pull request #1511 created<span class="toot-id"> #created-1511</span></h2><div class="pubdate">18 Oct at 11:28:46 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1511">https://github.com/qt4cg/qtspecs/pull/1511</a></div><details><summary>1345 Re-allow bare-brace map constructors everywhere</summary><div class="markup"><p>Fix #1345</p>
<p>Having changed computed element/attribute constructors to require reserved names to be quoted, we can now reintroduce bare-brace map constructors without ambiguity.</p>
</div></details></div>
<div class="toot" id="created-1510"><h2>Pull request #1510 created<span class="toot-id"> #created-1510</span></h2><div class="pubdate">18 Oct at 10:01:06 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1510">https://github.com/qt4cg/qtspecs/pull/1510</a></div><details><summary>1509 Drop obsolete/redundant text about "import schema" location hints</summary><div class="markup"><p>Fix #1509</p>
</div></details></div>
<div class="toot" id="created-1509"><h2>Issue #1509 created<span class="toot-id"> #created-1509</span></h2><div class="pubdate">18 Oct at 09:12:59 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1509">https://github.com/qt4cg/qtspecs/issues/1509</a></div><details><summary>XQuery import schema (location hints)</summary><div class="markup"><p>In XQuery ยง5.11, the paragraph starting "The first [URILiteral]) in a schema import..." contains obsolete information about the handling of location hints. It should refer instead to the new and more complete treatment given four paragraphs later at "The [URILiterals] that follow the at keyword are optional location hints..."</p>
</div></details></div>
<div class="toot" id="created-1508"><h2>Pull request #1508 created<span class="toot-id"> #created-1508</span></h2><div class="pubdate">17 Oct at 12:05:01 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1508">https://github.com/qt4cg/qtspecs/pull/1508</a></div><details><summary>1507 Make format-integer spec legible</summary><div class="markup"><p>Fix #1507</p>
<p>Make the "formal spec" of fn:parse-integer legible (and portable between XPath and XQuery) by avoiding use of XML character references in the code.</p>
</div></details></div>
<div class="toot" id="created-1507"><h2>Issue #1507 created<span class="toot-id"> #created-1507</span></h2><div class="pubdate">17 Oct at 11:41:48 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1507">https://github.com/qt4cg/qtspecs/issues/1507</a></div><details><summary>Formal spec of fn:parse-integer</summary><div class="markup"><p>In the formal spec of fn:parse-integer, it is not visually clear what the second argument of translate() is in</p>
<pre><code>let $preprocessed-value := translate($value, "_ 	

", "")
</code></pre>
<p>We should spell out the characters by using codepoints-to-string() or char().</p>
</div></details></div>
<div class="toot" id="created-1506"><h2>Issue #1506 created<span class="toot-id"> #created-1506</span></h2><div class="pubdate">17 Oct at 09:56:54 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1506">https://github.com/qt4cg/qtspecs/issues/1506</a></div><details><summary>Type declarations: Constructor functions?</summary><div class="markup"><p>Iโve tagged this as a discussion issue:</p>
<p>Would it make sense to declare constructor functions for the new XQuery type declarations, similar to what we now have for records, or do we believe thatโs over the top?</p>
<p>It might improve typing in complex code, and it would allow us to write things like:</p>
<pre><code class="language-xquery">declare type world:continent as enum('Africa', 'America', 'Asia', 'Australia', 'Europe');
world:continent('Africa')
</code></pre>
<p>For the type above, an implicit constructor function would be created that would simply coerce its argument to the declared type:</p>
<pre><code class="language-xquery">declare function world:continent($value) as world:continent { $value };
</code></pre>
<p>One current drawback is that this only works for prefixed types (see #657), whereas itโs possible to define types without prefix, and reference them in local type declarations:</p>
<pre><code class="language-xquery">declare type continent as enum('Africa', 'America', 'Asia', 'Australia', 'Europe');
let $c as continent := 'Africa'
return $c
</code></pre>
</div></details></div>
<div class="toot" id="created-1505"><h2>Pull request #1505 created<span class="toot-id"> #created-1505</span></h2><div class="pubdate">16 Oct at 16:39:05 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1505">https://github.com/qt4cg/qtspecs/pull/1505</a></div><details><summary>1503 Add err:map, err:stack-trace, err:additional to XSLT</summary><div class="markup"><p>Fix #1503</p>
</div></details></div>
<div class="toot" id="created-1504"><h2>Pull request #1504 created<span class="toot-id"> #created-1504</span></h2><div class="pubdate">16 Oct at 11:59:54 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1504">https://github.com/qt4cg/qtspecs/pull/1504</a></div><details><summary>868 fn:intersperse โ fn:join, array:join($arrays, $separator)</summary><div class="markup"><p>Issue: #868</p>
</div></details></div>
<div class="toot" id="created-1503"><h2>Issue #1503 created<span class="toot-id"> #created-1503</span></h2><div class="pubdate">16 Oct at 10:56:30 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1503">https://github.com/qt4cg/qtspecs/issues/1503</a></div><details><summary>$err:map in XSLT</summary><div class="markup"><p>XSLT needs to be brought into line with XQuery in terms of the variables available in a catch clause, in particular $err:map (see PR #493)</p>
</div></details></div>
<div class="toot" id="created-1502"><h2>Pull request #1502 created<span class="toot-id"> #created-1502</span></h2><div class="pubdate">16 Oct at 10:16:31 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1502">https://github.com/qt4cg/qtspecs/pull/1502</a></div><details><summary>1458 Arguments that have a default value but don't accept ()</summary><div class="markup"><p>Issue: #1458</p>
</div></details></div>
<div class="toot" id="closed-1330"><h2>Issue #1330 closed<span class="toot-id"> #closed-1330</span></h2><div class="pubdate">16 Oct at 10:13:17 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1330">https://github.com/qt4cg/qtspecs/issues/1330</a></div><p>$fallback argument of map:get() and array:get() should allow () to be supplied</p></div>
<div class="toot" id="created-1501"><h2>Pull request #1501 created<span class="toot-id"> #created-1501</span></h2><div class="pubdate">16 Oct at 09:31:59 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1501">https://github.com/qt4cg/qtspecs/pull/1501</a></div><details><summary>1318 Function Coercion: Records, Maps, Arrays</summary><div class="markup"><p>Issue: #1318</p>
<p>Coercion rules added for maps and arrays.</p>
</div></details></div>
<div class="toot" id="created-1500"><h2>Issue #1500 created<span class="toot-id"> #created-1500</span></h2><div class="pubdate">16 Oct at 01:37:44 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1500">https://github.com/qt4cg/qtspecs/issues/1500</a></div><details><summary>Coupling of global variable-bound maps to character maps in XSLT </summary><div class="markup"><p>In an application I am writing now, the <code>xsl:output-character</code>s I am writing in my <code>xsl:character-map</code> are of interest elsewhere in the XSLT complex that is slowly emerging.</p>
<p>The exercise makes me realize that character maps can be interesting in their own right. We give <code>xsl:character-map</code>s names, and include them within each other, because they group meaningfully related character-string pairs. Such sets are the sort of thing one might want to have more closely coupled to the XSLT apparatus. For example, someone might create a <code>xsl:character-map</code> to deal with Unicode characters in a particular script. And those characters are of interest in their own right, and the character selection might engage with other processes that need to interact with those characters.</p>
<p>What if we were to extend <code>@use-character-maps</code> to allow character maps to draw from other preexisting maps? The list of <code>eqNames</code> in <code>@use-character-maps</code> would be resolved first against names of character maps. For any <code>eqName</code> that is not the name of a character map, the processor would search for a global variable or global parameter by that name. Any referenced global variable/parameter must be empty or a map. Every key must be castable as a character, and every value must be a string. Failure on any of these points would raise an error.</p>
<p>Here is an example of hypothetical XSLT code, to illustrate how the innovation might be productively useful, producing two different character maps, each of which might be appropriate for one type of serialization or another:</p>
<pre><code>    &lt;xsl:item-type name="letters:grc" as="record(transliteration as xs:string, name as xs:string)"/&gt;
    &lt;xsl:variable name="master-map" as="map(*)"&gt;
        &lt;xsl:map&gt;
            &lt;xsl:map-entry key="'ฮฑ'" select="letters:grc('a', 'alpha')"/&gt;
            &lt;xsl:map-entry key="'ฮฒ'" select="letters:grc('b', 'beta')"/&gt;
        &lt;/xsl:map&gt;
    &lt;/xsl:variable&gt;
    &lt;xsl:variable name="serialization-transliteration-map" as="map(xs:string, xs:string)"&gt;
        &lt;xsl:map&gt;
            &lt;xsl:for-each select="map:keys($master-map)"&gt;
                &lt;xsl:map-entry key="." select="$master-map(current())?transliteration"/&gt;
            &lt;/xsl:for-each&gt;
        &lt;/xsl:map&gt;
    &lt;/xsl:variable&gt;
    &lt;xsl:variable name="serialization-name-map" as="map(xs:string, xs:string)"&gt;
        &lt;xsl:map&gt;
            &lt;xsl:for-each select="map:keys($master-map)"&gt;
                &lt;xsl:map-entry key="." select="$master-map(current())?name"/&gt;
            &lt;/xsl:for-each&gt;
        &lt;/xsl:map&gt;
    &lt;/xsl:variable&gt;
    &lt;xsl:character-map name="transliteration" use-character-maps="serialization-transliteration-map"/&gt;
    &lt;xsl:character-map name="names" use-character-maps="serialization-name-map"/&gt;
</code></pre>
<p>In other words, if an <code>xsl:character-map</code> is just a map, why not give it access to other XSLT structures that are maps?</p>
</div></details></div>
<div class="toot" id="created-1499"><h2>Issue #1499 created<span class="toot-id"> #created-1499</span></h2><div class="pubdate">15 Oct at 21:03:07 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1499">https://github.com/qt4cg/qtspecs/issues/1499</a></div><details><summary>Editorial: reduce noise in serialization spec for unused options</summary><div class="markup"><p>I suggest that instead of the repetitive use of paragraphs like "The json-lines serialization parameter is not applicable to the XML output method.", we should have a general statement that serialization parameters are not applicable unless otherwise specified; perhaps accompanied by a chart showing which parameters apply to which methods.</p>
</div></details></div>
<div class="toot" id="created-1498"><h2>Pull request #1498 created<span class="toot-id"> #created-1498</span></h2><div class="pubdate">15 Oct at 20:47:20 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1498">https://github.com/qt4cg/qtspecs/pull/1498</a></div><details><summary>1366 Use ++ and ** operators in EBNF</summary><div class="markup"><p>Fix #1366</p>
</div></details></div>
<div class="toot" id="closed-1487"><h2>Issue #1487 closed<span class="toot-id"> #closed-1487</span></h2><div class="pubdate">15 Oct at 19:41:34 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1487">https://github.com/qt4cg/qtspecs/issues/1487</a></div><p>xsl:array - don't allow content to be supplied in array form</p></div>
<div class="toot" id="minutes-10-15"><h2>QT4 CG meeting 094 draft minutes<span class="toot-id"> #minutes-10-15</span></h2><div class="pubdate">15 Oct at 16:20:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/minutes/2024/10-15">https://qt4cg.org/meeting/minutes/2024/10-15</a></div><p>Draft minutes published.</p></div>
<div class="toot" id="closed-1472"><h2>Issue #1472 closed<span class="toot-id"> #closed-1472</span></h2><div class="pubdate">15 Oct at 17:18:20 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1472">https://github.com/qt4cg/qtspecs/pull/1472</a></div><p>1471 JSON Serialization: Sequences on Top Level</p></div>
<div class="toot" id="created-1497"><h2>Pull request #1497 created<span class="toot-id"> #created-1497</span></h2><div class="pubdate">15 Oct at 17:17:38 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1497">https://github.com/qt4cg/qtspecs/pull/1497</a></div><details><summary>1471 JSON Serialization: json-lines</summary><div class="markup"><p>Closes #1471 and #1472.</p>
</div></details></div>
<div class="toot" id="created-1496"><h2>Pull request #1496 created<span class="toot-id"> #created-1496</span></h2><div class="pubdate">15 Oct at 17:09:37 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1496">https://github.com/qt4cg/qtspecs/pull/1496</a></div><details><summary>1495 Drop context value static type</summary><div class="markup"><p>Fix #1495</p>
<p>Also corrects one or two broken cross-spec links.</p>
</div></details></div>
<div class="toot" id="closed-1488"><h2>Issue #1488 closed<span class="toot-id"> #closed-1488</span></h2><div class="pubdate">15 Oct at 16:30:44 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1488">https://github.com/qt4cg/qtspecs/pull/1488</a></div><p>1487 in xsl:array, drop option to construct arrays from arrays</p></div>
<div class="toot" id="created-1495"><h2>Issue #1495 created<span class="toot-id"> #created-1495</span></h2><div class="pubdate">15 Oct at 16:29:55 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1495">https://github.com/qt4cg/qtspecs/issues/1495</a></div><details><summary>Drop "context value static type"</summary><div class="markup"><p>Drop the "context value static type" from the definition of the static context.</p>
<p>In the absence of a specification for static typing, the feature is unused, and we have dropped similar features such as statically-known document and collection types.</p>
</div></details></div></div><p>See 3004
            more statuses in yearly archives.</p></article></main></body></html>