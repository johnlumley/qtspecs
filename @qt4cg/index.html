<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2024/">2024</a>, <a href="2023/">2023</a>, <a href="2022/">2022</a>, <a href="2021/">2021</a>, <a href="2020/">2020</a></p><div class="toots">
<div class="toot" id="closed-1464"><h2>Issue #1464 closed<span class="toot-id"> #closed-1464</span></h2><div class="pubdate">02 Oct at 06:42:18 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1464">https://github.com/qt4cg/qtspecs/issues/1464</a></div><p>Inconsistent spelling: implementer or implementor?</p></div>
<div class="toot" id="closed-1466"><h2>Issue #1466 closed<span class="toot-id"> #closed-1466</span></h2><div class="pubdate">02 Oct at 06:42:17 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1466">https://github.com/qt4cg/qtspecs/pull/1466</a></div><p>1464 Standardize on "implementer" spelling</p></div>
<div class="toot" id="created-1475"><h2>Issue #1475 created<span class="toot-id"> #created-1475</span></h2><div class="pubdate">01 Oct at 19:46:36 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1475">https://github.com/qt4cg/qtspecs/issues/1475</a></div><details><summary>In rendered named record types, optional fields are not so marked</summary><div class="markup"><p>For example in uri-structure-record as shown beneath the signatures of fn:build-uri and fn:parse-uri, the field names are not marked "?" to indicate the field is optional.</p>
<p>The underlying XML contains this information correctly.</p>
</div></details></div>
<div class="toot" id="closed-1461"><h2>Issue #1461 closed<span class="toot-id"> #closed-1461</span></h2><div class="pubdate">01 Oct at 19:39:06 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1461">https://github.com/qt4cg/qtspecs/issues/1461</a></div><p>### Errors in `misc/BuiltinKeywords`</p></div>
<div class="toot" id="closed-1460"><h2>Issue #1460 closed<span class="toot-id"> #closed-1460</span></h2><div class="pubdate">01 Oct at 19:31:53 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1460">https://github.com/qt4cg/qtspecs/pull/1460</a></div><p>1323b Function parameters names: $uri → $source</p></div>
<div class="toot" id="closed-1323"><h2>Issue #1323 closed<span class="toot-id"> #closed-1323</span></h2><div class="pubdate">01 Oct at 19:31:53 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1323">https://github.com/qt4cg/qtspecs/issues/1323</a></div><p>Function parameters names: $uri vs. $href</p></div>
<div class="toot" id="created-1474"><h2>Issue #1474 created<span class="toot-id"> #created-1474</span></h2><div class="pubdate">01 Oct at 17:37:03 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1474">https://github.com/qt4cg/qtspecs/issues/1474</a></div><details><summary>xml-to-json: strip leading plus signs</summary><div class="markup"><p>xml-to-json now retains the format of supplied numbers, except that it strips off redundant leading zeros to ensure they are valid JSON.</p>
<p>It also needs to strip off redundant leading plus signs for the same reason.</p>
</div></details></div>
<div class="toot" id="minutes-10-01"><h2>QT4 CG meeting 092 draft minutes<span class="toot-id"> #minutes-10-01</span></h2><div class="pubdate">01 Oct at 16:30:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/minutes/2024/10%E2%80%9401">https://qt4cg.org/meeting/minutes/2024/10—01</a></div><p>Draft minutes published.</p></div>
<div class="toot" id="closed-1436"><h2>Issue #1436 closed<span class="toot-id"> #closed-1436</span></h2><div class="pubdate">01 Oct at 16:53:52 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1436">https://github.com/qt4cg/qtspecs/pull/1436</a></div><p>1323 Function parameters names: $href → $uri</p></div>
<div class="toot" id="closed-1445"><h2>Issue #1445 closed<span class="toot-id"> #closed-1445</span></h2><div class="pubdate">01 Oct at 16:14:25 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1445">https://github.com/qt4cg/qtspecs/issues/1445</a></div><p>fn:xml-to-json: `number-formatter` option</p></div>
<div class="toot" id="closed-1455"><h2>Issue #1455 closed<span class="toot-id"> #closed-1455</span></h2><div class="pubdate">01 Oct at 16:14:24 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1455">https://github.com/qt4cg/qtspecs/pull/1455</a></div><p>1445 Drop number-formatter option, retain string value</p></div>
<div class="toot" id="closed-1437"><h2>Issue #1437 closed<span class="toot-id"> #closed-1437</span></h2><div class="pubdate">01 Oct at 16:12:46 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1437">https://github.com/qt4cg/qtspecs/pull/1437</a></div><p>1325 Variadic System Functions limited to `fn:concat`</p></div>
<div class="toot" id="closed-1429"><h2>Issue #1429 closed<span class="toot-id"> #closed-1429</span></h2><div class="pubdate">01 Oct at 16:11:43 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1429">https://github.com/qt4cg/qtspecs/pull/1429</a></div><p>1403 Align type tests</p></div>
<div class="toot" id="closed-1465"><h2>Issue #1465 closed<span class="toot-id"> #closed-1465</span></h2><div class="pubdate">01 Oct at 15:55:18 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1465">https://github.com/qt4cg/qtspecs/pull/1465</a></div><p>1461 Generate correct tests for functions involving named record types</p></div>
<div class="toot" id="created-1473"><h2>Issue #1473 created<span class="toot-id"> #created-1473</span></h2><div class="pubdate">01 Oct at 15:46:06 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1473">https://github.com/qt4cg/qtspecs/issues/1473</a></div><details><summary>fn:identity: make it variadic</summary><div class="markup"><p>…see https://github.com/qt4cg/qtspecs/pull/1437#issuecomment-2346599503.</p>
</div></details></div>
<div class="toot" id="created-1472"><h2>Pull request #1472 created<span class="toot-id"> #created-1472</span></h2><div class="pubdate">01 Oct at 14:29:43 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1472">https://github.com/qt4cg/qtspecs/pull/1472</a></div><details><summary>1471 JSON Serialization: Sequences on Top Level</summary><div class="markup"><p>Issue: #1471</p>
</div></details></div>
<div class="toot" id="created-1471"><h2>Issue #1471 created<span class="toot-id"> #created-1471</span></h2><div class="pubdate">01 Oct at 13:43:34 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1471">https://github.com/qt4cg/qtspecs/issues/1471</a></div><details><summary>JSON Serialization: Sequences on Top Level</summary><div class="markup"><p>Extracted from #576:</p>
<p>All serialization methods except for <code>json</code> allow sequences to be output on top level. We should also allow this for JSON data. This way, constructs like…</p>
<pre><code class="language-xquery">declare option output:item-separator '&amp;#xa;';
declare option output:method 'text';

for $json in ({ 1: 2 }, { 3: 4 })
return serialize($json, { 'method': 'json' })
</code></pre>
<p>…can be simplified to:</p>
<pre><code class="language-xquery">declare option output:item-separator '&amp;#xa;';
declare option output:method 'json';
{ 1: 2 },
{ 3: 4 }
</code></pre>
<p>We should still not allow sequences within JSON structures. It would be inconsistent to have different output rules depending on the number of items in a sequence (<code>(1)</code> and <code>[1]</code> would not be serialized identically).</p>
</div></details></div>
<div class="toot" id="created-1470"><h2>Pull request #1470 created<span class="toot-id"> #created-1470</span></h2><div class="pubdate">01 Oct at 13:02:38 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1470">https://github.com/qt4cg/qtspecs/pull/1470</a></div><details><summary>689 fn:stack-trace: replace with $err:stack-trace</summary><div class="markup"><p>Issue: #689</p>
</div></details></div>
<div class="toot" id="created-1469"><h2>Issue #1469 created<span class="toot-id"> #created-1469</span></h2><div class="pubdate">01 Oct at 08:54:51 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1469">https://github.com/qt4cg/qtspecs/issues/1469</a></div><details><summary>Function finder</summary><div class="markup"><p>With the number of functions in the fn:namespace now standing at 213, the use of a drop-down in the F+O "function finder" has become a little unwieldy. Are there ways it could be improved, for example by reducing the size of the list when you type the first character of the required function name?</p>
</div></details></div>
<div class="toot" id="created-1468"><h2>Issue #1468 created<span class="toot-id"> #created-1468</span></h2><div class="pubdate">01 Oct at 02:00:41 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1468">https://github.com/qt4cg/qtspecs/issues/1468</a></div><details><summary>Understanding the xsl:array constructor</summary><div class="markup"><p>In reading the XSLT specs on the <code>xsl:array</code> constructor (#406 adopted at meeting <a href="https://qt4cg.org/meeting/minutes/2023/03-28.html#pr-406">28</a>) I find myself somewhat confused. Either I need to be illumined, the specs need to be clarified, or some other adjustments are needed.</p>
<p>First, I'm still struck by the disparity between maps and arrays; there's a <code>xsl:map-member</code> but no <code>xsl:array-member</code>. That horse has been beaten many times, I know. But I need to record that the disparity is very noticeable. The disorientation is aggravated by the second example in the <a href="https://qt4cg.org/specifications/xslt-40/Overview.html#array-construction">constructor overview</a>:</p>
<pre><code>&lt;xsl:array use="?value"&gt;
   &lt;xsl:for-each-group select="0 to 19" group-adjacent=". idiv 4"&gt;
     &lt;xsl:map-entry key="'value'" select="current-group()"/&gt;
   &lt;/xsl:for-each-group&gt;
&lt;/xsl:array&gt;
</code></pre>
<p>A map entry within an array? This just strikes me as a hack, and is suggestive of a design flaw in the language. (I know what you're about to say in response; hold that thought...) That's exacerbated when I see example 2c invoking an array constructor within an array, only to get rid of the nested array to get at what you wanted in the first place, the items grouped into members.</p>
<p>Furthermore, the value of attribute <code>@use</code>, <code>?value</code>, is cryptic. Yes, I get what's going on, but the first several times reading it I thought it was very abracadabrish. And that same feeling hit me for the other examples' values of <code>@use</code>: <code>.()</code> and <code>?*</code>. The <code>.()</code> bit of syntax appears only twice in the specs (here), without explanation.</p>
<p>If <code>@use</code> is evaluated once for every item, then in example 2b...</p>
<pre><code>&lt;xsl:array use=".()"&gt;
   &lt;xsl:for-each-group select="0 to 19" group-adjacent=". idiv 4"&gt;
     &lt;xsl:sequence select="current-group#0"/&gt;
   &lt;/xsl:for-each-group&gt;
&lt;/xsl:array&gt;
</code></pre>
<p>...I would expect the expression <code>.()</code> to be applied to twenty items, because a sequence of five sequences of four items each is simply one sequence of twenty items, innit? Or are we allowed here and only here for a sequence constructor to create a sequence of sequences?</p>
<p>It seems that <code>@use</code> is striving to do something similar to <code>@group-by</code> in <code>xsl:for-each-group</code>. But it isn't. Understanding the goal is obfuscated by the vague name. Use what, to what end?</p>
<p>Overall, I feel that the array constructor is a 2nd-class citizen in the specs. I love using the map constructor in XSLT: it tells users very clearly what's going on. I don't look forward to the using the array constructor in XSLT, because I think it does the opposite. But maybe I'm wrong.</p>
<p>I don't have a specific proposal to fix, because I understand some of the conceptual hurdles to a putative <code>xsl:array-member</code>. Still. I can't help but wish that that's what we had.</p>
</div></details></div>
<div class="toot" id="created-1467"><h2>Pull request #1467 created<span class="toot-id"> #created-1467</span></h2><div class="pubdate">01 Oct at 00:37:28 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1467">https://github.com/qt4cg/qtspecs/pull/1467</a></div><details><summary>Modest editorial corrections to XSLT specs through 2.7</summary><div class="markup"><ul>
<li>Two largish sections had duplicate prose nearby;</li>
<li>Some punctuation rendered consistently;</li>
<li>Some substantive insertions/edits for clarification, when it seemed clear to me.</li>
</ul>
<p>Let me know if any of these changes are misfires.</p>
</div></details></div>
<div class="toot" id="created-1466"><h2>Pull request #1466 created<span class="toot-id"> #created-1466</span></h2><div class="pubdate">28 Sep at 09:34:49 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1466">https://github.com/qt4cg/qtspecs/pull/1466</a></div><details><summary>1464 Standardize on "implementer" spelling</summary><div class="markup"><p>Fix #1464</p>
</div></details></div>
<div class="toot" id="created-1465"><h2>Pull request #1465 created<span class="toot-id"> #created-1465</span></h2><div class="pubdate">28 Sep at 09:25:03 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1465">https://github.com/qt4cg/qtspecs/pull/1465</a></div><details><summary>1461 Generate correct tests for functions involving named record types</summary><div class="markup"><p>This PR addresses issue #1461 in a fairly narrow way, without attempting to tackle the deeper problem identified in issue #1336.</p>
<p>This involves expanding the <code>fos:type</code> entries for types such as <code>uri-structure-record</code> that are referenced in function signatures, resulting in some duplication with the <code>fos:record-description</code> entries that describe the same types in a different place.: hopefully the resolution to #1336 will resolve that duplication.</p>
</div></details></div>
<div class="toot" id="created-1464"><h2>Issue #1464 created<span class="toot-id"> #created-1464</span></h2><div class="pubdate">27 Sep at 12:56:57 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1464">https://github.com/qt4cg/qtspecs/issues/1464</a></div><details><summary>Inconsistent spelling: implementer or implementor?</summary><div class="markup"><p>We use both spellings.</p>
<p>oxfordreference.com says: Although the variant spelling implementor predominated for much of the late 20th century, today implementer is considered standard.</p>
<p>Personally, being a late 20th century kind of guy, I prefer "implementor", but we should be consistent.</p>
</div></details></div>
<div class="toot" id="created-1463"><h2>Issue #1463 created<span class="toot-id"> #created-1463</span></h2><div class="pubdate">25 Sep at 14:45:49 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1463">https://github.com/qt4cg/qtspecs/issues/1463</a></div><details><summary>fn:element-number: Feedback</summary><div class="markup"><ol>
<li>All other XQFO functions that have <code>.</code> as the default value for a node parameter (<code>fn:name</code>, etc.) return an empty sequence if the passed argument is an empty sequence. Could we use the same rule for <code>fn:element-number</code>?</li>
<li>The last example is incomplete; it must be <code>$e//section...</code></li>
<li>The last example should return <code>1.2</code> instead of <code>1.1</code>. If the given result is correct, the equivalent XPath expression needs to be revised.</li>
</ol>
<p>While it was a no-brainer to implement the function, its specification seems overwhelming to me. I eventually read all the notes, but at the end I was more confused than in the beginning ;·) It could be one of those functions that are more accessible to users than to implementors, though.</p>
<p>Still, maybe at least 1, 2 more examples could be provided? The last example goes into that direction, but it could be a bit cryptic for non-experts (e.g. it expects users to know that the result of <code>$s/ancestor-or-self::section</code> is returned in document order).</p>
<p>As this function seems to be mostly targeted to XSLT users, maybe we should offer XSLT examples. I assume that XQuery developers may rather be tempted to enumerate all children/descedants of a node, and write recursive code like…</p>
<pre><code class="language-xquery">declare function enumerate($element, $numbers) {
  for $child at $pos in $element/*
  let $n := $numbers || '.' || $pos
  return ($n, enumerate($child, $numbers || $n))
};
</code></pre>
<p>In general, if we were able to generalize the function in one way or another, that would be great.</p>
</div></details></div>
<div class="toot" id="created-1462"><h2>Issue #1462 created<span class="toot-id"> #created-1462</span></h2><div class="pubdate">25 Sep at 13:38:08 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1462">https://github.com/qt4cg/qtspecs/issues/1462</a></div><details><summary>fn:deep-equal: default option</summary><div class="markup"><p>The default value for the option parameter of <code>fn:deep-equal</code> is:</p>
<pre><code class="language-xquery">{ 'collation': fn:default-collation() }
</code></pre>
<p>Can we simply use <code>{}</code>, or is there a particular reason for mentioning the <code>collation</code> and no other option?</p>
</div></details></div>
<div class="toot" id="created-1461"><h2>Issue #1461 created<span class="toot-id"> #created-1461</span></h2><div class="pubdate">24 Sep at 16:34:30 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1461">https://github.com/qt4cg/qtspecs/issues/1461</a></div><details><summary>### Errors in `misc/BuiltinKeywords`</summary><div class="markup"><pre><code>          ### Errors in `misc/BuiltinKeywords`
</code></pre>
<p>Test cases <code>Keywords-fn-parse-html-1</code> and <code>Keywords-fn-build-uri-1</code> contain invalid function signatures, caused I think by a bug in <code>generate-keyword-test-set.xsl</code>. Both seem to omit the <code>SequenceType</code> of one of the arguments:</p>
<pre><code> fn:parse-html(html := ?, options := ?) instance of 
    function((xs:string | xs:hexBinary | xs:base64Binary)?, ) as document-node(element(*:html))?
</code></pre>
<pre><code>fn:build-uri(parts := ?, options := ?) instance of function(, map(*)?) as xs:string
</code></pre>
<p>Examining <code>generate-keyword-test-set.xsl</code> shows:</p>
<pre><code>&lt;xsl:for-each select="arg"&gt;
      &lt;xsl:if test="position() != 1"&gt;, &lt;/xsl:if&gt;
      &lt;xsl:text&gt;{@type}&lt;/xsl:text&gt;
&lt;/xsl:for-each&gt;
</code></pre>
<p>but for these two function definitions, type information is indirected via a <code>@type-ref</code> attribute:</p>
<pre><code>&lt;fos:proto name="parse-html" return-type="document-node(element(*:html))?"&gt;
        &lt;fos:arg name="html" type="(xs:string | xs:hexBinary | xs:base64Binary)?"/&gt;
        &lt;fos:arg name="options" type-ref="parse-html-options"
                     default="{
                                 &amp;quot;method&amp;quot;: &amp;quot;html&amp;quot;,
                                 &amp;quot;html-version&amp;quot;: &amp;quot;5&amp;quot;
                              }"/&gt;
 &lt;/fos:proto&gt;
</code></pre>
<p>and</p>
<pre><code>&lt;fos:proto name="build-uri" return-type="xs:string"&gt;
            &lt;fos:arg name="parts" type-ref="uri-structure-record"
               example='{
               "scheme": "https",
               "host": "qt4cg.org",
               "port": (),
               "path": "/specifications/index.html"
               }'/&gt;
            &lt;fos:arg name="options" type="map(*)?" default="{}"/&gt;
&lt;/fos:proto&gt;
</code></pre>
<p><em>Originally posted by @johnlumley in https://github.com/qt4cg/qtspecs/issues/1451#issuecomment-2358082401</em></p>
</div></details></div>
<div class="toot" id="closed-1451"><h2>Issue #1451 closed<span class="toot-id"> #closed-1451</span></h2><div class="pubdate">24 Sep at 16:30:48 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1451">https://github.com/qt4cg/qtspecs/issues/1451</a></div><p>Minor syntax errors in FO examples</p></div>
<div class="toot" id="closed-1453"><h2>Issue #1453 closed<span class="toot-id"> #closed-1453</span></h2><div class="pubdate">24 Sep at 16:30:47 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1453">https://github.com/qt4cg/qtspecs/pull/1453</a></div><p>Fix typo in load-xquery-module example</p></div>
<div class="toot" id="closed-1235"><h2>Issue #1235 closed<span class="toot-id"> #closed-1235</span></h2><div class="pubdate">24 Sep at 16:27:46 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1235">https://github.com/qt4cg/qtspecs/issues/1235</a></div><p>Function Identity: Treating function items with identical bodies</p></div></div><p>See 2920
            more statuses in yearly archives.</p></article></main></body></html>