<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2024/">2024</a>, <a href="2023/">2023</a>, <a href="2022/">2022</a>, <a href="2021/">2021</a>, <a href="2020/">2020</a></p><div class="toots">
<div class="toot" id="created-1312"><h2>Issue #1312 created<span class="toot-id"> #created-1312</span></h2><div class="pubdate">01 Jul at 07:24:50 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1312">https://github.com/qt4cg/qtspecs/issues/1312</a></div><details><summary>Productions missing ws:explicit</summary><div class="markup"><p>Some lexical productions including</p>
<p>Digits, DecDigit, HexDigits,  HexDigit, BinaryDigits, BinaryDigit</p>
<p>are missing the ws:explicit annotation</p>
</div></details></div>
<div class="toot" id="created-1311"><h2>Issue #1311 created<span class="toot-id"> #created-1311</span></h2><div class="pubdate">30 Jun at 22:02:53 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1311">https://github.com/qt4cg/qtspecs/issues/1311</a></div><details><summary>Tokenization and element constructors</summary><div class="markup"><p>The new rules in Appendix A.3 on tokenization are, I believe, a great improvement on what went before. But I think there is one thing missing: they claim that the rules allow you to identify boundaries between tokens unambiguously independently of the syntactic context, but in the case of a token starting with <code>&lt;</code>, this isn't true: to distinguish whether <code>&lt;</code> represents a less-than-operator (or <code>&lt;=</code> operator) or whether it is the start of an element constructor, you need some context information.</p>
<p>Saxon's tokenization is still based on the principles outlined in the XPath 1.0 spec where tokens are disambiguated based on the immediately preceding and following tokens; this is becoming increasingly unviable. Most cases can be handled instead by moving the disambiguation into the parser rather than the tokenizer, but this relies on being able to find token boundaries without knowledge of context (as described in the 4.0 spec), which appears to be possible in all cases except <code>&lt;</code>.</p>
<p>Essentially we need to add an exception to the rule: <em>"If the current position is not the end of the input, then return the longest [literal terminal]( or [variable terminal] that can be matched starting at the current position..."</em></p>
<p>I think the exception might be formulated as follows:</p>
<p><em>In XQuery, when the next character is <code>&lt;</code> and this is immediately followed by an NCNameStart character (for example <code>X</code>) the next token could be either a less than operator, or a DirElemConstructor. The "longest terminal" rule cannot reliably distinguish these cases. Instead, the decision must take into account the syntactic context. A DirElemConstructor can only appear where the parser is expecting to read an expression, while the less-than operator can never appear where the parser is expecting an expression. This aspect of the syntactic context therefore needs to be communicated from the parser to the tokenizer.</em></p>
<p>Alternatively, the two cases might be distinguished by backtracking. The tokenizer could attempt to interpret the text following the <code>&lt;</code> character as a DirElemConstructor, and revert to the alternative interpretation if this fails.</p>
<p>Note: this was not explained clearly in 3.1. Perhaps it was covered by the quixotic phrase "the longest token consistent with the EBNF".</p>
</div></details></div>
<div class="toot" id="created-1310"><h2>Issue #1310 created<span class="toot-id"> #created-1310</span></h2><div class="pubdate">30 Jun at 02:38:48 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1310">https://github.com/qt4cg/qtspecs/issues/1310</a></div><p>add fn:match-groups() function</p></div>
<div class="toot" id="created-1309"><h2>Issue #1309 created<span class="toot-id"> #created-1309</span></h2><div class="pubdate">27 Jun at 19:53:55 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1309">https://github.com/qt4cg/qtspecs/issues/1309</a></div><details><summary>Dangling else syntax ambiguity</summary><div class="markup"><p>I think this is ambiguous, or at any rate, involves arbitrary lookahead:</p>
<p><code>if (a = b) then if (c = d) {23} else {}</code></p>
<p>You only get a successful parse if you associate the "else" with the first "if", but you can't do that until you know that there isn't going to be a second "else".</p>
<p>Again, it's the fact that an expression can now begin with a left curly brace that's the culprit.</p>
</div></details></div>
<div class="toot" id="created-1308"><h2>Issue #1308 created<span class="toot-id"> #created-1308</span></h2><div class="pubdate">27 Jun at 16:41:21 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1308">https://github.com/qt4cg/qtspecs/issues/1308</a></div><details><summary>fn:apply argument names</summary><div class="markup"><p>The narrative of fn:apply repeatedly refers to <code>$array</code> where <code>$arguments</code> is intended.</p>
</div></details></div>
<div class="toot" id="closed-1303"><h2>Issue #1303 closed<span class="toot-id"> #closed-1303</span></h2><div class="pubdate">27 Jun at 13:54:00 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1303">https://github.com/qt4cg/qtspecs/pull/1303</a></div><p>Recognize 'fn' as well as 'function' in signatures</p></div>
<div class="toot" id="created-1307"><h2>Issue #1307 created<span class="toot-id"> #created-1307</span></h2><div class="pubdate">27 Jun at 07:54:00 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1307">https://github.com/qt4cg/qtspecs/issues/1307</a></div><details><summary>For symmetry, add functions array:scan-left and array:scan-right</summary><div class="markup"><p>The fold-left and fold-right functions are defined both for sequences and arrays; symmetry demands that the same should apply to scan-left and scan-right.</p>
</div></details></div>
<div class="toot" id="closed-1281"><h2>Issue #1281 closed<span class="toot-id"> #closed-1281</span></h2><div class="pubdate">26 Jun at 08:51:55 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1281">https://github.com/qt4cg/qtspecs/issues/1281</a></div><p>invisible-xml() return type</p></div>
<div class="toot" id="closed-1294"><h2>Issue #1294 closed<span class="toot-id"> #closed-1294</span></h2><div class="pubdate">26 Jun at 08:47:14 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1294">https://github.com/qt4cg/qtspecs/pull/1294</a></div><p>46 Add xsl:item and xsl:sequence/@as</p></div>
<div class="toot" id="created-1306"><h2>Pull request #1306 created<span class="toot-id"> #created-1306</span></h2><div class="pubdate">26 Jun at 07:43:45 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1306">https://github.com/qt4cg/qtspecs/pull/1306</a></div><details><summary>46 Add @as attribute to xsl:sequence</summary><div class="markup"><p>Revised PR that drops the proposed xsl:item instruction</p>
</div></details></div>
<div class="toot" id="closed-1287"><h2>Issue #1287 closed<span class="toot-id"> #closed-1287</span></h2><div class="pubdate">25 Jun at 21:11:19 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1287">https://github.com/qt4cg/qtspecs/issues/1287</a></div><p>Missing error conditions for fn:parse-xml()</p></div>
<div class="toot" id="closed-1288"><h2>Issue #1288 closed<span class="toot-id"> #closed-1288</span></h2><div class="pubdate">25 Jun at 21:11:18 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1288">https://github.com/qt4cg/qtspecs/pull/1288</a></div><p>1287 Define parse-xml error conditions</p></div>
<div class="toot" id="closed-1298"><h2>Issue #1298 closed<span class="toot-id"> #closed-1298</span></h2><div class="pubdate">25 Jun at 20:45:23 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1298">https://github.com/qt4cg/qtspecs/issues/1298</a></div><p>In change markup, handle multiple issue or PR numbers</p></div>
<div class="toot" id="created-1305"><h2>Issue #1305 created<span class="toot-id"> #created-1305</span></h2><div class="pubdate">25 Jun at 19:22:02 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1305">https://github.com/qt4cg/qtspecs/issues/1305</a></div><details><summary>Almost all functions in FO that must process multiple string items, can have as a parameter only a single collation</summary><div class="markup"><p><strong>The problem</strong>:</p>
<p>At present the only XPath 4 function (that I am aware of) that can process multiple strings and use multiple collations (a specific collation for a specific string comparison) is <a href="https://qt4cg.org/specifications/xpath-functions-40/Overview.html#func-sort"><strong><code>fn:sort</code></strong></a>.</p>
<p>Some very important functions, such as <a href="https://qt4cg.org/specifications/xpath-functions-40/Overview.html#func-deep-equal"><strong><code>fn:deep-equal</code></strong></a> and <a href="https://qt4cg.org/specifications/xpath-functions-40/Overview.html#func-compare"><strong><code>fn:compare</code></strong></a> can have only one collation as a parameter.</p>
<p>This means that when we are comparing sequences of items which contain multiple strings each of which could need to be handled in a specific collation, we are not able to provide all such collations (but are providing just a single collation) to the comparing function - <code>fn:deep-equal</code> or <code>fn:compare</code>.</p>
<p>The end result is that all string comparisons will be done using that single collation and may not produce the correct result (that would be produced if the particular comparison was done with the particular collation).</p>
<p><strong>Possible solutions</strong>.</p>
<p>It is difficult to provide a solution to this problem and the list below is open ended:</p>
<ol>
<li>
<p>Add a <strong><code>collation</code></strong> property to the type <code>xs:string</code>.
Then we would specify the type as <strong><code>(xs:string, collation-name?)</code></strong></p>
</li>
<li>
<p>Make <code>fn:deep-equal</code> and <code>fn:compare</code> accept not a single collation but a sequence of collation-names.
In this case a pair of strings will be compared once for every collation that is specified. The idea is that the sequence of collations would be provided ordered by decreasing specificity. The first result that is produced at least twice in this process (something like voting) would be the result of the comparison. In case of a tie, the comparison done with the collation that is earliest (supposed to be more specific) will have higher priority.</p>
</li>
<li>
<p>Leave this as it is at present, but add to the specification a warning to the user that specifying a single collation-name may not be what they want.</p>
</li>
<li>
<p>Remove from <code>fn:sort</code> the multiple-collations parameter and allow only a single collation.</p>
</li>
</ol>
</div></details></div>
<div class="toot" id="minutes-06-25"><h2>QT4 CG meeting 088 draft minutes<span class="toot-id"> #minutes-06-25</span></h2><div class="pubdate">25 Jun at 17:30:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/minutes/2024/06-25">https://qt4cg.org/meeting/minutes/2024/06-25</a></div><p>Draft minutes published.</p></div>
<div class="toot" id="closed-1096"><h2>Issue #1096 closed<span class="toot-id"> #closed-1096</span></h2><div class="pubdate">25 Jun at 16:17:41 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1096">https://github.com/qt4cg/qtspecs/issues/1096</a></div><p>Effect of atomization on array:index-of()</p></div>
<div class="toot" id="closed-1295"><h2>Issue #1295 closed<span class="toot-id"> #closed-1295</span></h2><div class="pubdate">25 Jun at 16:17:40 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1295">https://github.com/qt4cg/qtspecs/pull/1295</a></div><p>1096 Redefine array:index-of to use deep-equal for comparisons</p></div>
<div class="toot" id="closed-1285"><h2>Issue #1285 closed<span class="toot-id"> #closed-1285</span></h2><div class="pubdate">25 Jun at 16:16:24 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1285">https://github.com/qt4cg/qtspecs/issues/1285</a></div><p>Appendix H of F&amp;O should mention change for unrecognised option parameters</p></div>
<div class="toot" id="closed-1286"><h2>Issue #1286 closed<span class="toot-id"> #closed-1286</span></h2><div class="pubdate">25 Jun at 16:16:23 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1286">https://github.com/qt4cg/qtspecs/pull/1286</a></div><p>Updated list of incompatibilities in F+O</p></div>
<div class="toot" id="closed-1291"><h2>Issue #1291 closed<span class="toot-id"> #closed-1291</span></h2><div class="pubdate">25 Jun at 16:12:23 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1291">https://github.com/qt4cg/qtspecs/issues/1291</a></div><p>Change obsolete notes on rounding</p></div>
<div class="toot" id="closed-1292"><h2>Issue #1292 closed<span class="toot-id"> #closed-1292</span></h2><div class="pubdate">25 Jun at 16:12:22 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1292">https://github.com/qt4cg/qtspecs/pull/1292</a></div><p>Fix issue 1291 (rounding)</p></div>
<div class="toot" id="closed-1253"><h2>Issue #1253 closed<span class="toot-id"> #closed-1253</span></h2><div class="pubdate">25 Jun at 16:09:40 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1253">https://github.com/qt4cg/qtspecs/issues/1253</a></div><p>XSLT: add xsl:switch to list of instructions within which whitespace is ignored</p></div>
<div class="toot" id="closed-1255"><h2>Issue #1255 closed<span class="toot-id"> #closed-1255</span></h2><div class="pubdate">25 Jun at 16:09:39 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1255">https://github.com/qt4cg/qtspecs/pull/1255</a></div><p>1253 whitespace in xsl:switch</p></div>
<div class="toot" id="closed-1282"><h2>Issue #1282 closed<span class="toot-id"> #closed-1282</span></h2><div class="pubdate">25 Jun at 16:06:06 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1282">https://github.com/qt4cg/qtspecs/pull/1282</a></div><p>Revise fn:invisible-xml</p></div>
<div class="toot" id="closed-1304"><h2>Issue #1304 closed<span class="toot-id"> #closed-1304</span></h2><div class="pubdate">25 Jun at 16:03:13 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1304">https://github.com/qt4cg/qtspecs/pull/1304</a></div><p>Fixed typo in the example of scan-right</p></div>
<div class="toot" id="closed-1290"><h2>Issue #1290 closed<span class="toot-id"> #closed-1290</span></h2><div class="pubdate">25 Jun at 07:39:45 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1290">https://github.com/qt4cg/qtspecs/pull/1290</a></div><p>Fix keyword tests to treat "fn" = "function"</p></div>
<div class="toot" id="closed-1302"><h2>Issue #1302 closed<span class="toot-id"> #closed-1302</span></h2><div class="pubdate">25 Jun at 04:24:21 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1302">https://github.com/qt4cg/qtspecs/pull/1302</a></div><p>Stylesheet fix for 1298</p></div>
<div class="toot" id="created-1304"><h2>Pull request #1304 created<span class="toot-id"> #created-1304</span></h2><div class="pubdate">24 Jun at 17:19:49 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1304">https://github.com/qt4cg/qtspecs/pull/1304</a></div><details><summary>Fixed typo in the example of scan-right</summary><div class="markup"><p>Fixed a minor typo in one of the examples for fn:scan-right</p>
</div></details></div>
<div class="toot" id="closed-1297"><h2>Issue #1297 closed<span class="toot-id"> #closed-1297</span></h2><div class="pubdate">24 Jun at 17:06:16 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1297">https://github.com/qt4cg/qtspecs/pull/1297</a></div><p>Minor correction to fn:scan-right  - typo</p></div>
<div class="toot" id="created-1303"><h2>Pull request #1303 created<span class="toot-id"> #created-1303</span></h2><div class="pubdate">24 Jun at 16:10:57 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1303">https://github.com/qt4cg/qtspecs/pull/1303</a></div><details><summary>Recognize 'fn' as well as 'function' in signatures</summary><div class="markup"><p>Stylesheet changes to the stylesheet that generates tests for all parameter keywords in system functions. The changes recognize <code>fn(</code> in function signatures indicating that the generated test case needs to supply a function as the argument value.</p>
</div></details></div></div><p>See 2596
            more statuses in yearly archives.</p></article></main></body></html>