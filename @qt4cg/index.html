<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2024/">2024</a>, <a href="2023/">2023</a>, <a href="2022/">2022</a>, <a href="2021/">2021</a>, <a href="2020/">2020</a></p><div class="toots">
<div class="toot" id="minutes-06-18"><h2>QT4 CG meeting 082 draft minutes<span class="toot-id"> #minutes-06-18</span></h2><div class="pubdate">18 Jun at 17:30:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/minutes/2024/06-18">https://qt4cg.org/meeting/minutes/2024/06-18</a></div><p>Draft minutes published.</p></div>
<div class="toot" id="closed-1274"><h2>Issue #1274 closed<span class="toot-id"> #closed-1274</span></h2><div class="pubdate">18 Jun at 16:27:24 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1274">https://github.com/qt4cg/qtspecs/issues/1274</a></div><p>Further refinement of fn:round()</p></div>
<div class="toot" id="closed-1275"><h2>Issue #1275 closed<span class="toot-id"> #closed-1275</span></h2><div class="pubdate">18 Jun at 16:27:23 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1275">https://github.com/qt4cg/qtspecs/pull/1275</a></div><p>1274 Further rounding modes</p></div>
<div class="toot" id="closed-1268"><h2>Issue #1268 closed<span class="toot-id"> #closed-1268</span></h2><div class="pubdate">18 Jun at 16:25:29 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1268">https://github.com/qt4cg/qtspecs/pull/1268</a></div><p>QT4CG-077-03 Add note on document order across documents</p></div>
<div class="toot" id="closed-1270"><h2>Issue #1270 closed<span class="toot-id"> #closed-1270</span></h2><div class="pubdate">18 Jun at 16:17:33 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1270">https://github.com/qt4cg/qtspecs/pull/1270</a></div><p>QT4CG-081-01 Add cross refererence from fn:round-half-to-even</p></div>
<div class="toot" id="closed-1276"><h2>Issue #1276 closed<span class="toot-id"> #closed-1276</span></h2><div class="pubdate">18 Jun at 16:14:16 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1276">https://github.com/qt4cg/qtspecs/pull/1276</a></div><p>QT4CG-081-03 parse-xml-[fragment]: $options should be optional</p></div>
<div class="toot" id="closed-1278"><h2>Issue #1278 closed<span class="toot-id"> #closed-1278</span></h2><div class="pubdate">18 Jun at 16:12:21 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1278">https://github.com/qt4cg/qtspecs/issues/1278</a></div><p>Line endings in unparsed-text-lines()</p></div>
<div class="toot" id="closed-1279"><h2>Issue #1279 closed<span class="toot-id"> #closed-1279</span></h2><div class="pubdate">18 Jun at 16:12:20 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1279">https://github.com/qt4cg/qtspecs/pull/1279</a></div><p>1278 - line endings in unparsed-text-lines</p></div>
<div class="toot" id="closed-1267"><h2>Issue #1267 closed<span class="toot-id"> #closed-1267</span></h2><div class="pubdate">18 Jun at 16:07:01 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1267">https://github.com/qt4cg/qtspecs/issues/1267</a></div><p>fn:apply() - contradiction in spec</p></div>
<div class="toot" id="closed-1280"><h2>Issue #1280 closed<span class="toot-id"> #closed-1280</span></h2><div class="pubdate">18 Jun at 16:07:00 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1280">https://github.com/qt4cg/qtspecs/pull/1280</a></div><p>1267 fn:apply contradictions</p></div>
<div class="toot" id="created-1286"><h2>Pull request #1286 created<span class="toot-id"> #created-1286</span></h2><div class="pubdate">18 Jun at 10:58:29 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1286">https://github.com/qt4cg/qtspecs/pull/1286</a></div><details><summary>Updated list of incompatibilities in F+O</summary><div class="markup"><p>Added an incompatibility regarding unrecognized option values.</p>
<p>Removed an incompatibility regarding normalisation of line endings in unparsed-text().</p>
<p>Fix #1285</p>
</div></details></div>
<div class="toot" id="created-1285"><h2>Issue #1285 created<span class="toot-id"> #created-1285</span></h2><div class="pubdate">17 Jun at 16:31:10 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1285">https://github.com/qt4cg/qtspecs/issues/1285</a></div><details><summary>Appendix H of F&amp;O should mention change for unrecognised option parameters</summary><div class="markup"><p>We have made a change to the option parameter conventions so that unrecognised options are no longer ignored, they are now rejected. We should document this in Appendix H as a backwards incompatibility.</p>
</div></details></div>
<div class="toot" id="created-1284"><h2>Issue #1284 created<span class="toot-id"> #created-1284</span></h2><div class="pubdate">17 Jun at 16:28:29 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1284">https://github.com/qt4cg/qtspecs/issues/1284</a></div><details><summary>Build issue: Unsupported specref to  [streamability-fn-distinct-ordered-nodes]</summary><div class="markup"><p>I <em>think</em> the problem is that there's no "streamibility of fn:distinct-ordered-nodes" section. The expanded versions of the XSLT 4.0 specification all contain generated links to such a section, but there's no such section.</p>
<p>Editorial oversight, or should that function <em>not</em> generate the specref for some reason?</p>
</div></details></div>
<div class="toot" id="created-1283"><h2>Pull request #1283 created<span class="toot-id"> #created-1283</span></h2><div class="pubdate">17 Jun at 15:56:48 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1283">https://github.com/qt4cg/qtspecs/pull/1283</a></div><details><summary>77b: Update expressions</summary><div class="markup"><p>This PR is the result of splitting PR #832 into two parts; this part extracts update expressions into a separate proposal, for ease of review.</p>
</div></details></div>
<div class="toot" id="created-1282"><h2>Pull request #1282 created<span class="toot-id"> #created-1282</span></h2><div class="pubdate">17 Jun at 15:47:18 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1282">https://github.com/qt4cg/qtspecs/pull/1282</a></div><details><summary>Revise fn:invisible-xml</summary><div class="markup"><ol>
<li>Resolve <code>QT4CG-080-04</code>: NW to revise p:invisible-xml, fix #991</li>
<li>Resolve <code>QT4CG-081-04</code>: NW to update the function signature of fn:invisible-xml</li>
<li>Resolve <code>QT4CG-081-04</code>: NW to describe why the grammar option can be empty on fn:invisible-xml</li>
</ol>
</div></details></div>
<div class="toot" id="created-1281"><h2>Issue #1281 created<span class="toot-id"> #created-1281</span></h2><div class="pubdate">17 Jun at 11:23:05 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1281">https://github.com/qt4cg/qtspecs/issues/1281</a></div><details><summary>invisible-xml() return type</summary><div class="markup"><p>It has been pointed out that the return type of <code>fn:invisible-xml()</code>, currently <code>fn(xs:string) as item()</code>, could be more precisely given as <code>fn(xs:string) as document-node()</code>.</p>
</div></details></div>
<div class="toot" id="created-1280"><h2>Pull request #1280 created<span class="toot-id"> #created-1280</span></h2><div class="pubdate">17 Jun at 07:52:21 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1280">https://github.com/qt4cg/qtspecs/pull/1280</a></div><details><summary>1267 fn:apply contradictions</summary><div class="markup"><p>Fix #1267</p>
</div></details></div>
<div class="toot" id="created-1279"><h2>Pull request #1279 created<span class="toot-id"> #created-1279</span></h2><div class="pubdate">17 Jun at 05:41:20 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1279">https://github.com/qt4cg/qtspecs/pull/1279</a></div><details><summary>1278 - line endings in unparsed-text-lines</summary><div class="markup"><p>Fix #1278</p>
</div></details></div>
<div class="toot" id="created-1278"><h2>Issue #1278 created<span class="toot-id"> #created-1278</span></h2><div class="pubdate">16 Jun at 21:28:05 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1278">https://github.com/qt4cg/qtspecs/issues/1278</a></div><details><summary>Line endings in unparsed-text-lines()</summary><div class="markup"><p>The status quo text says:</p>
<blockquote>
<p>The $options argument is interpreted in the same way as the $options argument of [fn:unparsed-text]. In particular, for backwards compatibility, the supplied argument may be either a string (the name of an encoding) or a map.</p>
<p>If the normalize-newlines option is set to true, then the single character U+000A (NEWLINE) , the single character U+000D (CARRIAGE RETURN) , and the character pair (U+000D (CARRIAGE RETURN) , U+000A (NEWLINE) ) are all recognized as line delimiters for the purpose of splitting the text into lines. If the option is set to false, then only the single character U+000A (NEWLINE) is recognized.</p>
<p>The result of the function is the same as the result of the expression:</p>
<p>(fn:unparsed-text($href, map:put($options, 'normalize-newlines', true()))
=&gt; fn:tokenize('\n'))
[not(position()=last() and .='')]</p>
</blockquote>
<p>There's clearly an inconsistency here. In unparsed-text, the default for normalize-newlines is false. But the equivalent expression ignores the supplied value and uses normalize-newlines=true. The second paragraph says that setting normalize-newlines to false means that only NL is recognized, but the equivalent expression contradicts this.</p>
<p>I think the answer is to disallow the normalize-newlines option entirely, and recognize all three line endings as in 3.1.</p>
</div></details></div>
<div class="toot" id="created-1277"><h2>Issue #1277 created<span class="toot-id"> #created-1277</span></h2><div class="pubdate">16 Jun at 18:52:52 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1277">https://github.com/qt4cg/qtspecs/issues/1277</a></div><details><summary>Declare named record types</summary><div class="markup"><p>Raised in response to action QT4CG-063-06.</p>
<p>Currently named item types are simply an alias - except when they declare a record type, in which case they have some magic properties by allowing the record type to be recursive, and by the fact that they implicitly create constructor functions.</p>
<p>We would also like to refine these constructor functions for example by allowing default values for fields to be defined.</p>
<p>It might therefore make sense to define a separate construct for declaring named record types (in both XQuery and XSLT), and perhaps putting these in a separate category in the static context.</p>
<p>We might also consider introducing some built-in named record types, for example for key-value pairs, so that users can conveniently construct instances of these record types without explicitly declaring them. These would presumably be in the fn namespace.</p>
</div></details></div>
<div class="toot" id="created-1276"><h2>Pull request #1276 created<span class="toot-id"> #created-1276</span></h2><div class="pubdate">16 Jun at 18:05:02 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1276">https://github.com/qt4cg/qtspecs/pull/1276</a></div><details><summary>QT4CG-081-03 parse-xml-[fragment]: $options should be optional</summary><div class="markup"><p>Changes the function signature of parse-xml and parse-xml-fragment so the $options argument can be set to an empty sequence.</p>
</div></details></div>
<div class="toot" id="created-1275"><h2>Pull request #1275 created<span class="toot-id"> #created-1275</span></h2><div class="pubdate">14 Jun at 10:54:04 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1275">https://github.com/qt4cg/qtspecs/pull/1275</a></div><details><summary>1274 Further rounding modes</summary><div class="markup"><p>Fix #1274</p>
</div></details></div>
<div class="toot" id="created-1274"><h2>Issue #1274 created<span class="toot-id"> #created-1274</span></h2><div class="pubdate">14 Jun at 09:44:02 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1274">https://github.com/qt4cg/qtspecs/issues/1274</a></div><details><summary>Further refinement of fn:round()</summary><div class="markup"><p>I've been adding tests and an implementation of the changes to fn:round() which now allow control of midpoint rounding, and this generates some thoughts.</p>
<p>Firstly, we're using the rounding modes "floor" and "ceiling" with a different meaning from Java class RoundingMode, which may confuse some users. In our spec, these only affect handling of midpoint values, whereas in Java they affect all values, for example rounding 1.7 with rounding mode "floor" gives 1.0.</p>
<p>Secondly, the function library only offers <code>fn:floor()</code> and <code>fn:ceiling()</code> to an integer. There's no way, for example, of rounding 1.9997 to 1.999 (which happens to be what we do in <code>format-time()</code>).</p>
<p>So I propose that we extend the set of rounding modes to:</p>
<ul>
<li>floor - towards negative infinity</li>
<li>ceiling - towards positive infinity</li>
<li>toward-zero - towards zero (i.e. truncate)</li>
<li>away-from-zero - away from zero</li>
<li>half-to-floor - to nearest, or floor if at midpoint</li>
<li>half-to-ceiling - to nearest, or ceiling if at midpoint</li>
<li>half-toward-zero - to nearest, or toward zero if at midpoint</li>
<li>half-away-from-zero - to nearest, or away from zero if at midpoint</li>
<li>half-to-even - to nearest, or to even if at midpoint</li>
</ul>
</div></details></div>
<div class="toot" id="created-1273"><h2>Issue #1273 created<span class="toot-id"> #created-1273</span></h2><div class="pubdate">13 Jun at 16:49:10 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1273">https://github.com/qt4cg/qtspecs/issues/1273</a></div><details><summary>Generalize for-each-pair to work with any number of input sequences</summary><div class="markup"><p>Inspired by https://stackoverflow.com/questions/78614003</p>
<p>fn:for-each-pair is great when you want to select corresponding items from two input sequences. But what if there are more than two?</p>
<p>We could provide</p>
<p><code>for-corresponding-items($input-sequences as array(item*)), $action as function(item()*))</code></p>
<p>For example</p>
<pre><code>for-corresponding-items([(1,2,3), ("a","b","c"), (true(), false(), true())],
       fn{ array{.} }
)
</code></pre>
<p>returns <code>[1, "a", true()], [2, "b", false()], [3, "c", true()]</code></p>
</div></details></div>
<div class="toot" id="created-1272"><h2>Issue #1272 created<span class="toot-id"> #created-1272</span></h2><div class="pubdate">12 Jun at 08:27:36 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1272">https://github.com/qt4cg/qtspecs/issues/1272</a></div><details><summary>Add xsl:value-of/@as attribute</summary><div class="markup"><p>It has been suggested that we should add an @as attribute to xsl:value-of.</p>
<p>The intent is to use this when returning a function result:</p>
<pre><code>&lt;xsl:function name="f:incr"&gt;
  &lt;xsl:param name="x" as="xs:integer"/&gt;
  &lt;xsl:value-of select="$x+1" as="xs:integer"/&gt;
&lt;/xsl:function&gt;
</code></pre>
<p>In the absense of the @as attribute, the instruction constructs a text node as now. If @as is added, the effect of the instruction is to evaluate the select expression and coerce the result to the specified type.</p>
<p>There are a number of questions of detail. What do we do about the @separator and @disable-output-escaping attributes? Do we allow <code>as="text()"</code> so that there is an explicit way of getting the default behavior?</p>
<p>More generally, will this actually make users' lives easier? It might read better than <code>xsl:sequence</code> in this situation, but it isn't any more discoverable. Users who write code by copy-and-paste will still write xsl:value-of without realising the significance of the @as attribute.</p>
</div></details></div>
<div class="toot" id="created-1271"><h2>Issue #1271 created<span class="toot-id"> #created-1271</span></h2><div class="pubdate">12 Jun at 06:42:57 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1271">https://github.com/qt4cg/qtspecs/issues/1271</a></div><details><summary>Schema validation in XPath</summary><div class="markup"><p>In PR #1257 we added an options parameter to parse-xml() which includes the ability to request schema validation. We should make it clear what happens if this option is used in a non-schema-aware processor.</p>
<p>XPath does not have the XQuery validate expression but it can now request validation by calling <code>serialize() =&gt; parse-xml()</code>. This doesn't seem very satisfactory - either XPath shouldn't have a validation capability, or it should do it properly.</p>
<p>This will also affect other functions such as doc() if we add options for schema validation.</p>
</div></details></div>
<div class="toot" id="created-1270"><h2>Pull request #1270 created<span class="toot-id"> #created-1270</span></h2><div class="pubdate">11 Jun at 20:38:10 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1270">https://github.com/qt4cg/qtspecs/pull/1270</a></div><p>QT4CG-081-01 Add cross refererence from fn:round-half-to-even</p></div>
<div class="toot" id="closed-1248"><h2>Issue #1248 closed<span class="toot-id"> #closed-1248</span></h2><div class="pubdate">11 Jun at 20:19:18 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1248">https://github.com/qt4cg/qtspecs/issues/1248</a></div><p>for member allowing empty</p></div>
<div class="toot" id="closed-1241"><h2>Issue #1241 closed<span class="toot-id"> #closed-1241</span></h2><div class="pubdate">11 Jun at 16:27:17 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1241">https://github.com/qt4cg/qtspecs/issues/1241</a></div><p>Node constructor vs. otherwise/map constructor</p></div>
<div class="toot" id="closed-1259"><h2>Issue #1259 closed<span class="toot-id"> #closed-1259</span></h2><div class="pubdate">11 Jun at 16:27:16 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1259">https://github.com/qt4cg/qtspecs/pull/1259</a></div><p>1241 Add constraint to resolve node constructor ambiguity</p></div></div><p>See 2542
            more statuses in yearly archives.</p></article></main></body></html>