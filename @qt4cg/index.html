<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2024/">2024</a>, <a href="2023/">2023</a>, <a href="2022/">2022</a>, <a href="2021/">2021</a>, <a href="2020/">2020</a></p><div class="toots">
<div class="toot" id="created-1280"><h2>Pull request #1280 created<span class="toot-id"> #created-1280</span></h2><div class="pubdate">17 Jun at 07:52:21 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1280">https://github.com/qt4cg/qtspecs/pull/1280</a></div><details><summary>1267 fn:apply contradictions</summary><div class="markup"><p>Fix #1267</p>
</div></details></div>
<div class="toot" id="created-1279"><h2>Pull request #1279 created<span class="toot-id"> #created-1279</span></h2><div class="pubdate">17 Jun at 05:41:20 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1279">https://github.com/qt4cg/qtspecs/pull/1279</a></div><details><summary>1278 - line endings in unparsed-text-lines</summary><div class="markup"><p>Fix #1278</p>
</div></details></div>
<div class="toot" id="created-1278"><h2>Issue #1278 created<span class="toot-id"> #created-1278</span></h2><div class="pubdate">16 Jun at 21:28:05 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1278">https://github.com/qt4cg/qtspecs/issues/1278</a></div><details><summary>Line endings in unparsed-text-lines()</summary><div class="markup"><p>The status quo text says:</p>
<blockquote>
<p>The $options argument is interpreted in the same way as the $options argument of [fn:unparsed-text]. In particular, for backwards compatibility, the supplied argument may be either a string (the name of an encoding) or a map.</p>
<p>If the normalize-newlines option is set to true, then the single character U+000A (NEWLINE) , the single character U+000D (CARRIAGE RETURN) , and the character pair (U+000D (CARRIAGE RETURN) , U+000A (NEWLINE) ) are all recognized as line delimiters for the purpose of splitting the text into lines. If the option is set to false, then only the single character U+000A (NEWLINE) is recognized.</p>
<p>The result of the function is the same as the result of the expression:</p>
<p>(fn:unparsed-text($href, map:put($options, 'normalize-newlines', true()))
=&gt; fn:tokenize('\n'))
[not(position()=last() and .='')]</p>
</blockquote>
<p>There's clearly an inconsistency here. In unparsed-text, the default for normalize-newlines is false. But the equivalent expression ignores the supplied value and uses normalize-newlines=true. The second paragraph says that setting normalize-newlines to false means that only NL is recognized, but the equivalent expression contradicts this.</p>
<p>I think the answer is to disallow the normalize-newlines option entirely, and recognize all three line endings as in 3.1.</p>
</div></details></div>
<div class="toot" id="created-1277"><h2>Issue #1277 created<span class="toot-id"> #created-1277</span></h2><div class="pubdate">16 Jun at 18:52:52 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1277">https://github.com/qt4cg/qtspecs/issues/1277</a></div><details><summary>Declare named record types</summary><div class="markup"><p>Raised in response to action QT4CG-063-06.</p>
<p>Currently named item types are simply an alias - except when they declare a record type, in which case they have some magic properties by allowing the record type to be recursive, and by the fact that they implicitly create constructor functions.</p>
<p>We would also like to refine these constructor functions for example by allowing default values for fields to be defined.</p>
<p>It might therefore make sense to define a separate construct for declaring named record types (in both XQuery and XSLT), and perhaps putting these in a separate category in the static context.</p>
<p>We might also consider introducing some built-in named record types, for example for key-value pairs, so that users can conveniently construct instances of these record types without explicitly declaring them. These would presumably be in the fn namespace.</p>
</div></details></div>
<div class="toot" id="created-1276"><h2>Pull request #1276 created<span class="toot-id"> #created-1276</span></h2><div class="pubdate">16 Jun at 18:05:02 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1276">https://github.com/qt4cg/qtspecs/pull/1276</a></div><details><summary>QT4CG-081-03 parse-xml-[fragment]: $options should be optional</summary><div class="markup"><p>Changes the function signature of parse-xml and parse-xml-fragment so the $options argument can be set to an empty sequence.</p>
</div></details></div>
<div class="toot" id="created-1275"><h2>Pull request #1275 created<span class="toot-id"> #created-1275</span></h2><div class="pubdate">14 Jun at 10:54:04 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1275">https://github.com/qt4cg/qtspecs/pull/1275</a></div><details><summary>1274 Further rounding modes</summary><div class="markup"><p>Fix #1274</p>
</div></details></div>
<div class="toot" id="created-1274"><h2>Issue #1274 created<span class="toot-id"> #created-1274</span></h2><div class="pubdate">14 Jun at 09:44:02 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1274">https://github.com/qt4cg/qtspecs/issues/1274</a></div><details><summary>Further refinement of fn:round()</summary><div class="markup"><p>I've been adding tests and an implementation of the changes to fn:round() which now allow control of midpoint rounding, and this generates some thoughts.</p>
<p>Firstly, we're using the rounding modes "floor" and "ceiling" with a different meaning from Java class RoundingMode, which may confuse some users. In our spec, these only affect handling of midpoint values, whereas in Java they affect all values, for example rounding 1.7 with rounding mode "floor" gives 1.0.</p>
<p>Secondly, the function library only offers <code>fn:floor()</code> and <code>fn:ceiling()</code> to an integer. There's no way, for example, of rounding 1.9997 to 1.999 (which happens to be what we do in <code>format-time()</code>).</p>
<p>So I propose that we extend the set of rounding modes to:</p>
<ul>
<li>floor - towards negative infinity</li>
<li>ceiling - towards positive infinity</li>
<li>toward-zero - towards zero (i.e. truncate)</li>
<li>away-from-zero - away from zero</li>
<li>half-to-floor - to nearest, or floor if at midpoint</li>
<li>half-to-ceiling - to nearest, or ceiling if at midpoint</li>
<li>half-toward-zero - to nearest, or toward zero if at midpoint</li>
<li>half-away-from-zero - to nearest, or away from zero if at midpoint</li>
<li>half-to-even - to nearest, or to even if at midpoint</li>
</ul>
</div></details></div>
<div class="toot" id="created-1273"><h2>Issue #1273 created<span class="toot-id"> #created-1273</span></h2><div class="pubdate">13 Jun at 16:49:10 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1273">https://github.com/qt4cg/qtspecs/issues/1273</a></div><details><summary>Generalize for-each-pair to work with any number of input sequences</summary><div class="markup"><p>Inspired by https://stackoverflow.com/questions/78614003</p>
<p>fn:for-each-pair is great when you want to select corresponding items from two input sequences. But what if there are more than two?</p>
<p>We could provide</p>
<p><code>for-corresponding-items($input-sequences as array(item*)), $action as function(item()*))</code></p>
<p>For example</p>
<pre><code>for-corresponding-items([(1,2,3), ("a","b","c"), (true(), false(), true())],
       fn{ array{.} }
)
</code></pre>
<p>returns <code>[1, "a", true()], [2, "b", false()], [3, "c", true()]</code></p>
</div></details></div>
<div class="toot" id="created-1272"><h2>Issue #1272 created<span class="toot-id"> #created-1272</span></h2><div class="pubdate">12 Jun at 08:27:36 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1272">https://github.com/qt4cg/qtspecs/issues/1272</a></div><details><summary>Add xsl:value-of/@as attribute</summary><div class="markup"><p>It has been suggested that we should add an @as attribute to xsl:value-of.</p>
<p>The intent is to use this when returning a function result:</p>
<pre><code>&lt;xsl:function name="f:incr"&gt;
  &lt;xsl:param name="x" as="xs:integer"/&gt;
  &lt;xsl:value-of select="$x+1" as="xs:integer"/&gt;
&lt;/xsl:function&gt;
</code></pre>
<p>In the absense of the @as attribute, the instruction constructs a text node as now. If @as is added, the effect of the instruction is to evaluate the select expression and coerce the result to the specified type.</p>
<p>There are a number of questions of detail. What do we do about the @separator and @disable-output-escaping attributes? Do we allow <code>as="text()"</code> so that there is an explicit way of getting the default behavior?</p>
<p>More generally, will this actually make users' lives easier? It might read better than <code>xsl:sequence</code> in this situation, but it isn't any more discoverable. Users who write code by copy-and-paste will still write xsl:value-of without realising the significance of the @as attribute.</p>
</div></details></div>
<div class="toot" id="created-1271"><h2>Issue #1271 created<span class="toot-id"> #created-1271</span></h2><div class="pubdate">12 Jun at 06:42:57 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1271">https://github.com/qt4cg/qtspecs/issues/1271</a></div><details><summary>Schema validation in XPath</summary><div class="markup"><p>In PR #1257 we added an options parameter to parse-xml() which includes the ability to request schema validation. We should make it clear what happens if this option is used in a non-schema-aware processor.</p>
<p>XPath does not have the XQuery validate expression but it can now request validation by calling <code>serialize() =&gt; parse-xml()</code>. This doesn't seem very satisfactory - either XPath shouldn't have a validation capability, or it should do it properly.</p>
<p>This will also affect other functions such as doc() if we add options for schema validation.</p>
</div></details></div>
<div class="toot" id="created-1270"><h2>Pull request #1270 created<span class="toot-id"> #created-1270</span></h2><div class="pubdate">11 Jun at 20:38:10 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1270">https://github.com/qt4cg/qtspecs/pull/1270</a></div><p>QT4CG-081-01 Add cross refererence from fn:round-half-to-even</p></div>
<div class="toot" id="closed-1248"><h2>Issue #1248 closed<span class="toot-id"> #closed-1248</span></h2><div class="pubdate">11 Jun at 20:19:18 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1248">https://github.com/qt4cg/qtspecs/issues/1248</a></div><p>for member allowing empty</p></div>
<div class="toot" id="closed-1241"><h2>Issue #1241 closed<span class="toot-id"> #closed-1241</span></h2><div class="pubdate">11 Jun at 16:27:17 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1241">https://github.com/qt4cg/qtspecs/issues/1241</a></div><p>Node constructor vs. otherwise/map constructor</p></div>
<div class="toot" id="closed-1259"><h2>Issue #1259 closed<span class="toot-id"> #closed-1259</span></h2><div class="pubdate">11 Jun at 16:27:16 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1259">https://github.com/qt4cg/qtspecs/pull/1259</a></div><p>1241 Add constraint to resolve node constructor ambiguity</p></div>
<div class="toot" id="closed-1246"><h2>Issue #1246 closed<span class="toot-id"> #closed-1246</span></h2><div class="pubdate">11 Jun at 16:25:03 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1246">https://github.com/qt4cg/qtspecs/issues/1246</a></div><p>fn:json-to-xml: `number-parser` option</p></div>
<div class="toot" id="closed-1258"><h2>Issue #1258 closed<span class="toot-id"> #closed-1258</span></h2><div class="pubdate">11 Jun at 16:25:02 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1258">https://github.com/qt4cg/qtspecs/pull/1258</a></div><p>1246 Revert incompatibility in json-to-xml number formatting</p></div>
<div class="toot" id="closed-305"><h2>Issue #305 closed<span class="toot-id"> #closed-305</span></h2><div class="pubdate">11 Jun at 16:23:35 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/305">https://github.com/qt4cg/qtspecs/issues/305</a></div><p>parse-xml() and whitespace stripping</p></div>
<div class="toot" id="closed-1257"><h2>Issue #1257 closed<span class="toot-id"> #closed-1257</span></h2><div class="pubdate">11 Jun at 16:23:34 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1257">https://github.com/qt4cg/qtspecs/pull/1257</a></div><p>305 Add options parameter for parse-xml and parse-xml-fragment</p></div>
<div class="toot" id="closed-1187"><h2>Issue #1187 closed<span class="toot-id"> #closed-1187</span></h2><div class="pubdate">11 Jun at 16:21:26 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1187">https://github.com/qt4cg/qtspecs/issues/1187</a></div><p>Decimal rounding</p></div>
<div class="toot" id="closed-1260"><h2>Issue #1260 closed<span class="toot-id"> #closed-1260</span></h2><div class="pubdate">11 Jun at 16:21:25 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1260">https://github.com/qt4cg/qtspecs/pull/1260</a></div><p>1187 Add midpoint-rounding option to fn:round()</p></div>
<div class="toot" id="closed-991"><h2>Issue #991 closed<span class="toot-id"> #closed-991</span></h2><div class="pubdate">11 Jun at 16:19:48 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/991">https://github.com/qt4cg/qtspecs/issues/991</a></div><p>Invisible-xml - missing details</p></div>
<div class="toot" id="closed-1256"><h2>Issue #1256 closed<span class="toot-id"> #closed-1256</span></h2><div class="pubdate">11 Jun at 16:19:47 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1256">https://github.com/qt4cg/qtspecs/pull/1256</a></div><p>991 Fix editorial details in fn:invisible-xml</p></div>
<div class="toot" id="closed-1250"><h2>Issue #1250 closed<span class="toot-id"> #closed-1250</span></h2><div class="pubdate">11 Jun at 16:17:28 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1250">https://github.com/qt4cg/qtspecs/pull/1250</a></div><p>1048 Extended decimal format properties</p></div>
<div class="toot" id="closed-1249"><h2>Issue #1249 closed<span class="toot-id"> #closed-1249</span></h2><div class="pubdate">11 Jun at 16:15:16 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1249">https://github.com/qt4cg/qtspecs/pull/1249</a></div><p>31 Introduce "for key $k value $v in $map"</p></div>
<div class="toot" id="closed-1119"><h2>Issue #1119 closed<span class="toot-id"> #closed-1119</span></h2><div class="pubdate">11 Jun at 16:15:04 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1119">https://github.com/qt4cg/qtspecs/issues/1119</a></div><p>Declare namespace bindings in XPath</p></div>
<div class="toot" id="closed-1055"><h2>Issue #1055 closed<span class="toot-id"> #closed-1055</span></h2><div class="pubdate">11 Jun at 16:14:59 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1055">https://github.com/qt4cg/qtspecs/issues/1055</a></div><p>xsl:variable/@as - simplifying the language - attempt 2</p></div>
<div class="toot" id="closed-955"><h2>Issue #955 closed<span class="toot-id"> #closed-955</span></h2><div class="pubdate">11 Jun at 16:14:49 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/955">https://github.com/qt4cg/qtspecs/issues/955</a></div><p>Options parameters as record types</p></div>
<div class="toot" id="closed-954"><h2>Issue #954 closed<span class="toot-id"> #closed-954</span></h2><div class="pubdate">11 Jun at 16:14:43 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/954">https://github.com/qt4cg/qtspecs/issues/954</a></div><p>Establish a default value for the XSLT fixed-namespaces attribute</p></div>
<div class="toot" id="closed-745"><h2>Issue #745 closed<span class="toot-id"> #closed-745</span></h2><div class="pubdate">11 Jun at 16:14:34 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/745">https://github.com/qt4cg/qtspecs/issues/745</a></div><p>Support for inline (anonymous) xslt functions</p></div>
<div class="toot" id="closed-557"><h2>Issue #557 closed<span class="toot-id"> #closed-557</span></h2><div class="pubdate">11 Jun at 16:14:23 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/557">https://github.com/qt4cg/qtspecs/issues/557</a></div><p>fn:unparsed-binary: accessing and manipulating binary types</p></div></div><p>See 2526
            more statuses in yearly archives.</p></article></main></body></html>