<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2024/">2024</a>, <a href="2023/">2023</a>, <a href="2022/">2022</a>, <a href="2021/">2021</a>, <a href="2020/">2020</a></p><div class="toots">
<div class="toot" id="closed-1469"><h2>Issue #1469 closed<span class="toot-id"> #closed-1469</span></h2><div class="pubdate">11 Oct at 10:37:42 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1469">https://github.com/qt4cg/qtspecs/issues/1469</a></div><p>Function finder</p></div>
<div class="toot" id="created-1494"><h2>Issue #1494 created<span class="toot-id"> #created-1494</span></h2><div class="pubdate">10 Oct at 15:15:39 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1494">https://github.com/qt4cg/qtspecs/issues/1494</a></div><details><summary>Records: Introduction?</summary><div class="markup"><p>It has been reported to me that the XQuery specification provides a nice and compact introduction on maps and arrays, but there currently is no comparable introduction for records yet. The “Changes” section on <a href="https://qt4cg.org/specifications/xquery-40/xquery-40.html#id-record-test">3.2.8.3 Record Type</a> gives a hint: It contains the sentence “Record types are added as a new kind of ItemType, constraining the value space of maps.”.</p>
<p>In addition, maybe we could rename the section <a href="https://qt4cg.org/specifications/xquery-40/xquery-40.html#id-named-record-types">Named Record Types</a> to “Record Declaration”, analogous to “Variable Declaration”, “Context Value Declaration” and “Function Declaration(s)”. “Item Type Declarations” could be renamed to “Type Declaration”.</p>
</div></details></div>
<div class="toot" id="created-1493"><h2>Issue #1493 created<span class="toot-id"> #created-1493</span></h2><div class="pubdate">10 Oct at 14:35:44 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1493">https://github.com/qt4cg/qtspecs/issues/1493</a></div><details><summary>fn:xml-to-json: Amendments</summary><div class="markup"><p>Maybe I was too quick in waving through #1476 as I believe that the current version is a bit sketchy. It says:</p>
<blockquote>
<p>An element <code>$E</code> named <code>number</code> is processed by copying the string value of <code>$E</code> to the output, making any changes that are necessary to ensure that the result is a valid JSON number. Such changes include:</p>
<ul>
<li>Removing leading and trailing whitespace.</li>
<li>Removing a leading plus sign.</li>
<li>Removing redundant leading zero digits.</li>
<li>Adding a zero digit before or after a decimal point that is not preceded and followed by a digit.</li>
</ul>
</blockquote>
<ol>
<li>For input like <code>X</code>, we cannot ensure that it will be a valid JSON number, so I assume that the changed string needs to be validated before being output?</li>
<li>“Removing redundant leading zero digits” may not consider negative number like <code>-01</code>.</li>
<li>Does “Such changes include” imply that the list may not be comprehensive?</li>
</ol>
<p>In many cases, the numbers to be output will be the result of an earlier <code>json-to-xml</code> conversion. If it is generated with XPath numbers, we shouldn’t encounter plus signs, redundant leading zeros etc. either, so I would suggest getting rid of all post-processing. We could simply say:</p>
<blockquote>
<p>An element <code>$E</code> named <code>number</code> results in the output of the string value of the element if it is a valid JSON number. Otherwise, <code>[FOJS0006]</code> is raised.</p>
</blockquote>
<p>If we do want to tweak the string value, we should provide a complete set of rules; maybe something like…</p>
<blockquote>
<p>The string value of an element <code>$E</code> named <code>number</code> is modified by:</p>
<ul>
<li>removing leading and trailing whitespace,</li>
<li>removing a single leading plus sign,</li>
<li>removing redundant leading zero digits, which are optionally preceded by a leading minus sign,</li>
<li>adding a zero digit before a decimal point that is not preceded by a digit, and</li>
<li>adding a zero digit after a decimal point that is not followed by a digit.</li>
</ul>
<p>If the result is a valid JSON number, it is output. Otherwise, <code>[FOJS0006]</code> is raised.</p>
</blockquote>
<p>…but that’s still fuzzy (for example, it lacks the explanation of what redundant zero digits are).</p>
</div></details></div>
<div class="toot" id="created-1492"><h2>Pull request #1492 created<span class="toot-id"> #created-1492</span></h2><div class="pubdate">10 Oct at 10:57:38 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1492">https://github.com/qt4cg/qtspecs/pull/1492</a></div><details><summary>1312 Add ws:explicit annotations</summary><div class="markup"><p>Also updates the list of tokens using angle-brackets.</p>
<p>Fix #1312</p>
</div></details></div>
<div class="toot" id="created-1491"><h2>Issue #1491 created<span class="toot-id"> #created-1491</span></h2><div class="pubdate">10 Oct at 10:01:10 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1491">https://github.com/qt4cg/qtspecs/issues/1491</a></div><details><summary>Empty record?</summary><div class="markup"><p>Even if the use cases may be limited: Shouldn’t we allow empty record types and declarations for the sake of completeness?</p>
<pre><code class="language-xquery">(: check for empty map :)
if($map instance of record()) then ...
</code></pre>
<pre><code class="language-xquery">declare record empty();

let $empty as empty := {}
return $empty
</code></pre>
</div></details></div>
<div class="toot" id="created-1490"><h2>Pull request #1490 created<span class="toot-id"> #created-1490</span></h2><div class="pubdate">10 Oct at 09:32:07 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1490">https://github.com/qt4cg/qtspecs/pull/1490</a></div><details><summary>1308 In fn:apply, Correct $array to $arguments</summary><div class="markup"><p>Fix #1308</p>
</div></details></div>
<div class="toot" id="created-1489"><h2>Pull request #1489 created<span class="toot-id"> #created-1489</span></h2><div class="pubdate">10 Oct at 09:18:12 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1489">https://github.com/qt4cg/qtspecs/pull/1489</a></div><details><summary>1483 return type of fn:error</summary><div class="markup"><p>Fix #1483</p>
</div></details></div>
<div class="toot" id="created-1488"><h2>Pull request #1488 created<span class="toot-id"> #created-1488</span></h2><div class="pubdate">10 Oct at 08:37:44 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1488">https://github.com/qt4cg/qtspecs/pull/1488</a></div><p>1487 in xsl:array, drop option to construct arrays from arrays</p></div>
<div class="toot" id="created-1487"><h2>Issue #1487 created<span class="toot-id"> #created-1487</span></h2><div class="pubdate">09 Oct at 10:58:08 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1487">https://github.com/qt4cg/qtspecs/issues/1487</a></div><details><summary>xsl:array - don't allow content to be supplied in array form</summary><div class="markup"><p>We reviewed and accepted a revised specification for xsl:array, but there was some unease about one of the options: specifically the ability to supply the content in the form of a sequence of arrays, which is then converted to an array of sequences.</p>
<p>Further work on implementation and on writing test cases inclines me to drop this option. There are several reasons:</p>
<ol>
<li>It is error-prone. When constructing nested arrays, there is a tendency to use <code>xsl:array/xsl:array</code> rather than <code>xsl:array/xsl:array-member/xsl:array</code>, and rather than leading to an error, this leads to incorrect results which can be hard to diagnose.</li>
<li>The specification relies on converting an array to a sequence using <code>$array?*</code>, but this is lossy, for example the array <code>[(1,2),3]</code> is converted to the sequence <code>(1,2,3)</code>. This provides a further source of potential confusion when users get it wrong.</li>
<li>Use of <code>xsl:array-member</code> seems to handle all the requirements and result in more readable code, and it's best to focus on providing a smaller number of different ways of achieving the same effect.</li>
</ol>
<p>The proposal is to drop option 2(e) of section 22.1.</p>
</div></details></div>
<div class="toot" id="closed-1450"><h2>Issue #1450 closed<span class="toot-id"> #closed-1450</span></h2><div class="pubdate">08 Oct at 17:29:52 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1450">https://github.com/qt4cg/qtspecs/issues/1450</a></div><p>Syntax of computed element and attribute constructors</p></div>
<div class="toot" id="closed-1480"><h2>Issue #1480 closed<span class="toot-id"> #closed-1480</span></h2><div class="pubdate">08 Oct at 17:29:51 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1480">https://github.com/qt4cg/qtspecs/pull/1480</a></div><p>1450 Disallow reserved names in element/attribute constructors</p></div>
<div class="toot" id="minutes-10-08"><h2>QT4 CG meeting 093 draft minutes<span class="toot-id"> #minutes-10-08</span></h2><div class="pubdate">08 Oct at 16:20:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/minutes/2024/10-08">https://qt4cg.org/meeting/minutes/2024/10-08</a></div><p>Draft minutes published.</p></div>
<div class="toot" id="created-1486"><h2>Issue #1486 created<span class="toot-id"> #created-1486</span></h2><div class="pubdate">08 Oct at 16:58:10 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1486">https://github.com/qt4cg/qtspecs/issues/1486</a></div><details><summary>Editorial corrections</summary><div class="markup"><p>XQFO:</p>
<ul>
<li>[ ] <code>fn:hours-from-dateTime</code>: Wrong example: <code>year-from-dateTime( xs:time("12:30:00") )</code></li>
<li>[ ] <code>fn:void</code>: “Formal Specification” should be dropped. As it is ·implementation-dependent· whether the supplied argument is evaluated or ignored, the empty sequence may not be equivalent.</li>
<li>[ ] <code>fn:sort-with</code>: Move equivalent expression to “Formal Specification”.</li>
<li>[ ] <code>fn:transitive-closure</code>: Rewrite XQuery comment to note.</li>
<li>[ ] Unify equivalent expressions</li>
</ul>
<p>XQuery:</p>
<ul>
<li>[ ] <code>declare record p:person {$first as xs:string, $last as xs:string, *);</code></li>
</ul>
<p>General:</p>
<ul>
<li>[ ] Format code (see #1124)</li>
</ul>
<p>…to be continued:</p>
</div></details></div>
<div class="toot" id="closed-1474"><h2>Issue #1474 closed<span class="toot-id"> #closed-1474</span></h2><div class="pubdate">08 Oct at 16:15:37 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1474">https://github.com/qt4cg/qtspecs/issues/1474</a></div><p>xml-to-json: strip leading plus signs</p></div>
<div class="toot" id="closed-1476"><h2>Issue #1476 closed<span class="toot-id"> #closed-1476</span></h2><div class="pubdate">08 Oct at 16:15:36 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1476">https://github.com/qt4cg/qtspecs/pull/1476</a></div><p>1474 xml-to-json: ensure numbers are JSON conformant</p></div>
<div class="toot" id="closed-1477"><h2>Issue #1477 closed<span class="toot-id"> #closed-1477</span></h2><div class="pubdate">08 Oct at 16:12:18 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1477">https://github.com/qt4cg/qtspecs/pull/1477</a></div><p>1475 Stylesheet change to mark optional fields with '?'</p></div>
<div class="toot" id="closed-1475"><h2>Issue #1475 closed<span class="toot-id"> #closed-1475</span></h2><div class="pubdate">08 Oct at 16:12:18 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1475">https://github.com/qt4cg/qtspecs/issues/1475</a></div><p>In rendered named record types, optional fields are not so marked</p></div>
<div class="toot" id="closed-1448"><h2>Issue #1448 closed<span class="toot-id"> #closed-1448</span></h2><div class="pubdate">08 Oct at 16:09:58 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1448">https://github.com/qt4cg/qtspecs/issues/1448</a></div><p>Operations on the dateTime family of types</p></div>
<div class="toot" id="closed-1481"><h2>Issue #1481 closed<span class="toot-id"> #closed-1481</span></h2><div class="pubdate">08 Oct at 16:09:57 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1481">https://github.com/qt4cg/qtspecs/pull/1481</a></div><p>1448 Component extraction on gregorian types</p></div>
<div class="toot" id="closed-1468"><h2>Issue #1468 closed<span class="toot-id"> #closed-1468</span></h2><div class="pubdate">08 Oct at 16:07:04 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1468">https://github.com/qt4cg/qtspecs/issues/1468</a></div><p>Understanding the xsl:array constructor</p></div>
<div class="toot" id="closed-1482"><h2>Issue #1482 closed<span class="toot-id"> #closed-1482</span></h2><div class="pubdate">08 Oct at 16:07:03 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1482">https://github.com/qt4cg/qtspecs/pull/1482</a></div><p>1468 Revise the xsl:array instruction</p></div>
<div class="toot" id="closed-1351"><h2>Issue #1351 closed<span class="toot-id"> #closed-1351</span></h2><div class="pubdate">08 Oct at 16:03:32 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1351">https://github.com/qt4cg/qtspecs/issues/1351</a></div><p>declare item type → type</p></div>
<div class="toot" id="closed-1277"><h2>Issue #1277 closed<span class="toot-id"> #closed-1277</span></h2><div class="pubdate">08 Oct at 16:03:32 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1277">https://github.com/qt4cg/qtspecs/issues/1277</a></div><p>Declare named record types</p></div>
<div class="toot" id="closed-1355"><h2>Issue #1355 closed<span class="toot-id"> #closed-1355</span></h2><div class="pubdate">08 Oct at 16:03:31 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1355">https://github.com/qt4cg/qtspecs/pull/1355</a></div><p>1351 Add "declare record" in XQuery</p></div>
<div class="toot" id="created-1485"><h2>Issue #1485 created<span class="toot-id"> #created-1485</span></h2><div class="pubdate">08 Oct at 15:59:11 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1485">https://github.com/qt4cg/qtspecs/issues/1485</a></div><details><summary>Record declarations in XSLT</summary><div class="markup"><p>In PR #1355 we have added "declare record" syntax to XQuery.</p>
<p>We should now do the same for XSLT.</p>
</div></details></div>
<div class="toot" id="closed-46"><h2>Issue #46 closed<span class="toot-id"> #closed-46</span></h2><div class="pubdate">08 Oct at 11:48:19 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/46">https://github.com/qt4cg/qtspecs/issues/46</a></div><p>xsl:sequence: @as</p></div>
<div class="toot" id="closed-1403"><h2>Issue #1403 closed<span class="toot-id"> #closed-1403</span></h2><div class="pubdate">08 Oct at 11:20:25 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1403">https://github.com/qt4cg/qtspecs/issues/1403</a></div><p>Align AnyMapTest, AnyArrayTest and with ElementTest</p></div>
<div class="toot" id="created-1484"><h2>Issue #1484 created<span class="toot-id"> #created-1484</span></h2><div class="pubdate">08 Oct at 08:47:52 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1484">https://github.com/qt4cg/qtspecs/issues/1484</a></div><details><summary>Functions that expect a record type should make it extensible</summary><div class="markup"><p>In general a function (or other operation, e.g. an XSLT instruction) that expects a record type as input should make that record type extensible. For example, <code>array:of-members</code> should accept <code>record(value as item()*, *)</code> rather than <code>record(value as item()*)</code> as currently defined; similarly <code>map:of-pairs</code> should accept <code>record(key, value, *)</code>.</p>
<p>Two reasons: (a) it avoids the user having to remove extraneous fields from records if they happen to be present, and (b) it avoids the system having to check whether extraneous fields are present.</p>
<p>For example, it now becomes legal (and perhaps sometimes useful) to write <code>array:of-members(map:pairs($map))</code>; currently this fails because the result of <code>map:pairs</code> includes <code>key</code> fields which <code>array:of-members</code> does not permit.</p>
</div></details></div>
<div class="toot" id="agenda-10-08"><h2>QT4 CG meeting 093 draft agenda<span class="toot-id"> #agenda-10-08</span></h2><div class="pubdate">07 Oct at 13:00:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/agenda/2024/10-08">https://qt4cg.org/meeting/agenda/2024/10-08</a></div><p>Draft agenda published.</p></div>
<div class="toot" id="created-1483"><h2>Issue #1483 created<span class="toot-id"> #created-1483</span></h2><div class="pubdate">07 Oct at 09:29:37 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1483">https://github.com/qt4cg/qtspecs/issues/1483</a></div><details><summary>Type `none`</summary><div class="markup"><p>The function <code>fn:error</code> uses <code>none</code> as return type. This type is only defined in the outdated <a href="https://www.w3.org/TR/xquery-semantics/">XQuery 1.0 and XPath 2.0 Formal Semantics</a> specification:</p>
<ol>
<li>Do we want to live with the current state?</li>
<li>Should we include a better definition in the current specifications?</li>
<li>Should we simply use <code>item()*</code> as return type, even if the function never returns anything?</li>
</ol>
<p>If we keep <code>none</code>, the test case generator should be revised for <a href="https://github.com/qt4cg/qt4tests/blob/b0d8df63d57ab0ab9f985217178811487f0b74ae/misc/BuiltInKeywords.xml#L74C21-L82">Keywords-fn-error-1</a>.</p>
</div></details></div></div><p>See 2959
            more statuses in yearly archives.</p></article></main></body></html>