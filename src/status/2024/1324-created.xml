<item>
   <title>Issue #1324 created</title>
   <pubDate>2024-07-16T16:10:44Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/1324</link>
   <guid>https://qt4cg.org/@qt4cg/2024/#created-1324</guid>
   <description>&lt;div&gt;&lt;p&gt;Executable specifications&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;For a number of functions we have provided executable specifications: that is, we have provided an XQuery function declaration that claims to be a conformant implementation of the function being specified.&lt;/p&gt;
&lt;p&gt;We should add machinery to ensure that these reference implementations are correct: that is, that they compile, that they correctly run the examples in the spec, and that they can be used to run the tests for the relevant function in the test suite.&lt;/p&gt;
&lt;p&gt;There are one or two cases where we have been doing this in an ad-hoc way by having additional test cases in the test suite that use the reference implementation (or a copy of it!) in place of the real function; but this is clumsy and the process should be automated.&lt;/p&gt;
&lt;p&gt;It can be tied in with the mechanism that currently generates test cases from the examples in the spec.&lt;/p&gt;
&lt;p&gt;We should probably handle several levels:&lt;/p&gt;
&lt;p&gt;(a) There are cases where the reference implementation can be a simple XPath expression: for example the function &lt;code&gt;fn:local-name($x)&lt;/code&gt; delivers &lt;code&gt;fn:local-name-from-QName(fn:node-name($x))&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;(b) In other cases a full XQuery function declaration is needed, especially where it makes use of a supporting helper function.&lt;/p&gt;
&lt;p&gt;Ideally the reference implementation should use 3.1 syntax only (to make it easily testable on 3.1 implementations); but not if this sacrifices clarity, given that the primary audience is the human reader.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
