<item>
   <title>Issue #1345 created</title>
   <pubDate>2024-07-25T08:33:07Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/1345</link>
   <guid>https://qt4cg.org/@qt4cg/2024/#created-1345</guid>
   <description>&lt;div&gt;&lt;p&gt;Bare brace ambiguity resolution in practice&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;I have applied the new bare brace grammar rules to two existing projects, and (if I’m correct) all of the the following constructs cannot be parsed anymore (with the order reflecting my sense of urgency):&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Simple maps: &lt;code&gt;$data ! {}&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Sequence arrow: &lt;code&gt;{} =&amp;gt; map:size()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Predicates: &lt;code&gt;{ 'x': 1 }[map:keys(.) = 'x']&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Return clause: &lt;code&gt;let $x := ... return {}&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Paths: &lt;code&gt;&amp;lt;a/&amp;gt;/{}&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Instance of: &lt;code&gt;{} instance of record(x)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;If expression: &lt;code&gt;if($x) then { $x: $y } else {}&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;I think we should try hard to tweak the grammar for some of these.&lt;/p&gt;
&lt;p&gt;I didn’t manage to construct an ambiguous example with &lt;code&gt;return&lt;/code&gt; and &lt;code&gt;{}&lt;/code&gt;; could someone help me?&lt;/p&gt;
&lt;p&gt;Related: #1309&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
