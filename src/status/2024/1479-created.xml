<item>
   <title>Issue #1479 created</title>
   <pubDate>2024-10-03T09:24:58Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/1479</link>
   <guid>https://qt4cg.org/@qt4cg/2024/#created-1479</guid>
   <description>&lt;div&gt;&lt;p&gt;Default element namespace in XQuery: interaction of 'fixed' and '##any'&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;In §5.14 we document two changes to "declare default element namespace":&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;The [default namespace for elements and types] can now be declared to be &lt;code&gt;fixed&lt;/code&gt; for a query module, meaning it is unaffected by a namespace declaration appearing on a direct element constructor. [citation missing - should be issue #65, PR #753]&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;The [default namespace for elements and types] can be set to the value ##any, allowing unprefixed names in axis steps to match elements with a given local name in any namespace.   [Issue #296 PR #1181]&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;We don't discuss how these two options interact. Are they completely orthogonal?&lt;/p&gt;
&lt;p&gt;The description of &lt;code&gt;##any&lt;/code&gt; says its effect is that "an unprefixed name appearing in any other context where an element or type name is expected is treated as being in no namespace." This deserves a mention in the rules for direct and computed element constructors.&lt;/p&gt;
&lt;p&gt;In §2.2.1 we have added the statement: &lt;em&gt;The statically known namespaces may include a binding for the zero-length prefix; however, this is used only in limited circumstances because the rules for resolving unprefixed QNames depend on how such a name is used.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;It's not clear how such a binding can come into existence. It can't be done using any of the prolog declarations that bind  a prefix. And under the current rules, I don't think it can be done using a namespace declaration attribute on a fixed element constructor. Perhaps it was the intent that &lt;code&gt;xmlns="abc"&lt;/code&gt; would do this if "fixed" is set, but that's not the case currently.&lt;/p&gt;
&lt;p&gt;Section §4.12.1.2 Namespace Declaration Attributes could do with a "changes" section explaining what has changed.&lt;/p&gt;
&lt;p&gt;In §4.12.1, Direct Element Constructors, we say "If the element name has no namespace prefix, the namespace binding for the zero-length prefix in the [statically known namespaces] is used; if there is no such binding, the element name will be in no namespace." That can't be right, there's no mention of the default element/type namespace at all.&lt;/p&gt;
&lt;p&gt;In §4.12.3.1 Computed Element Constructors, the same problem arises for a bare unprefixed NCName, but for a dynamically-computed name, we use the default element/type namespace.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
