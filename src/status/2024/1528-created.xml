<item>
   <title>Issue #1528 created</title>
   <pubDate>2024-10-24T07:25:30Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/1528</link>
   <guid>https://qt4cg.org/@qt4cg/2024/#created-1528</guid>
   <description>&lt;div&gt;&lt;p&gt;Computed node constructors: observations&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;Observations/conclusions from the exchange on &lt;a href="https://xmlcom.slack.com/archives/C01GVC3JLHE/p1729683669891659"&gt;Slack&lt;/a&gt; regarding computed node constructors:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;We should highlight the breaking change in the appendix: J.1 Incompatibilities relative to XQuery 3.1.&lt;/li&gt;
&lt;li&gt;We should present a list of keywords which is ambiguous and exclude other ones (like e.g. &lt;code&gt;count&lt;/code&gt; or &lt;code&gt;value&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Maybe we should generally discourage users from using the legacy NCName syntax, and remove corresponding examples in the spec, as further versions of the language may lead to new incompatibilities.&lt;/li&gt;
&lt;li&gt;Syntax errors in quoted element names were should already be detected at parse time, for example by using pseudo quotes:&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class="language-bash"&gt;# currently
CompNodeName    ::=  StringLiteral | UnreservedName | ("{" Expr "}")
CompNodeNCName  ::=  StringLiteral | UnreservedNCName | ("{" Expr "}")
# proposed
CompNodeName    ::=  UnreservedName | ('"' UnreservedName '"') | ("'" UnreservedName "'") | ("{" Expr "}")
CompNodeNCName  ::=  UnreservedNCName | ('"' UnreservedNCName '"') | ("'" UnreservedNCName "'") | ("{" Expr "}")
&lt;/code&gt;&lt;/pre&gt;
&lt;hr/&gt;
&lt;p&gt;A quick evaluation over appr. 8,000 XQuery files resulted in the following list of occurrences of possible incompatibilities (spread across  appr. 400 files):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;300x &lt;code&gt;attribute type {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;107x &lt;code&gt;element option {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;98x &lt;code&gt;element record {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;85x &lt;code&gt;attribute count {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;81x &lt;code&gt;attribute value {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;31x &lt;code&gt;element value {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;24x &lt;code&gt;element type {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;18x &lt;code&gt;attribute text {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;15x &lt;code&gt;attribute values {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;12x &lt;code&gt;attribute namespace {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;11x &lt;code&gt;attribute default {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;10x &lt;code&gt;element text {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;10x &lt;code&gt;attribute key {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;10x &lt;code&gt;element key {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;9x &lt;code&gt;element group {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;9x &lt;code&gt;element count {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;8x &lt;code&gt;element to {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;8x &lt;code&gt;element item {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;5x &lt;code&gt;element div {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;4x &lt;code&gt;attribute collation {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;4x &lt;code&gt;attribute encoding {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;4x &lt;code&gt;attribute comment {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;3x &lt;code&gt;attribute context {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;3x &lt;code&gt;attribute case {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;3x &lt;code&gt;element map {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;3x &lt;code&gt;element empty {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;2x &lt;code&gt;element items {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;2x &lt;code&gt;attribute to {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;1x &lt;code&gt;attribute empty {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;1x &lt;code&gt;attribute item {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;1x &lt;code&gt;element element {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;1x &lt;code&gt;attribute where {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;1x &lt;code&gt;element values {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;1x &lt;code&gt;attribute if {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;1x &lt;code&gt;element in {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;1x &lt;code&gt;element comment {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;1x &lt;code&gt;attribute start {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;1x &lt;code&gt;attribute end {&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;1x &lt;code&gt;element document {&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
