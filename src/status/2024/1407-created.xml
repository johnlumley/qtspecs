<item>
   <title>Issue #1407 created</title>
   <pubDate>2024-08-29T09:58:48Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/1407</link>
   <guid>https://qt4cg.org/@qt4cg/2024/#created-1407</guid>
   <description>&lt;div&gt;&lt;p&gt;Improve the spec prose and table of content layout for types&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;This has been discussed on Slack. The key points are:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;The terminology in the table of content is mixed (Union Types vs Function Tests), focused on the grammar not the organisation.&lt;/li&gt;
&lt;li&gt;The test sections (Function Test, etc.) lack definitions and overviews of the item types like is done with the other types, such as choice item types.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;I also think the other sections like the &lt;strong&gt;Subtype Relationships&lt;/strong&gt; are largely fine as they are as they are dealing with specific rules around subtypes, coercion, etc.&lt;/p&gt;
&lt;p&gt;So I propose:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Adding an overview of what the function types/tests, etc. are like is done with the union types, etc.&lt;/li&gt;
&lt;li&gt;Adding a note to the maps overview similar to "A map is a function of the form &lt;code&gt;function (xs:string) as item()*&lt;/code&gt; that can be passed a key name and returns the value of that key entry."&lt;/li&gt;
&lt;li&gt;Adding a note to the arrays overview similar to "An array is a function of the form &lt;code&gt;function (xs:integer) as item()*&lt;/code&gt; that returns the items of the array at the specified index, or raises a FO.... error if the index is out of bounds."&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;I also propose renaming and reorganizing parts of the table of contents as follows (omitting unaffected sections):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-types"&gt;3 Types&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-sequencetype-syntax"&gt;3.1 Sequence Types&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-sequence-type-examples"&gt;3.1.1 Examples of Sequence Types&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-sequencetype-matching"&gt;3.1.2 Sequence Type Matching&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-matching-item"&gt;3.2 Item Types&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#general-item-types"&gt;3.2.1 General item types&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-atomic-types"&gt;3.2.2 Atomic Types&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-union-types"&gt;3.2.3 Union Types&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-namespace-sensitive"&gt;3.2.4 Namespace-sensitive Types&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-choice-item-types"&gt;3.2.5 Δ Choice Item Types&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-enumeration-types"&gt;3.2.6 Δ Enumeration Types&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#node-types"&gt;3.2.7 Δ Node Types&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-simple-node-tests"&gt;3.2.7.1 Simple Nodes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-element-test"&gt;3.2.7.2 Δ Elements&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-schema-element-test"&gt;3.2.7.2.1 Schema Elements&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-attribute-test"&gt;3.2.7.3 Δ Attributes&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-schema-attribute-test"&gt;3.2.7.3.1 Schema Attributes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-function-test"&gt;3.2.8 Δ Function Types&lt;/a&gt; ~ NOTE: Covers the current 3.2.8.1 Δ Function Test section.&lt;/li&gt;
&lt;li&gt;3.2.9 Maps and Records
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-map-test"&gt;3.2.9.1 Map Types&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-record-test"&gt;3.2.9.2 Δ Record Types&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-recursive-record-tests"&gt;3.2.9.2.1 Recursive Record Tests&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-array-test"&gt;3.2.10 Array Types&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;And to make the heading names in the subtype section consistent:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-sequencetype-subtype"&gt;3.3 Δ Subtype Relationships&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-seqtype-subtype"&gt;3.3.1 Subtypes of Sequence Types&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-itemtype-subtype"&gt;3.3.2 Subtypes of Item Types&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-item-subtype-general"&gt;3.3.2.1 General Rules&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-item-subtype-choice"&gt;3.3.2.2 Choice Item Types&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-item-subtype-atomic"&gt;3.3.2.3 Atomic and Union Types&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;3.3.2.4 Nodes
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-item-subtype-nodes"&gt;3.3.2.4.1 General Rules&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-item-subtype-elements"&gt;3.3.2.4.1 Elements&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-item-subtype-attributes"&gt;3.3.2.4.1 Attributes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-item-subtype-functions"&gt;3.3.2.5 Functions&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-item-subtype-maps"&gt;3.3.2.6 Maps&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-item-subtype-arrays"&gt;3.3.2.7 Arrays&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-item-subtype-records"&gt;3.3.2.8 Records&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-itemtype-subtype-aliases"&gt;3.3.2.9 Named Items&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
