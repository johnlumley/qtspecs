<item>
   <title>Pull request #1432 created</title>
   <pubDate>2024-09-11T04:47:55Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/pull/1432</link>
   <guid>https://qt4cg.org/@qt4cg/2024/#created-1432</guid>
   <description>&lt;div&gt;&lt;p&gt;1379 Initializing expression: Allow self references&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;With function declarations, recursive functions can be declared:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-xquery"&gt;declare function local:factorial($x) {
  if($x &amp;gt; 1) then $x + local:factorial($x - 1) else $x
};
local:factorial(5)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We should allow the same for variable declarations:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-xquery"&gt;declare variable $factorial := fn($x) {
  if($x &amp;gt; 1) then $x + $factorial($x - 1) else $x
};
$factorial(5)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I believe it is sufficient to simplify the definition of &lt;em&gt;initializing expressions&lt;/em&gt; and drop the exception “other than the variable being declared”.&lt;/p&gt;
&lt;p&gt;Related: https://www.w3.org/Bugs/Public/show_bug.cgi?id=15791 (the static dependency check was given up before due to &lt;code&gt;fn:function-lookup&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;Closes #1379&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
