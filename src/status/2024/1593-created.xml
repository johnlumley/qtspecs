<item>
   <title>Issue #1593 created</title>
   <pubDate>2024-11-20T07:43:36Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/1593</link>
   <guid>https://qt4cg.org/@qt4cg/2024/#created-1593</guid>
   <description>&lt;div&gt;&lt;p&gt;Item type syntax document-node(*)&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;I propose that the syntax &lt;code&gt;document-node(NameTest)&lt;/code&gt; be allowed as a synonym for &lt;code&gt;document-node(element(NameTest))&lt;/code&gt; to match a document node that has exactly one element node child matching &lt;code&gt;NameTest&lt;/code&gt; (possibly with comment, and processing-instruction siblings).&lt;/p&gt;
&lt;p&gt;The rationale is that &lt;code&gt;document-node()&lt;/code&gt; is often used in situations where a well-formed document is required, and people are more likely to use the more precise type &lt;code&gt;document-node(*)&lt;/code&gt; if it can be expressed with less verbosity.&lt;/p&gt;
&lt;p&gt;For example, the return type of &lt;code&gt;parse-xml()&lt;/code&gt; can then be &lt;code&gt;document-node(*)&lt;/code&gt;, and the return type of &lt;code&gt;parse-html()&lt;/code&gt; can be &lt;code&gt;document-node(*:xhtml)&lt;/code&gt;. I propose also that &lt;code&gt;csv-to-xml()&lt;/code&gt; be brought into line by returning &lt;code&gt;document-node(fn:csv)&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;There are a number of places in F&amp;amp;O where we currently accept or return &lt;code&gt;document-node()&lt;/code&gt; and could be more specific by changing this to &lt;code&gt;document-node(*)&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The verbosity is especially apparent when we want to use the type &lt;code&gt;(document-node(element(X)) | element (X))&lt;/code&gt; which can now be abbreviated to &lt;code&gt;(document-node(X) | element(X))&lt;/code&gt; which reads much more clearly,&lt;/p&gt;
&lt;p&gt;There are also a number of places where we currently require &lt;code&gt;element(*)&lt;/code&gt; -- for example the first argument of &lt;code&gt;elements-to-maps&lt;/code&gt; -- where it would be user-friendly to change this to &lt;code&gt;(document-node(*) | element(*))&lt;/code&gt; (with the semantics that supplying a document node has the same effect as supplying the outermost element of the document).&lt;/p&gt;
&lt;p&gt;We should also clarify that &lt;code&gt;document-node(element())&lt;/code&gt; does not match a document node having text node children - something that is not currently stated very explicitly.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
