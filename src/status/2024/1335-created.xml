<item>
   <title>Issue #1335 created</title>
   <pubDate>2024-07-20T09:51:33Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/1335</link>
   <guid>https://qt4cg.org/@qt4cg/2024/#created-1335</guid>
   <description>&lt;div&gt;&lt;p&gt;Data Model primitives for Maps and Arrays&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;In principle we ought to be able to define all operations on maps and arrays in terms of the primitives defined in the Data Model spec.&lt;/p&gt;
&lt;p&gt;Currently the data model defines the primitives as &lt;code&gt;dm:map-entries&lt;/code&gt;, &lt;code&gt;dm:array-size&lt;/code&gt;, and &lt;code&gt;dm:array-get&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;This is a workable set for retrieval functions, though it's not necessarily an ideal set. But what is missing is any primitives for map and array construction.&lt;/p&gt;
&lt;p&gt;I think we need to regard the empty array and empty map as given, and then define array:append and map:put as primitives.&lt;/p&gt;
&lt;p&gt;Since &lt;code&gt;dm:map-entries()&lt;/code&gt; isn't the same as the user-visible &lt;code&gt;map:entries()&lt;/code&gt; it might be a good idea to rename it.&lt;/p&gt;
&lt;p&gt;Another way of defining the primitives would be to make iteration primitive, so the primitives become&lt;/p&gt;
&lt;p&gt;&lt;code&gt;dm:for-each-map-entry($map, fn($key, $value)) &lt;/code&gt;
and&lt;/p&gt;
&lt;p&gt;&lt;code&gt;dm:for-each-array-member($array, fn($position, $value))&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;This has some merit in that (a) maps and arrays are treated symmetrically, and (b) there are only 2 primitives rather than 3.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
